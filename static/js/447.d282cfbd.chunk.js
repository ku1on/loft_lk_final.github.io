"use strict";(self.webpackChunkloft=self.webpackChunkloft||[]).push([[447],{70447:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var i=n(1413),r=n(15861),a=n(29439),s=n(87757),o=n.n(s),d=n(74511),l=n(90841),c=n(67056),u=n(12520),p=n(44415),x=n(49056),h=n(78365),f=n(47313),k=n(31881),m=n.n(k),j=n(69172),v=n(2360),g=n(75627),y=n(97890);var I=n.p+"static/media/apple.23ed3e70c5d35081d779c3e0a7bd9605.svg";var b=n.p+"static/media/vk_music.4119af8c0ff4ba43d3533a05fa014480.svg";var Z=n.p+"static/media/deezer.fd0c349dda68ac6f7289a9fff4852988.svg";var E=n.p+"static/media/spotify.0cf361ee21735406394c35bf59019e2e.svg";n.p;var B=n.p+"static/media/yandex.78856a187c9c5ba92a4870a184663dec.svg";var w=n.p+"static/media/yt_music.8428edc7024dae39791160ea01bcc745.svg",z=n(46417);function D(e){var t=(0,d.pm)(),n=e.rid,s=(0,f.useState)(),k=(0,a.Z)(s,2),D=k[0],L=k[1],V=(0,f.useState)(!1),N=(0,a.Z)(V,2),S=N[0],_=N[1],A=(0,f.useState)(!1),C=(0,a.Z)(A,2),G=C[0],W=C[1],F=(0,f.useState)(!1),M=(0,a.Z)(F,2),T=M[0],X=M[1],$=function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return W(!0),e.prev=1,e.next=4,m().get("".concat((0,j.Z)(),"/user/sync_platforms?token=").concat(D.link.token),{headers:{authorization:"Bearer ".concat((0,v.Z)())}});case 4:e.sent,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:return e.prev=9,K(),W(!1),e.finish(9);case 13:case"end":return e.stop()}}),e,null,[[1,7,9,13]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=(0,r.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m().get("".concat((0,j.Z)(),"/user/get_link?id=").concat(n),{headers:{authorization:"Bearer ".concat((0,v.Z)())}});case 2:(t=e.sent).data.link.links.apple&&(document.getElementById("apple").value=t.data.link.links.apple),t.data.link.links.vk&&(document.getElementById("vk").value=t.data.link.links.vk),t.data.link.links.spotify&&(document.getElementById("spotify").value=t.data.link.links.spotify),t.data.link.links.yandex&&(document.getElementById("yandex").value=t.data.link.links.yandex),t.data.link.links.youtube&&(document.getElementById("youtube").value=t.data.link.links.youtube),t.data.link.links.deezer&&(document.getElementById("deezer").value=t.data.link.links.deezer);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=(0,r.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m().get("".concat((0,j.Z)(),"/user/get_link?id=").concat(n),{headers:{authorization:"Bearer ".concat((0,v.Z)())}});case 2:(t=e.sent).data.error?X(!0):(document.getElementById("href_button").href="https://either.fun/".concat(t.data.link.link.token),L(t.data.link),_(!0));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,f.useEffect)((function(){S||P()}),[]);var R=(0,g.cI)(),U=R.register,Y=(R.handleSubmit,function(){var e=(0,r.Z)(o().mark((function e(n){var i,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return W(!0),e.prev=1,i=document.getElementById("main"),r=new FormData(i),e.next=6,m().post("".concat((0,j.Z)(),"/user/edit_link"),r,{headers:{authorization:"Bearer ".concat((0,v.Z)())}});case 6:(a=e.sent).data.error&&t({position:"top",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!",description:"".concat(a.data.error.message),status:"error",duration:3e3,isClosable:!0}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t({position:"top",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!",description:"".concat(e.t0),status:"error",duration:3e3,isClosable:!0});case 13:P(),W(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()),q=function(){return(0,z.jsx)(l.M5,{children:(0,z.jsx)(c.$,{color:"main",size:"xl"})})},H=e.t;return(0,z.jsxs)(l.xu,{style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},borderWidth:"1px",borderRadius:"lg",bgColor:"white",children:[T&&(0,z.jsx)(y.Fg,{to:"/404"}),S&&(0,z.jsx)(l.xu,{children:(0,z.jsx)(l.xu,{children:(0,z.jsxs)(l.xu,{m:"20px",children:[(0,z.jsxs)("form",{id:"main",children:[(0,z.jsx)(u.Input,(0,i.Z)({hidden:"hidden",value:n},U("id"))),(0,z.jsxs)(p.NI,{mt:"10px",onBlur:function(){return Y()},children:[(0,z.jsx)(p.lX,{fontWeight:"bold",htmlFor:"token",children:(0,z.jsx)(l.xv,{fontWeight:"bold",children:H("link.edit.settings.token")})}),(0,z.jsxs)(u.InputGroup,{children:[(0,z.jsx)(u.InputLeftElement,{pointerEvents:"none",w:"fit-content",left:"0px",paddingTop:3,paddingBottom:3,paddingLeft:4,color:"gray.400",top:"0px",justifyContent:"center",alignItems:"center",h:"2.6rem",children:"either.fun/"}),(0,z.jsx)(u.Input,(0,i.Z)({w:"100%",paddingInlineStart:12,paddingLeft:"101px",paddingTop:3,paddingBottom:3,paddingInlineEnd:4,id:"token",defaultValue:D.link.token,placeholder:H("link.edit.settings.token"),type:"text",isDisabled:G},U("token")))]})]}),(0,z.jsxs)(p.NI,{mt:"10px",onBlur:function(){return Y()},children:[(0,z.jsx)(p.lX,{fontWeight:"bold",htmlFor:"theme",children:(0,z.jsx)(l.xv,{fontWeight:"bold",children:H("link.edit.settings.theme")})}),(0,z.jsxs)(x.Ph,(0,i.Z)((0,i.Z)({id:"theme",defaultValue:D.theme},U("theme")),{},{children:[(0,z.jsx)("option",{value:"light",children:H("link.edit.settings.theme.light")}),(0,z.jsx)("option",{value:"dark",children:H("link.edit.settings.theme.dark")})]}))]}),(0,z.jsxs)(p.NI,{mt:"10px",onBlur:function(){return Y()},children:[(0,z.jsx)(p.lX,{fontWeight:"bold",htmlFor:"platforms",children:(0,z.jsx)(l.xv,{fontWeight:"bold",children:H("link.edit.settings.platforms")})}),(0,z.jsxs)(u.InputGroup,{children:[(0,z.jsx)(u.InputLeftAddon,{pointerEvents:"none",children:(0,z.jsx)(h.Ee,{src:I,w:"30px",h:"30px"})}),(0,z.jsx)(u.Input,(0,i.Z)({id:"apple",defaultValue:D.links.apple,placeholder:"Apple Music",type:"text",isDisabled:G},U("apple")))]})]}),(0,z.jsx)(p.NI,{mt:"10px",onBlur:function(){Y()},children:(0,z.jsxs)(u.InputGroup,{children:[(0,z.jsx)(u.InputLeftAddon,{pointerEvents:"none",children:(0,z.jsx)(h.Ee,{src:b,w:"30px",h:"30px"})}),(0,z.jsx)(u.Input,(0,i.Z)({id:"vk",defaultValue:D.links.vk,placeholder:"VK \u041c\u0443\u0437\u044b\u043a\u0430",type:"text",isDisabled:G},U("vk")))]})}),(0,z.jsx)(p.NI,{mt:"10px",onBlur:function(){Y()},children:(0,z.jsxs)(u.InputGroup,{children:[(0,z.jsx)(u.InputLeftAddon,{pointerEvents:"none",children:(0,z.jsx)(h.Ee,{src:E,w:"30px",h:"30px"})}),(0,z.jsx)(u.Input,(0,i.Z)({id:"spotify",defaultValue:D.links.spotify,placeholder:"Spotify",type:"text",isDisabled:G},U("spotify")))]})}),(0,z.jsx)(p.NI,{mt:"10px",onBlur:function(){Y()},children:(0,z.jsxs)(u.InputGroup,{children:[(0,z.jsx)(u.InputLeftAddon,{pointerEvents:"none",children:(0,z.jsx)(h.Ee,{src:B,w:"30px",h:"30px"})}),(0,z.jsx)(u.Input,(0,i.Z)({id:"yandex",defaultValue:D.links.yandex,placeholder:"\u042f\u043d\u0434\u0435\u043a\u0441 \u041c\u0443\u0437\u044b\u043a\u0430",type:"text",isDisabled:G},U("yandex")))]})}),(0,z.jsx)(p.NI,{mt:"10px",onBlur:function(){Y()},children:(0,z.jsxs)(u.InputGroup,{children:[(0,z.jsx)(u.InputLeftAddon,{pointerEvents:"none",children:(0,z.jsx)(h.Ee,{src:w,w:"30px",h:"30px"})}),(0,z.jsx)(u.Input,(0,i.Z)({id:"youtube",defaultValue:D.links.youtube,placeholder:"YouTube Music",type:"text",isDisabled:G},U("youtube")))]})}),(0,z.jsx)(p.NI,{mt:"10px",onBlur:function(){Y()},children:(0,z.jsxs)(u.InputGroup,{children:[(0,z.jsx)(u.InputLeftAddon,{pointerEvents:"none",children:(0,z.jsx)(h.Ee,{src:Z,w:"30px",h:"30px"})}),(0,z.jsx)(u.Input,(0,i.Z)({id:"deezer",defaultValue:D.links.deezer,placeholder:"Deezer",type:"text",isDisabled:G},U("deezer")))]})})]}),(0,z.jsx)(l.xu,{mt:"10px",children:!G&&(0,z.jsx)(l.rU,{color:"main",_hover:{color:"teal.600",textDecoration:"none"},onClick:$,children:H("link.edit.settings.search")})||(0,z.jsx)(c.$,{color:"main"})})]})})})||(0,z.jsx)(q,{})]})}}}]);