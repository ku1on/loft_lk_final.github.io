"use strict";(self.webpackChunkloft=self.webpackChunkloft||[]).push([[2782],{72782:function(e,t,a){a.r(t),a.d(t,{default:function(){return K}});var n=a(93433),r=a(37762),s=a(15861),c=a(29439),i=a(87757),l=a.n(i),o=a(90841),x=a(24149),d=a(16106),h=a(67056),u=a(65942),p=a(26535),y=a(29596),j=a(47313),f=a(31881),m=a.n(f),b=a(69172),g=a(2360),v=a(29466),_=a(71978),w=a(22819),Z=a(37169),k=a(26236),S=a(75767),C=a(45163),z=a(64794),B=a(5445),T=a(19469),U=a(33837),W=a(24511),D=a(46417);function K(){var e=(0,W.$)().t,t=function(){return(0,D.jsx)(o.xu,{borderWidth:"1px",alignItems:"center",textAlign:"center",alignContent:"center",style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},borderRadius:"lg",bgColor:"white"})},a=function(e){return(0,D.jsx)(x.u,{borderWidth:"1px",style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},borderRadius:"lg",label:e.name,hasArrow:!0,placement:"top",children:(0,D.jsxs)(o.xv,{as:o.rU,_hover:{color:"main",textDecoration:"none"},children:[e.text," ",e.icon]})})},i=(0,j.useState)([]),f=(0,c.Z)(i,2),K=f[0],R=f[1],q=(0,j.useState)(!1),N=(0,c.Z)(q,2),L=N[0],$=N[1],A=(0,j.useState)(!1),J=(0,c.Z)(A,2),M=J[0],P=J[1],V=(0,j.useState)(!1),E=(0,c.Z)(V,2),O=E[0],H=E[1],I=(0,j.useState)(null),X=(0,c.Z)(I,2),F=X[0],G=X[1],Q=(0,j.useState)([]),Y=(0,c.Z)(Q,2),ee=Y[0],te=Y[1],ae=(0,j.useState)(10),ne=(0,c.Z)(ae,2),re=ne[0],se=ne[1],ce=(0,j.useState)("all"),ie=(0,c.Z)(ce,2),le=ie[0],oe=ie[1],xe=(0,j.useState)(e("analytics.table.show_date.no")),de=(0,c.Z)(xe,2),he=de[0],ue=de[1],pe=(0,j.useState)(!0),ye=(0,c.Z)(pe,2),je=ye[0],fe=ye[1],me=function(){var e=(0,s.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m().get("".concat((0,b.Z)(),"/user/get_analytics?limit=",10),{headers:{authorization:"Bearer ".concat((0,g.Z)())}});case 2:t=e.sent,R(t.data.analytics);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=(0,s.Z)(l().mark((function e(){var t,a,n,s,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m().get("".concat((0,b.Z)(),"/user/get_releases?type=ok"),{headers:{authorization:"Bearer ".concat((0,g.Z)())}});case 2:t=e.sent,a=[],n=(0,r.Z)(t.data.releases);try{for(n.s();!(s=n.n()).done;)c=s.value,a.push({value:c.id,label:"".concat(c.artists," - ").concat(c.title)})}catch(i){n.e(i)}finally{n.f()}te(a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=(0,s.Z)(l().mark((function e(){var t,a,n,s,c,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m().get("".concat((0,b.Z)(),"/user/get_date_streams"),{headers:{authorization:"Bearer ".concat((0,g.Z)())}});case 2:t=e.sent,a=t.data.streams,n=[],s=(0,r.Z)(a);try{for(s.s();!(c=s.n()).done;)i=c.value,n.push({name:i.date,"\u0412\u0441\u0435 \u043f\u0440\u043e\u0441\u043b\u0443\u0448\u0438\u0432\u0430\u043d\u0438\u044f":i.all_streams,"\u041f\u043b\u0430\u0442\u043d\u044b\u0435 \u043f\u0440\u043e\u0441\u043b\u0443\u0448\u0438\u0432\u0430\u043d\u0438\u044f":i.pay_streams})}catch(l){s.e(l)}finally{s.f()}G(n),$(!0);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ve=function(){var e=(0,s.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m().get("".concat((0,b.Z)(),"/user/get_all_streams"),{headers:{authorization:"Bearer ".concat((0,g.Z)())}});case 2:t=e.sent,P(t.data.all_streams),H(t.data.pay_streams);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_e=function(){var t=(0,s.Z)(l().mark((function t(a){var n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(se(a),$(!1),fe(!0),t.prev=3,n=null,"all"!==le){t.next=19;break}if(he!==e("analytics.table.show_date.yes")){t.next=13;break}return t.next=9,m().get("".concat((0,b.Z)(),"/user/get_date_streams?limit=").concat(a,"&orderBy=desc"),{headers:{authorization:"Bearer ".concat((0,g.Z)())}});case 9:n=t.sent,R(n.data.streams),t.next=17;break;case 13:return t.next=15,m().get("".concat((0,b.Z)(),"/user/get_analytics?limit=").concat(a),{headers:{authorization:"Bearer ".concat((0,g.Z)())}});case 15:n=t.sent,R(n.data.analytics);case 17:t.next=30;break;case 19:if(he!==e("analytics.table.show_date.yes")){t.next=26;break}return t.next=22,m().get("".concat((0,b.Z)(),"/user/get_release_date_streams?limit=").concat(a,"&id=").concat(le,"&orderBy=desc"),{headers:{authorization:"Bearer ".concat((0,g.Z)())}});case 22:n=t.sent,R(n.data.streams),t.next=30;break;case 26:return t.next=28,m().get("".concat((0,b.Z)(),"/user/get_release_analytics?limit=").concat(a,"&id=").concat(le),{headers:{authorization:"Bearer ".concat((0,g.Z)())}});case 28:n=t.sent,R(n.data.analytics);case 30:t.next=34;break;case 32:t.prev=32,t.t0=t.catch(3);case 34:return t.prev=34,$(!0),fe(!1),t.finish(34);case 38:case"end":return t.stop()}}),t,null,[[3,32,34,38]])})));return function(e){return t.apply(this,arguments)}}(),we=function(){var t=(0,s.Z)(l().mark((function t(){var a,n,s,c,i,o,x,d,h,u,p;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=document.getElementsByName("release")[0].value,oe(a),"all"===a){t.next=41;break}return $(!1),G(!1),P(!1),fe(!0),ue(e("analytics.table.show_date.no")),se(10),t.prev=9,t.next=12,m().get("".concat((0,b.Z)(),"/user/get_release_analytics?id=").concat(a,"&limit=").concat(re),{headers:{authorization:"Bearer ".concat((0,g.Z)())}});case 12:return n=t.sent,R(n.data.analytics),t.next=16,m().get("".concat((0,b.Z)(),"/user/get_release_analytics?id=").concat(a),{headers:{authorization:"Bearer ".concat((0,g.Z)())}});case 16:n=t.sent,R(n.data.analytics),s=0,c=0,i=(0,r.Z)(n.data.analytics);try{for(i.s();!(o=i.n()).done;)x=o.value,s=x.all_streams+s,c=x.pay_streams+c}catch(l){i.e(l)}finally{i.f()}return P(s),H(c),t.next=26,m().get("".concat((0,b.Z)(),"/user/get_release_date_streams?id=").concat(a),{headers:{authorization:"Bearer ".concat((0,g.Z)())}});case 26:n=t.sent,d=[],h=(0,r.Z)(n.data.streams);try{for(h.s();!(u=h.n()).done;)p=u.value,d.push({name:p.date,"\u0412\u0441\u0435 \u043f\u0440\u043e\u0441\u043b\u0443\u0448\u0438\u0432\u0430\u043d\u0438\u044f":p.all_streams,"\u041f\u043b\u0430\u0442\u043d\u044b\u0435 \u043f\u0440\u043e\u0441\u043b\u0443\u0448\u0438\u0432\u0430\u043d\u0438\u044f":p.pay_streams})}catch(l){h.e(l)}finally{h.f()}G(d),t.next=35;break;case 33:t.prev=33,t.t0=t.catch(9);case 35:return t.prev=35,$(!0),fe(!1),t.finish(35);case 39:t.next=50;break;case 41:$(!1),G(!1),P(!1),fe(!0),be(),ve(),me(),ge(),fe(!1);case 50:case"end":return t.stop()}}),t,null,[[9,33,35,39]])})));return function(){return t.apply(this,arguments)}}(),Ze=function(){var t=(0,s.Z)(l().mark((function t(a){var n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(ue(a),$(!1),fe(!0),t.prev=3,n=null,"all"!==le){t.next=19;break}if(a!==e("analytics.table.show_date.yes")){t.next=13;break}return t.next=9,m().get("".concat((0,b.Z)(),"/user/get_date_streams?limit=").concat(re,"&orderBy=desc"),{headers:{authorization:"Bearer ".concat((0,g.Z)())}});case 9:n=t.sent,R(n.data.streams),t.next=17;break;case 13:return t.next=15,m().get("".concat((0,b.Z)(),"/user/get_analytics?limit=").concat(re),{headers:{authorization:"Bearer ".concat((0,g.Z)())}});case 15:n=t.sent,R(n.data.analytics);case 17:t.next=30;break;case 19:if(a!==e("analytics.table.show_date.yes")){t.next=26;break}return t.next=22,m().get("".concat((0,b.Z)(),"/user/get_release_date_streams?limit=").concat(re,"&id=").concat(le,"&orderBy=desc"),{headers:{authorization:"Bearer ".concat((0,g.Z)())}});case 22:n=t.sent,R(n.data.streams),t.next=30;break;case 26:return t.next=28,m().get("".concat((0,b.Z)(),"/user/get_release_analytics?limit=").concat(re,"&id=").concat(le),{headers:{authorization:"Bearer ".concat((0,g.Z)())}});case 28:n=t.sent,R(n.data.analytics);case 30:t.next=34;break;case 32:t.prev=32,t.t0=t.catch(3);case 34:return t.prev=34,$(!0),fe(!1),t.finish(34);case 38:case"end":return t.stop()}}),t,null,[[3,32,34,38]])})));return function(e){return t.apply(this,arguments)}}();return(0,j.useEffect)((function(){L||(be(),ve(),me(),ge(),fe(!1))}),[]),(0,D.jsxs)(o.xu,{children:[(0,D.jsx)(o.X6,{children:e("menu.analytics")}),(0,D.jsxs)(o.xu,{mt:"10px",children:[(0,D.jsx)(o.xu,{borderWidth:"1px",style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},borderRadius:"lg",bgColor:"white",mb:"10px",children:(0,D.jsxs)(o.xu,{m:"20px",children:[(0,D.jsx)(o.xv,{fontSize:"xl",fontWeight:"bold",children:e("analytics.filters")}),(0,D.jsx)(o.xu,{mt:"10px",children:(0,D.jsxs)(o.Kq,{direction:["column","row"],spacing:"10px",children:[(0,D.jsx)(o.xu,{w:"100%",children:(0,D.jsx)(T.ZP,{className:"basic-single",classNamePrefix:"select",isLoading:je,isSearchable:!0,defaultValue:{value:"all",label:e("analytics.filters.all")},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u0435\u043b\u0438\u0437",name:"release",options:[{value:"all",label:e("analytics.filters.all")}].concat((0,n.Z)(ee))})}),(0,D.jsx)(d.zx,{colorScheme:"teal",_focus:{boxShadow:"none!important"},_active:{boxShadow:"none!important"},w:["100%","auto"],onClick:we,isLoading:je,children:e("analytics.button.apply")})]})})]})}),(0,D.jsx)(o.xu,{borderWidth:"1px",style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},borderRadius:"lg",bgColor:"white",children:(0,D.jsx)(o.xu,{m:"20px",children:(0,D.jsxs)(o.xu,{children:[(0,D.jsx)(o.xv,{fontSize:"xl",fontWeight:"bold",children:e("analytics.streams")}),!1===M&&(0,D.jsx)(o.xu,{mt:"20px",justifyContent:"center",children:(0,D.jsx)(o.M5,{children:(0,D.jsx)(h.$,{size:"xl",color:"main"})})})||(0,D.jsx)(o.xu,{mt:"20px",children:(0,D.jsxs)(o.Kq,{direction:"row",spacing:"10px",children:[(0,D.jsxs)(u.kN,{children:[(0,D.jsx)(u.dw,{children:e("analytics.streams.all")}),(0,D.jsx)(u.Jf,{children:M})]}),(0,D.jsxs)(u.kN,{children:[(0,D.jsx)(u.dw,{children:e("analytics.streams.pay")}),(0,D.jsx)(u.Jf,{children:O})]})]})}),(0,D.jsx)(o.xu,{children:!F&&(0,D.jsx)(o.xu,{mt:"20px",justifyContent:"center",children:(0,D.jsx)(o.M5,{children:(0,D.jsx)(h.$,{size:"xl",color:"main"})})})||(0,D.jsx)(o.xu,{mt:"20px",children:0===F.length&&(0,D.jsx)(t,{})||(0,D.jsx)(_.h,{width:"100%",height:"100%",minHeight:"280px",children:(0,D.jsxs)(w.w,{width:1e3,height:300,data:F,margin:{top:5,right:30,left:20,bottom:5},children:[(0,D.jsx)(Z.q,{strokeDasharray:"3 3"}),(0,D.jsx)(k.K,{dataKey:"name"}),(0,D.jsx)(S.B,{}),(0,D.jsx)(C.u,{}),(0,D.jsx)(z.D,{}),(0,D.jsx)(B.x,{type:"monotone",dataKey:"\u0412\u0441\u0435 \u043f\u0440\u043e\u0441\u043b\u0443\u0448\u0438\u0432\u0430\u043d\u0438\u044f",stroke:"#0400ff",activeDot:{r:8}}),(0,D.jsx)(B.x,{type:"monotone",dataKey:"\u041f\u043b\u0430\u0442\u043d\u044b\u0435 \u043f\u0440\u043e\u0441\u043b\u0443\u0448\u0438\u0432\u0430\u043d\u0438\u044f",stroke:"#f00"})]})})})})]})})})]}),(0,D.jsx)(o.xu,{mt:"20px",children:(0,D.jsx)(o.xu,{children:(0,D.jsxs)(o.xu,{children:[(0,D.jsxs)(o.Kq,{direction:"row",spacing:"20px",children:[(0,D.jsxs)(o.xu,{children:[(0,D.jsx)(o.xv,{color:"gray.500",fontWeight:"bold",children:e("analytics.table.show")}),(0,D.jsxs)(p.v2,{closeOnSelect:!0,children:[(0,D.jsxs)(p.j2,{as:d.zx,borderWidth:"1px",style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},justifyContent:"center",width:"auto",minWeight:"2.5rem",height:"3rem",colorScheme:"teal",variant:"outline",color:"gray.700",borderColor:"gray.200",borderRadius:"lg",bgColor:"white",isLoading:je,children:[re," ",(0,D.jsx)(U.v4,{w:6,h:6})]}),(0,D.jsx)(p.qy,{children:(0,D.jsxs)(p.__,{defaultValue:"10",value:"".concat(re),type:"radio",children:[(0,D.jsx)(p.ii,{value:"10",onClick:function(){_e(10)},children:"10"}),(0,D.jsx)(p.ii,{value:"20",onClick:function(){_e(20)},children:"20"}),(0,D.jsx)(p.ii,{value:"30",onClick:function(){_e(30)},children:"30"}),(0,D.jsx)(p.ii,{value:"40",onClick:function(){_e(40)},children:"40"}),(0,D.jsx)(p.ii,{value:"50",onClick:function(){_e(50)},children:"50"}),(0,D.jsx)(p.ii,{value:"all",onClick:function(){_e(e("analytics.table.show.all"))},children:e("analytics.table.show.all")})]})})]})]}),(0,D.jsxs)(o.xu,{children:[(0,D.jsx)(o.xv,{color:"gray.500",fontWeight:"bold",children:e("analytics.table.show_date")}),(0,D.jsxs)(p.v2,{closeOnSelect:!0,children:[(0,D.jsxs)(p.j2,{as:d.zx,borderWidth:"1px",style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},justifyContent:"center",width:"auto",minWeight:"2.5rem",height:"3rem",colorScheme:"teal",variant:"outline",isLoading:je,color:"gray.700",borderColor:"gray.200",borderRadius:"lg",bgColor:"white",children:[he," ",(0,D.jsx)(U.v4,{w:6,h:6})]}),(0,D.jsx)(p.qy,{children:(0,D.jsxs)(p.__,{value:he,defaultValue:e("analytics.table.show_date.no"),type:"radio",children:[(0,D.jsx)(p.ii,{value:e("analytics.table.show_date.yes"),onClick:function(){Ze(e("analytics.table.show_date.yes"))},children:e("analytics.table.show_date.yes")}),(0,D.jsx)(p.ii,{value:e("analytics.table.show_date.no"),onClick:function(){Ze(e("analytics.table.show_date.no"))},children:e("analytics.table.show_date.no")})]})})]})]})]}),(0,D.jsx)(o.xu,{children:!L&&(0,D.jsx)(o.xu,{mt:"20px",justifyContent:"center",children:(0,D.jsx)(o.M5,{children:(0,D.jsx)(h.$,{size:"xl",color:"main"})})})||(0,D.jsx)(o.xu,{mt:"20px",children:0===K.length&&(0,D.jsx)(t,{})||(0,D.jsx)(y.xJ,{borderWidth:"1px",style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},borderRadius:"lg",bgColor:"white",children:(0,D.jsxs)(y.iA,{children:[(0,D.jsx)(y.hr,{children:(0,D.jsxs)(y.Tr,{children:[(0,D.jsx)(y.Th,{children:e("analytics.table.title")}),(0,D.jsx)(y.Th,{children:e("analytics.table.artist")}),(0,D.jsx)(y.Th,{children:"UPC"}),he===e("analytics.table.show_date.yes")&&(0,D.jsx)(y.Th,{children:e("analytics.table.date")}),(0,D.jsx)(y.Th,{children:(0,D.jsx)(a,{icon:(0,D.jsx)(U.Uj,{}),text:e("analytics.streams.pay"),name:e("analytics.table.pay_streams.info")})}),(0,D.jsx)(y.Th,{children:(0,D.jsx)(a,{icon:(0,D.jsx)(U.Uj,{}),text:e("analytics.streams.all"),name:e("analytics.table.all_streams.info")})})]})}),(0,D.jsx)(y.p3,{children:K.map((function(t){return(0,D.jsxs)(y.Tr,{children:[(0,D.jsx)(y.Td,{children:(0,D.jsx)(o.rU,{_hover:{color:"main",textDecoration:"none"},as:v.rU,to:"/music/".concat(t.release_id,"/view"),children:t.title})}),(0,D.jsx)(y.Td,{children:(0,D.jsx)(o.rU,{_hover:{color:"main",textDecoration:"none"},as:v.rU,to:"/music/".concat(t.release_id,"/view"),children:t.artists})}),(0,D.jsx)(y.Td,{children:(0,D.jsx)(o.rU,{_hover:{color:"main",textDecoration:"none"},as:v.rU,to:"/music/".concat(t.release_id,"/view"),children:t.upc})}),he===e("analytics.table.show_date.yes")&&(0,D.jsx)(y.Td,{children:t.date}),(0,D.jsx)(y.Td,{children:(0,D.jsx)(o.rU,{_hover:{color:"main",textDecoration:"none"},as:v.rU,to:"/music/".concat(t.release_id,"/view"),children:t.pay_streams})}),(0,D.jsx)(y.Td,{children:(0,D.jsx)(o.rU,{_hover:{color:"main",textDecoration:"none"},as:v.rU,to:"/music/".concat(t.release_id,"/view"),children:t.all_streams})})]})}))})]})})})})]})})})]})}}}]);