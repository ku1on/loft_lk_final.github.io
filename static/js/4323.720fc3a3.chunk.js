(self.webpackChunkloft=self.webpackChunkloft||[]).push([[4323],{67228:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},81506:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},34575:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},93913:function(e){function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},43269:function(e,t,r){var n=r(60379);e.exports=function(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=n(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var a=0,l=function(){};return{s:l,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}},e.exports.__esModule=!0,e.exports.default=e.exports},99842:function(e,t,r){var n=r(29754),a=r(57067),l=r(78585);e.exports=function(e){var t=a();return function(){var r,a=n(e);if(t){var o=n(this).constructor;r=Reflect.construct(a,arguments,o)}else r=a.apply(this,arguments);return l(this,r)}},e.exports.__esModule=!0,e.exports.default=e.exports},29754:function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},2205:function(e,t,r){var n=r(99489);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},57067:function(e){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},78585:function(e,t,r){var n=r(50008).default,a=r(81506);e.exports=function(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return a(e)},e.exports.__esModule=!0,e.exports.default=e.exports},99489:function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},50008:function(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},60379:function(e,t,r){var n=r(67228);e.exports=function(e,t){if(e){if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},80156:function(e,t,r){"use strict";r(47313);t.Z=r.p+"static/media/not_found.200d27f810b0b184b0ff5164f1455f07.svg"},14323:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var n=r(1413),a=r(4942),l=r(15861),o=r(29439),i=r(87757),s=r.n(i),u=r(74511),c=r(90841),d=r(67056),p=r(12520),f=r(44415),x=r(62362),h=r(47402),b=r(47313),v=r(31881),m=r.n(v),y=r(69172),g=r(2360),j=r(75627),_=r(97890),C=r(60062),Z=r(80156),S=r(42653),I=r.n(S),O=r(19469);var k=r(46417);function w(e){var t,r=(0,u.pm)(),i=e.rid,v=(0,b.useState)(),S=(0,o.Z)(v,2),w=S[0],R=S[1],B=(0,b.useState)(!1),M=(0,o.Z)(B,2),F=M[0],P=M[1],E=(0,b.useState)(!1),z=(0,o.Z)(E,2),A=z[0],N=z[1],W=(0,b.useState)([]),D=(0,o.Z)(W,2),V=(D[0],D[1]),X=(0,b.useState)(!1),L=(0,o.Z)(X,2),G=L[0],H=L[1],T=(0,b.useState)(!1),U=(0,o.Z)(T,2),Y=U[0],J=U[1],$=(0,b.useState)(!1),q=(0,o.Z)($,2),K=q[0],Q=q[1],ee=(0,b.useState)(!1),te=(0,o.Z)(ee,2),re=te[0],ne=te[1],ae=function(){var e=(0,l.Z)(s().mark((function e(){var t,r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m().get("".concat((0,y.Z)(),"/user/get_release_info?id=").concat(i),{headers:{authorization:"Bearer ".concat((0,g.Z)())}});case 2:return t=e.sent,e.next=5,m().get("".concat((0,y.Z)(),"/user/profile_info"),{headers:{authorization:"Bearer ".concat((0,g.Z)())}});case 5:r=e.sent,(n=r.data).error||H(n.user.isLabel),t.data.error?ne(!0):(R(t.data.release),1===t.data.release.premiere_for_russia&&P(!0),1===t.data.release.realtime&&N(!0),V(t.data.tracks),J(!0));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,b.useEffect)((function(){Y||ae()}),[]);var le=(0,j.cI)(),oe=le.register,ie=(le.handleSubmit,function(){var e=(0,l.Z)(s().mark((function e(t){var n,a,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Q(!0),e.prev=1,(n=new FormData).append("cover",t[0]),n.append("id",i),e.next=7,m().post("".concat((0,y.Z)(),"/user/edit_release"),n,{headers:{authorization:"Bearer ".concat((0,g.Z)())}});case 7:if((a=e.sent).data.error){l=a.data.error;try{"size"===l.type&&(l="\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 \u043e\u0431\u043b\u043e\u0436\u043a\u0438: 10\u043c\u0431")}catch(o){}r({position:"top",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!",description:"".concat(l),status:"error",duration:3e3,isClosable:!0})}else r({position:"top",title:"\u041e\u0431\u043b\u043e\u0436\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u0430!",status:"success",duration:3e3,isClosable:!0});e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),r({position:"top",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!",description:"".concat(e.t0),status:"error",duration:3e3,isClosable:!0});case 14:ae(),Q(!1);case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()),se=function(){var e=(0,l.Z)(s().mark((function e(t){var n,a,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Q(!0),e.prev=1,n=document.getElementById("main"),a=new FormData(n),e.next=6,m().post("".concat((0,y.Z)(),"/user/edit_release"),a,{headers:{authorization:"Bearer ".concat((0,g.Z)())}});case 6:(l=e.sent).data.error&&r({position:"top",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!",description:"".concat(l.data.error.message),status:"error",duration:3e3,isClosable:!0}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),r({position:"top",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!",description:"".concat(e.t0),status:"error",duration:3e3,isClosable:!0});case 13:ae(),Q(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),ue=function(){return(0,k.jsx)(c.M5,{children:(0,k.jsx)(d.$,{color:"main",size:"xl"})})},ce=e.t;return(0,k.jsxs)(c.xu,{children:[re&&(0,k.jsx)(_.Fg,{to:"/404"}),Y&&(0,k.jsxs)(c.xu,{children:[(0,k.jsx)(c.xu,(t={borderWidth:"1px",style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},borderRadius:"lg"},(0,a.Z)(t,"borderRadius","lg"),(0,a.Z)(t,"bgColor","white"),(0,a.Z)(t,"children",(0,k.jsxs)(c.xu,{m:"20px",children:[(0,k.jsx)(c.xv,{fontSize:"xl",fontWeight:"bold",children:ce("edit.release.cover")}),(0,k.jsx)(C.Z,{mt:"10px",mb:"10px",src:"".concat((0,y.Z)()).concat(w.cover),fallbackSrc:Z.Z,w:"200px",h:"200px",borderWidth:"2px",borderRadius:"lg"}),(0,k.jsx)(I(),{onFileChange:function(e){ie(e)},placeholder:ce("edit.release.upload"),clearButtonLabel:"label",multipleFiles:!1,accept:"image/*",hideClearButton:!0})]})),t)),(0,k.jsx)(c.xu,{mt:"20px",borderWidth:"1px",borderRadius:"lg",bgColor:"white",children:(0,k.jsxs)(c.xu,{m:"20px",children:[(0,k.jsx)(c.xv,{fontSize:"xl",fontWeight:"bold",children:ce("edit.release.info")}),(0,k.jsxs)(c.xv,{fontSize:"sm",children:["* - ",ce("edit.release.required")]}),(0,k.jsxs)("form",{id:"main",children:[(0,k.jsx)(p.Input,(0,n.Z)({hidden:"hidden",value:i},oe("id"))),(0,k.jsxs)(f.NI,{mt:"10px",onBlur:function(){return se()},children:[(0,k.jsxs)(f.lX,{fontWeight:"bold",htmlFor:"title",children:["* ",ce("edit.release.title")]}),(0,k.jsx)(p.Input,(0,n.Z)({id:"title",defaultValue:w.title,placeholder:ce("edit.release.title"),type:"text",isDisabled:K},oe("title")))]}),(0,k.jsxs)(f.NI,{mt:"10px",onBlur:function(){return se()},children:[(0,k.jsx)(f.lX,{fontWeight:"bold",htmlFor:"version",children:ce("edit.release.version")}),(0,k.jsx)(p.Input,(0,n.Z)({id:"version",defaultValue:w.version,type:"text",isDisabled:K},oe("version")))]}),(0,k.jsxs)(f.NI,{mt:"10px",mb:"10px",onBlur:function(){return se()},children:[(0,k.jsxs)(f.lX,{fontWeight:"bold",htmlFor:"artists",children:["* ",ce("edit.release.artists")]}),(0,k.jsx)(p.Input,(0,n.Z)({id:"artists",defaultValue:w.artists,placeholder:ce("edit.release.artists.placeholder"),type:"text",isDisabled:K},oe("artists")))]}),(0,k.jsxs)(f.NI,{onBlur:function(){return se()},as:"type",children:[(0,k.jsxs)(f.lX,{fontWeight:"bold",as:"type",children:["* ",ce("edit.release.type")]}),(0,k.jsx)(x.Ee,{defaultValue:w.type,children:(0,k.jsxs)(c.Ug,{spacing:"24px",children:[(0,k.jsx)(x.Y8,(0,n.Z)((0,n.Z)({value:"Single"},oe("type")),{},{children:"Single"})),(0,k.jsx)(x.Y8,(0,n.Z)((0,n.Z)({value:"EP"},oe("type")),{},{children:"EP"})),(0,k.jsx)(x.Y8,(0,n.Z)((0,n.Z)({value:"Album"},oe("type")),{},{children:"Album"}))]})})]}),(0,k.jsxs)(f.NI,{mt:"10px",onBlur:function(){return se()},children:[(0,k.jsxs)(f.lX,{fontWeight:"bold",htmlFor:"genre",children:["* ",ce("edit.release.genre")]}),(0,k.jsx)(O.ZP,{className:"basic-single",classNamePrefix:"select",isLoading:K,defaultValue:{value:w.genre,label:w.genre},isSearchable:!0,name:"genre",options:[{value:"Alternative",label:"Alternative"},{value:"Arabic",label:"Arabic"},{value:"Asian",label:"Asian"},{value:"Blues",label:"Blues"},{value:"Brazilian",label:"Brazilian"},{value:"Children Music",label:"Children Music"},{value:"Christian & Gospel",label:"Christian & Gospel"},{value:"Classical",label:"Classical"},{value:"Country",label:"Country"},{value:"Dance",label:"Dance"},{value:"Easy Listening",label:"Easy Listening"},{value:"Electronic",label:"Electronic"},{value:"Folk",label:"Folk"},{value:"Hip Hop/Rap",label:"Hip Hop/Rap"},{value:"Indian",label:"Indian"},{value:"Jazz",label:"Jazz"},{value:"Latin",label:"Latin"},{value:"Metal",label:"Metal"},{value:"Pop",label:"Pop"},{value:"R&B/Soul",label:"R&B/Soul"},{value:"Reggae",label:"Reggae"},{value:"Relaxation",label:"Relaxation"},{value:"Rock",label:"Rock"},{value:"Various",label:"Various"},{value:"World Music / Regional Folklore",label:"World Music / Regional Folklore"}]})]}),(0,k.jsxs)(f.NI,{mt:"10px",onBlur:function(){return se()},children:[(0,k.jsxs)(f.lX,{fontWeight:"bold",htmlFor:"date",children:["* ",ce("edit.release.date")]}),(0,k.jsx)(p.Input,(0,n.Z)({id:"date",defaultValue:w.date,placeholder:ce("edit.release.date"),type:"date",isDisabled:K},oe("date")))]}),(0,k.jsxs)(f.NI,{mt:"10px",onBlur:function(){return se()},children:[(0,k.jsx)(f.lX,{fontWeight:"bold",htmlFor:"date",children:ce("edit.release.date.preorder")}),(0,k.jsx)(p.Input,(0,n.Z)({id:"date",defaultValue:w.preorder_date,placeholder:ce("edit.release.date.preorder"),type:"date",isDisabled:K},oe("preorder_date")))]}),G&&(0,k.jsxs)(f.NI,{mt:"10px",onBlur:function(){return se()},children:[(0,k.jsxs)(f.lX,{fontWeight:"bold",htmlFor:"copyright",children:["* ",ce("edit.release.copyright")]}),(0,k.jsx)(c.xv,{color:"gray.600",fontSize:"md",children:ce("edit.release.copyright.desc")}),(0,k.jsx)(p.Input,(0,n.Z)({mt:"10px",id:"copyright",defaultValue:w.copyright,placeholder:ce("edit.release.copyright.placeholder"),type:"text",isDisabled:K},oe("copyright")))]})||null,(0,k.jsxs)(f.NI,{mt:"10px",onBlur:function(){return se()},children:[(0,k.jsx)("input",(0,n.Z)({hidden:!0,value:F},oe("premiere_for_russia"))),(0,k.jsx)(h.XZ,{mt:"10px",colorScheme:"teal",defaultChecked:F,onChange:function(e){return P(e.target.checked)},children:ce("edit.release.add.premiere_for_russia")}),(0,k.jsx)(c.xv,{mt:"5px",color:"gray.600",fontSize:"md",children:ce("edit.release.add.premiere_for_russia.desc")})]}),(0,k.jsxs)(f.NI,{mt:"10px",onBlur:function(){return se()},children:[(0,k.jsx)("input",(0,n.Z)({hidden:!0,value:A},oe("realtime"))),(0,k.jsx)(h.XZ,{mt:"10px",colorScheme:"teal",defaultChecked:A,onChange:function(e){return N(e.target.checked)},children:ce("edit.release.add.realtime")}),(0,k.jsx)(c.xv,{mt:"5px",color:"gray.600",fontSize:"md",children:ce("edit.release.add.realtime.desc")})]})]})]})})]})||(0,k.jsx)(ue,{})]})}},42653:function(e,t,r){"use strict";var n=r(43269).default,a=r(34575).default,l=r(93913).default,o=r(2205).default,i=r(99842).default,s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=r(12520),c=r(10941),d=s(r(47313)),p=function(e){o(r,e);var t=i(r);function r(e){var n;return a(this,r),(n=t.call(this,e)).inputRef=d.default.createRef(),n.reset=function(){return n.handleOnClearClick()},n.handleOnFileChange=function(e){n.setState(Object.assign(Object.assign({},n.state),{files:e.target.files})),n.clearInnerInput()},n.handleOnClearClick=function(){n.setState(Object.assign(Object.assign({},n.state),{files:null})),n.clearInnerInput()},n.handleOnInputClick=function(){var e;(null===(e=n.inputRef)||void 0===e?void 0:e.current)&&(n.inputRef.current.value="",n.inputRef.current.click())},n.render=function(){var e,t=n.props,r=t.placeholder,a=t.clearButtonLabel,l=t.hideClearButton,o=t.multipleFiles,i=t.accept,s=t.inputProps,p=t.inputGroupProps;return d.default.createElement(u.InputGroup,Object.assign({},p),d.default.createElement("input",{type:"file",ref:n.inputRef,accept:i,style:{display:"none"},multiple:o,onChange:n.handleOnFileChange,"data-testid":null!==(e=null===s||void 0===s?void 0:s.placeholder)&&void 0!==e?e:r}),d.default.createElement(u.Input,Object.assign({placeholder:r},Object.assign(Object.assign({},s),{readOnly:!0,isReadOnly:!0,value:n.state.fileName,onClick:n.handleOnInputClick}))),!l&&d.default.createElement(c.InputRightAddon,null,d.default.createElement(c.Button,{onClick:n.handleOnClearClick},null!==a&&void 0!==a?a:"Clear")))},n.state={files:null,fileName:""},n}return l(r,[{key:"componentDidUpdate",value:function(e,t){if(t.files!==this.state.files){var r=new Array;if(this.state.files){var a,l=n(this.state.files);try{for(l.s();!(a=l.n()).done;){var o=a.value;r.push(o)}}catch(i){l.e(i)}finally{l.f()}}this.setState(Object.assign(Object.assign({},this.state),{fileName:r.map((function(e){return e.name})).join(" & ")})),this.props.onFileChange(r)}}},{key:"clearInnerInput",value:function(){var e;(null===(e=this.inputRef)||void 0===e?void 0:e.current)&&(this.inputRef.current.files=null)}}]),r}(d.default.Component);p.defaultProps={clearButtonLabel:"Clear",multipleFiles:!1,accept:void 0,hideClearButton:!1,inputProps:void 0,inputGroupProps:void 0},t.default=p}}]);