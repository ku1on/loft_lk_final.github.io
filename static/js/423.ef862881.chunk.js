(self.webpackChunkloft=self.webpackChunkloft||[]).push([[423],{67228:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},22858:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},13884:function(e){e.exports=function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],s=!0,c=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);s=!0);}catch(a){c=!0,i=a}finally{try{s||null==r.return||r.return()}finally{if(c)throw i}}return o}},e.exports.__esModule=!0,e.exports.default=e.exports},80521:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},63038:function(e,t,r){var n=r(22858),i=r(13884),o=r(60379),s=r(80521);e.exports=function(e,t){return n(e)||i(e,t)||o(e,t)||s()},e.exports.__esModule=!0,e.exports.default=e.exports},60379:function(e,t,r){var n=r(67228);e.exports=function(e,t){if(e){if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},80156:function(e,t,r){"use strict";r(47313);t.Z=r.p+"static/media/not_found.200d27f810b0b184b0ff5164f1455f07.svg"},7389:function(e,t,r){"use strict";r.d(t,{Z:function(){return _}});var n=r(15861),i=r(29439),o=r(87757),s=r.n(o),c=r(38569),a=r(64153),l=r(74511),d=r(24149),x=r(16106),u=r(29596),p=r(90841),h=r(67056),f=r(31554),v=r(69172),j=r(2360),m=r(31881),b=r.n(m),g=r(47313),w=r(58585),y=r.n(w),S=r(58821),k=r(5958),Z=r(24511),C=r(46417);function _(e){var t=(0,Z.$)().t,r=e.track,o=e.isEdit,m=(0,a.qY)(),w=m.isOpen,_=m.onOpen,z=m.onClose,W=(0,g.useRef)(),R=(0,g.useState)(!1),L=(0,i.Z)(R,2),A=L[0],U=L[1],B=(0,g.useState)(!1),O=(0,i.Z)(B,2),T=O[0],E=O[1],M=(0,l.pm)(),q=(0,c.Q)({src:"".concat((0,v.Z)()).concat(r.wav),loop:!1}),I=q.isPlaying,K=q.toggle,P=function(e){return(0,C.jsx)(d.u,{borderWidth:"1px",style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},borderRadius:"lg",label:e.name,hasArrow:!0,placement:"top",children:(0,C.jsx)(x.hU,{icon:e.icon,fontSize:"20px",variant:"ghost",_active:{boxShadow:"none!important"},_focus:{boxShadow:"none!important"},onClick:e.onClick})})},Q=function(){var e=(0,n.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U(!0),e.prev=1,e.next=4,b().post("".concat((0,v.Z)(),"/user/delete_track"),{id:r.id},{headers:{authorization:"Bearer ".concat((0,j.Z)())}});case 4:(t=e.sent).data.error?M({position:"top",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!",description:"".concat(t.data.error),status:"error",duration:9e3,isClosable:!0}):E(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),M({position:"top",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!",description:"".concat(e.t0),status:"error",duration:9e3,isClosable:!0});case 11:U(!1),z();case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();console.log(e);if(!T)return(0,C.jsxs)(u.Tr,{children:[(0,C.jsx)(u.Td,{children:(0,C.jsx)(x.hU,{icon:I?(0,C.jsx)(S.wRS,{}):(0,C.jsx)(S.cuI,{}),variant:"ghost",fontSize:"20px",_hover:{color:"main"},onClick:K})}),(0,C.jsx)(u.Td,{children:r.title}),(0,C.jsx)(u.Td,{children:r.version||"\u041d/\u0410"}),(0,C.jsx)(u.Td,{children:r.artists}),(0,C.jsx)(u.Td,{children:r.author}),(0,C.jsx)(u.Td,{children:r.composer}),(0,C.jsxs)(u.Td,{children:[0===r.explicit&&t("edit.tracklist.explicit.no")||t("edit.tracklist.explicit.yes")," "]}),(0,C.jsx)(u.Td,{children:!A&&(0,C.jsxs)(p.Ug,{spacing:"5px",children:[(0,C.jsx)(P,{icon:(0,C.jsx)(k.JfT,{}),name:t("track.download"),onClick:function(){U(!0),b().get("https://api.codetabs.com/v1/proxy?quest=".concat((0,v.Z)()).concat(r.wav),{responseType:"blob"}).then((function(e){var t=r.version?" (".concat(r.version,")"):"",n="".concat(r.artists," - ").concat(r.title).concat(t,".wav");y()(e.data,n),U(!1)}))}}),o&&(0,C.jsx)(P,{icon:(0,C.jsx)(S.yvY,{}),name:t("track.delete"),onClick:_})]})||(0,C.jsx)(h.$,{color:"main"})}),(0,C.jsx)(f.aR,{isOpen:w,leastDestructiveRef:W,onClose:z,children:(0,C.jsx)(f.dh,{backdropFilter:"blur(5px)",children:(0,C.jsxs)(f._T,{children:[(0,C.jsx)(f.fY,{fontSize:"lg",fontWeight:"bold",children:t("track.delete")}),(0,C.jsxs)(f.iP,{children:[t("track.delete_1"),' "',r.title,'" ',t("release.delete_2")]}),(0,C.jsxs)(f.xo,{children:[(0,C.jsx)(x.zx,{ref:W,onClick:z,children:t("release.cancel")}),(0,C.jsx)(x.zx,{colorScheme:"red",onClick:Q,isLoading:A,ml:3,children:t("release.delete")})]})]})})})]})}},30423:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return C}});var n=r(4942),i=r(15861),o=r(29439),s=r(87757),c=r.n(s),a=r(74511),l=r(90841),d=r(67056),x=r(96413),u=r(78365),p=r(47402),h=r(24711),f=r(8710),v=r(16106),j=r(47313),m=r(31881),b=r.n(m),g=r(69172),w=r(2360),y=r(75627),S=r(97890),k=(r(60062),r(7389),r(80156)),Z=r(46417);function C(e){var t,r=(0,a.pm)(),s=e.rid,m=(0,j.useState)(),C=(0,o.Z)(m,2),_=C[0],z=C[1],W=(0,j.useState)(!1),R=(0,o.Z)(W,2),L=R[0],A=R[1],U=(0,j.useState)([]),B=(0,o.Z)(U,2),O=B[0],T=B[1],E=(0,j.useState)(!1),M=(0,o.Z)(E,2),q=M[0],I=M[1],K=(0,j.useState)(!1),P=(0,o.Z)(K,2),Q=P[0],X=P[1],D=(0,j.useState)(!1),$=(0,o.Z)(D,2),F=$[0],Y=$[1],H=(0,j.useState)([]),J=(0,o.Z)(H,2),V=J[0],G=J[1],N=(0,j.useState)(!1),ee=(0,o.Z)(N,2),te=ee[0],re=ee[1],ne=e.t,ie=function(){var e=(0,i.Z)(c().mark((function e(){var t,r,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b().get("".concat((0,g.Z)(),"/user/get_release_info?id=").concat(s),{headers:{authorization:"Bearer ".concat((0,w.Z)())}});case 2:return t=e.sent,e.next=5,b().get("".concat((0,g.Z)(),"/user/profile_info"),{headers:{authorization:"Bearer ".concat((0,w.Z)())}});case 5:r=e.sent,(n=r.data).error||A(n.user.isLabel),t.data.error?Y(!0):(z(t.data.release),T(t.data.tracks),I(!0));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,j.useEffect)((function(){q||ie(),te||function(){var e=[];_&&(_.cover||e.push(ne("edit.review.error.cover")),_.title||e.push(ne("edit.review.error.title")),_.artists||e.push(ne("edit.review.error.artists")),_.type||e.push(ne("edit.review.error.type")),_.genre||e.push(ne("edit.review.error.genre")),_.date||e.push(ne("edit.review.error.date")),L&&!_.copyright&&e.push(ne("edit.review.error.label")),0===O.length&&e.push(ne("edit.review.error.track")),G(e),re(!0))}()}));var oe=(0,y.cI)(),se=(oe.register,oe.handleSubmit,(0,S.s0)()),ce=function(){var t=(0,i.Z)(c().mark((function t(){var n;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return X(!0),t.prev=1,t.next=4,b().post("".concat((0,g.Z)(),"/user/send_release"),{id:e.rid},{headers:{authorization:"Bearer ".concat((0,w.Z)())}});case 4:(n=t.sent).data.error?r({position:"top",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!",description:n.data.error,status:"error",duration:3e3,isClosable:!0}):(se("/music/moderation"),r({position:"top",title:"\u0420\u0435\u043b\u0438\u0437 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d \u043d\u0430 \u043c\u043e\u0434\u0435\u0440\u0430\u0446\u0438\u044e!",status:"success",duration:3e3,isClosable:!0})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),r({position:"top",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!",description:t.t0,status:"error",duration:3e3,isClosable:!0});case 11:ie(),X(!1);case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}(),ae=function(){return(0,Z.jsx)(l.M5,{children:(0,Z.jsx)(d.$,{color:"main",size:"xl"})})},le=function(){var t=(0,i.Z)(c().mark((function t(){var n;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return X(!0),t.prev=1,t.next=4,b().post("".concat((0,g.Z)(),"/user/edit_release"),{id:e.rid,comment:document.getElementById("comment").value},{headers:{authorization:"Bearer ".concat((0,w.Z)())}});case 4:(n=t.sent).data.error&&r({position:"top",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!",description:n.data.error,status:"error",duration:3e3,isClosable:!0}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),r({position:"top",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!",description:t.t0,status:"error",duration:3e3,isClosable:!0});case 11:ie(),X(!1);case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}();return(0,Z.jsxs)(l.xu,{children:[F&&(0,Z.jsx)(S.Fg,{to:"/404"}),q&&(0,Z.jsxs)(l.xu,{children:[(0,Z.jsx)(l.X6,{mb:"20px",fontSize:"2xl",fontWeight:"bold",children:ne("edit.tab.review")}),0!==V.length&&(0,Z.jsx)(x.bZ,{mb:"10px",status:"error",variant:"left-accent",bgColor:"white",style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},children:(0,Z.jsxs)(l.Kq,{direction:"column",spacing:"10px",paddingLeft:2,children:[(0,Z.jsx)(x.Cd,{children:ne("edit.review.errors")}),(0,Z.jsx)(x.X,{children:(0,Z.jsx)(l.QI,{children:V.map((function(e){return(0,Z.jsx)(l.HC,{children:e})}))})})]})}),(0,Z.jsx)(l.xu,{maxW:"3xl",mt:"20px",borderWidth:"1px",style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},borderRadius:"lg",bgColor:"white",children:(0,Z.jsxs)(l.xu,{m:"20px",children:[(0,Z.jsx)(l.xu,{mt:"20px",children:(0,Z.jsxs)(l.xu,{m:"20px",children:[(0,Z.jsx)(l.xv,{fontSize:"xl",fontWeight:"bold",children:ne("edit.release.info")}),(0,Z.jsxs)(l.Kq,{mt:"10px",spacing:"20px",direction:"row",children:[(0,Z.jsx)(l.xu,{children:(0,Z.jsx)(l.oM,{w:"120px",h:"120px",children:(0,Z.jsx)(u.Ee,(t={src:"".concat((0,g.Z)()).concat(_.cover,"&w=100&h=100"),style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},borderRadius:"lg",borderWidth:"1px",fallbackSrc:k.Z,draggable:!1},(0,n.Z)(t,"style",{overflow:"hidden",position:"absolute",inset:"0px",display:"flex",WebkitBoxPack:"center",justifyContent:"center",WebkitBoxAlign:"center",alignItems:"center",width:"100%",height:"100%"}),(0,n.Z)(t,"borderWidth","2px"),(0,n.Z)(t,"style",{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"}),t))})}),(0,Z.jsxs)(l.Kq,{direction:"column",spacing:"20px",children:[(0,Z.jsxs)(l.xu,{children:[(0,Z.jsx)(l.xv,{fontWeight:"bold",children:_.title||"-"}),(0,Z.jsx)(l.xv,{children:_.artists||"-"})]}),(0,Z.jsx)(l.xu,{children:(0,Z.jsxs)(l.Kq,{direction:["column","row"],spacing:"20px",children:[(0,Z.jsxs)(l.xu,{children:[(0,Z.jsx)(l.xv,{fontSize:"sm",children:ne("edit.release.type")}),(0,Z.jsx)(l.xv,{children:_.type||"-"})]}),(0,Z.jsxs)(l.xu,{children:[(0,Z.jsx)(l.xv,{fontSize:"sm",children:"UPC"}),(0,Z.jsx)(l.xv,{children:_.upc||"-"})]})]})})]})]}),(0,Z.jsx)(l.xu,{mt:"10px",children:(0,Z.jsxs)(l.Kq,{direction:["column","row"],spacing:"20px",children:[(0,Z.jsxs)(l.xu,{children:[(0,Z.jsx)(l.xv,{fontSize:"sm",fontWeight:"bold",children:ne("edit.release.version")}),(0,Z.jsx)(l.xv,{children:_.version||"-"})]}),(0,Z.jsxs)(l.xu,{children:[(0,Z.jsx)(l.xv,{fontSize:"sm",fontWeight:"bold",children:ne("edit.release.genre")}),(0,Z.jsx)(l.xv,{children:_.genre||"-"})]}),(0,Z.jsxs)(l.xu,{children:[(0,Z.jsx)(l.xv,{fontSize:"sm",fontWeight:"bold",children:ne("edit.release.date")}),(0,Z.jsx)(l.xv,{children:_.date||"-"})]}),(0,Z.jsxs)(l.xu,{children:[(0,Z.jsx)(l.xv,{fontSize:"sm",fontWeight:"bold",children:ne("edit.release.date.preorder")}),(0,Z.jsx)(l.xv,{children:_.preorder_date||"-"})]})]})})]})}),(0,Z.jsx)(l.xu,{mt:"20px",children:(0,Z.jsxs)(l.xu,{m:"20px",children:[(0,Z.jsx)(l.xv,{fontSize:"xl",fontWeight:"bold",children:ne("view.tracklist.additional")}),(0,Z.jsx)(l.xu,{mt:"10px",children:(0,Z.jsxs)(l.Kq,{direction:"column",spacing:"10px",children:[(0,Z.jsxs)(l.xu,{children:[(0,Z.jsx)(l.xv,{fontSize:"sm",fontWeight:"bold",children:ne("edit.release.copyright")}),(0,Z.jsx)(l.xv,{children:_.copyright||"-"})]}),(0,Z.jsx)(p.XZ,{defaultChecked:!!_.premiere_for_russia,isReadOnly:!0,colorScheme:"teal",children:ne("edit.release.add.premiere_for_russia")}),(0,Z.jsx)(p.XZ,{defaultChecked:!!_.realtime,isReadOnly:!0,colorScheme:"teal",children:ne("edit.release.add.realtime")})]})})]})}),(0,Z.jsx)(l.xu,{mt:"20px",children:(0,Z.jsxs)(l.xu,{m:"20px",children:[(0,Z.jsx)(l.xv,{fontSize:"xl",fontWeight:"bold",children:ne("edit.tab.tracklist")}),(0,Z.jsx)(l.xu,{mt:"10px",w:"full",children:(0,Z.jsx)(h.UQ,{w:"full",allowMultiple:!0,children:O.map((function(e,t){return(0,Z.jsxs)(h.Qd,{children:[(0,Z.jsxs)(h.KF,{children:[(0,Z.jsx)(l.xu,{flex:"1",textAlign:"left",children:(0,Z.jsxs)(l.xv,{fontSize:"md",children:[t+1,". ",e.title," ",e.explicit&&(0,Z.jsx)(l.Ct,{children:"e"})||""," ",e.version&&(0,Z.jsx)("span",{style:{color:"#4B5563"},children:e.version})]})}),(0,Z.jsx)(h.XE,{})]}),(0,Z.jsxs)(h.Hk,{pb:4,children:[(0,Z.jsxs)(l.xu,{children:[(0,Z.jsx)(l.xu,{paddingBottom:"10px",children:(0,Z.jsxs)(l.xv,{fontSize:"md",fontWeight:"bold",children:[e.artists," - ",e.title||"-"," ",e.version&&(0,Z.jsxs)("span",{children:["(",e.version,")"]})]})}),(0,Z.jsx)(l.xv,{fontSize:"lg",fontWeight:"bold",children:ne("view.tracklist.persons")}),(0,Z.jsxs)(l.xu,{mt:"20px",children:[(0,Z.jsxs)(l.xv,{fontSize:"md",children:[e.artists," ",(0,Z.jsx)(l.Ct,{children:ne("analytics.table.artist")})]}),(0,Z.jsxs)(l.xv,{mt:"10px",fontSize:"md",children:[e.author," ",(0,Z.jsx)(l.Ct,{children:ne("view.tracklist.author")})]}),(0,Z.jsxs)(l.xv,{mt:"10px",fontSize:"md",children:[e.composer," ",(0,Z.jsx)(l.Ct,{children:ne("view.tracklist.composer")})]})]})]}),(0,Z.jsxs)(l.xu,{mt:"20px",children:[(0,Z.jsx)(l.xv,{fontSize:"lg",fontWeight:"bold",children:ne("view.tracklist.additional")}),(0,Z.jsx)(l.xu,{mt:"20px",children:(0,Z.jsx)(p.XZ,{defaultChecked:!!e.explicit,isReadOnly:!0,colorScheme:"teal",children:"Explicit Content"})})]})]})]})}))})})]})}),(0,Z.jsx)(l.xu,{mt:"20px",children:(0,Z.jsxs)(l.xu,{m:"20px",children:[(0,Z.jsx)(l.xv,{fontSize:"xl",fontWeight:"bold",children:ne("edit.review.comment")}),(0,Z.jsx)(l.xv,{fontSize:"sm",color:"gray.500",children:ne("edit.review.comment.desc")}),(0,Z.jsx)(f.g,{onBlur:function(){return le()},isDisabled:Q,defaultValue:_.comment,mt:"10px",id:"comment",placeholder:ne("edit.review.comment.placeholder")})]})})]})}),(0,Z.jsx)(v.zx,{mt:"10px",colorScheme:"teal",_focus:{boxShadow:"none!important"},_active:{boxShadow:"none!important"},isLoading:Q,onClick:ce,isDisabled:0!=V.length,children:ne("edit.review.submit")})]})||(0,Z.jsx)(ae,{})]})}},58585:function(e){e.exports=function(e,t,r,n){var i=new Blob("undefined"!==typeof n?[n,e]:[e],{type:r||"application/octet-stream"});if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(i,t);else{var o=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(i):window.webkitURL.createObjectURL(i),s=document.createElement("a");s.style.display="none",s.href=o,s.setAttribute("download",t),"undefined"===typeof s.download&&s.setAttribute("target","_blank"),document.body.appendChild(s),s.click(),setTimeout((function(){document.body.removeChild(s),window.URL.revokeObjectURL(o)}),200)}}},38569:function(e,t,r){"use strict";t.Q=void 0;var n=r(68252);Object.defineProperty(t,"Q",{enumerable:!0,get:function(){return n.useAudio}})},68252:function(e,t,r){"use strict";var n=r(63038).default;Object.defineProperty(t,"__esModule",{value:!0}),t.useAudio=void 0;var i=r(47313);t.useAudio=function(e){var t=(0,i.useMemo)((function(){return new Audio(e.src)}),[e.src]),r=(0,i.useState)(!1),o=n(r,2),s=o[0],c=o[1],a=function(){t.play().then((function(){return c(!0)})).catch((function(t){var r;c(!1),console.log(t),null===(r=e.onError)||void 0===r||r.call(e,t)}))},l=function(){c(!1),t.pause()};return(0,i.useEffect)((function(){return t.loop=e.loop||!1,t.volume=e.volume||1,t.muted=e.muted||!1,t.onloadeddata=function(t){var r;return null===(r=e.onLoadedData)||void 0===r?void 0:r.call(e,t)},t.addEventListener("ended",(function(r){var n;null===(n=e.onEnded)||void 0===n||n.call(e,r),e.loop?t.play():c(!1)})),function(){!e.loop&&t.removeEventListener("ended",(function(){return c(!1)}))}}),[t,e]),{isPlaying:s,play:a,pause:l,toggle:function(){return s?l():a()}}}}}]);