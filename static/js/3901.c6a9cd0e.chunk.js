"use strict";(self.webpackChunkloft=self.webpackChunkloft||[]).push([[3901],{80156:function(e,r,t){t(47313);r.Z=t.p+"static/media/not_found.200d27f810b0b184b0ff5164f1455f07.svg"},23901:function(e,r,t){t.d(r,{Z:function(){return R}});var n=t(4942),i=t(15861),s=t(29439),l=t(87757),c=t.n(l),a=t(64153),o=t(74511),d=t(24149),x=t(16106),h=t(90841),u=t(26535),p=t(31554),j=t(67056),f=t(29596),m=t(80156),g=t(95930),v=t(58821),b=t(63733),w=t(47313),k=t(97890),S=t(29466),y=t(31881),C=t.n(y),z=t(69172),Z=t(2360),_=t(22539),T=t(24511),q=t(70816),A=t.n(q),K=t(28831),Y=t(46417);function R(e){var r=(0,T.$)().t,t="user";e.isAdmin&&(t="admin");var l=(0,k.s0)(),y=e.release,q="";try{q=y.cover}catch(ke){}var R=(0,a.qY)(),H=R.isOpen,L=R.onOpen,B=R.onClose,U=w.useRef(),W=w.useState(0),M=(0,s.Z)(W,2),O=M[0],I=M[1],F=w.useState(0),D=(0,s.Z)(F,2),P=D[0],$=D[1],E=w.useState(null),N=(0,s.Z)(E,2),J=N[0],Q=N[1],X=w.useState(null),G=(0,s.Z)(X,2),V=G[0],ee=G[1],re=w.useState(null),te=(0,s.Z)(re,2),ne=te[0],ie=te[1],se=w.useState(!1),le=(0,s.Z)(se,2),ce=le[0],ae=le[1],oe=w.useState(!1),de=(0,s.Z)(oe,2),xe=de[0],he=de[1],ue=function(e,r,t){ee("delete"),I(e),$(r),Q(t),L()},pe=(0,o.pm)(),je=function(){var e=(0,i.Z)(c().mark((function e(){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ae(!0),ee("platforms"),L(),e.prev=3,e.next=6,C().get("".concat((0,z.Z)(),"/user/get_release_platforms?id=").concat(y.id),{headers:{authorization:"Bearer ".concat((0,Z.Z)())}});case 6:r=e.sent,ie(r.data.platforms),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(3);case 12:return e.prev=12,ae(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[3,10,12,15]])})));return function(){return e.apply(this,arguments)}}(),fe=function(){var r=(0,i.Z)(c().mark((function r(){var n;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return ae(!0),r.prev=1,r.next=4,C().post("".concat((0,z.Z)(),"/").concat(t,"/delete_").concat(J),{id:O},{headers:{authorization:"Bearer ".concat((0,Z.Z)())}});case 4:(n=r.sent).data.error?pe({position:"top",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!",description:"".concat(n.data.error),status:"error",duration:9e3,isClosable:!0}):(he(!0),"draft"===J?(l("/music/drafts/reload"),pe({position:"top",title:"\u0427\u0435\u0440\u043d\u043e\u0432\u0438\u043a \u0443\u0434\u0430\u043b\u0435\u043d",status:"success",duration:3e3,isClosable:!0})):e.isAdmin?(l("/admin/music/deleting/reload"),pe({position:"top",title:"\u0420\u0435\u043b\u0438\u0437 \u0443\u0434\u0430\u043b\u0435\u043d",status:"success",duration:3e3,isClosable:!0})):(l("/music/deleting"),pe({position:"top",title:"\u0420\u0435\u043b\u0438\u0437 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435",status:"success",duration:3e3,isClosable:!0}))),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),pe({position:"top",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!",description:"".concat(r.t0),status:"error",duration:9e3,isClosable:!0});case 11:ae(!1),B();case 13:case"end":return r.stop()}}),r,null,[[1,8]])})));return function(){return r.apply(this,arguments)}}(),me=function(e){return(0,Y.jsx)(d.u,{borderWidth:"1px",style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},borderRadius:"lg",label:e.name,hasArrow:!0,placement:"top",children:(0,Y.jsx)(x.hU,{icon:e.icon,fontSize:"20px",variant:"ghost",_hover:{color:"main"},onClick:e.onClick})})},ge=function(e){return(0,Y.jsx)(d.u,{borderWidth:"1px",style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},borderRadius:"lg",label:e.name,hasArrow:!0,placement:"top",children:(0,Y.jsx)(x.hU,{icon:e.icon,fontSize:"20px",variant:"ghost",_hover:{color:"main"},as:S.rU,to:e.to})})},ve="";e.isAdmin&&(ve="/admin");var be=function(){var t;return(0,Y.jsx)(h.xu,(t={style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},borderRadius:"lg",mb:"10px",borderWidth:"1px"},(0,n.Z)(t,"style",{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"}),(0,n.Z)(t,"borderRadius","lg"),(0,n.Z)(t,"bgColor","white"),(0,n.Z)(t,"children",(0,Y.jsxs)(h.xu,{m:"20px",children:[(0,Y.jsxs)(h.Ug,{spacing:"20px",children:[(0,Y.jsx)(h.xu,{children:(0,Y.jsx)(h.oM,{w:"120px",h:"120px",style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},borderRadius:"lg",overflow:"hidden",children:(null===y||void 0===y?void 0:y.cover)&&(0,Y.jsx)(K.LazyLoadImage,{height:"100%",src:"https://image.loftlabel.ru/resize?image=".concat((0,z.Z)()).concat(q||"null","&w=120&h=120"),width:"100%",draggable:!1})||(0,Y.jsx)(K.LazyLoadImage,{height:"100%",src:m.Z,width:"100%",draggable:!1})})}),(0,Y.jsxs)(h.xu,{w:"full",children:[(0,Y.jsxs)(h.Kq,{direction:["column","row"],style:{WebkitBoxPack:"justify",justifyContent:"space-between"},w:"full",children:[(0,Y.jsxs)(h.xu,{children:[(0,Y.jsx)(h.xv,{children:y.title||"\u041d/\u0410"}),(0,Y.jsx)(h.xv,{children:y.artists||"\u041d/\u0410"})]}),(0,Y.jsxs)(h.Ug,{spacing:"5px",children:[(0,Y.jsx)(ge,{name:r("release.info"),icon:(0,Y.jsx)(b.$1_,{}),to:"".concat(ve,"/music/").concat(y.id,"/view")}),"draft"===y.status&&(0,Y.jsx)(ge,{name:r("release.edit"),icon:(0,Y.jsx)(v.HlX,{}),to:"/music/".concat(y.id,"/edit")}),"ok"===y.status&&(0,Y.jsx)(me,{name:r("release.platforms"),icon:(0,Y.jsx)(_.zD9,{}),onClick:je}),!e.isAdmin&&(0,Y.jsx)(h.xu,{children:"draft"===y.status&&(0,Y.jsx)(me,{name:r("release.delete_draft"),icon:(0,Y.jsx)(v.yvY,{}),onClick:function(){ue(y.id,y.title,"draft")}})||"ok"===y.status&&(0,Y.jsx)(Y.Fragment,{children:!e.isSub&&(0,Y.jsx)(me,{name:r("release.delete_release"),icon:(0,Y.jsx)(v.yvY,{}),onClick:function(){ue(y.id,y.title,"release")}})})}),e.isAdmin&&(0,Y.jsx)(h.xu,{children:"deleting"===y.status&&(0,Y.jsx)(me,{name:r("release.delete_release"),icon:(0,Y.jsx)(v.yvY,{}),onClick:function(){ue(y.id,y.title,"release")}})})]})]}),(0,Y.jsx)(h.Kq,{direction:"column",spacing:"10px",children:(0,Y.jsxs)(h.Kq,{direction:["column","row"],mt:"10px",spacing:"20px",children:[(0,Y.jsxs)(h.xu,{children:[(0,Y.jsx)(h.xv,{color:"gray.500",fontSize:"sm",children:"UPC"}),(0,Y.jsx)(h.xv,{children:y.upc||"\u041d/\u0410"})]}),(0,Y.jsxs)(h.xu,{children:[(0,Y.jsx)(h.xv,{color:"gray.500",fontSize:"sm",children:r("release.copyright")}),(0,Y.jsx)(h.xv,{children:y.copyright||"\u041d/\u0410"})]})]})})]})]}),(0,Y.jsxs)(h.Kq,{direction:["column","row"],mt:"10px",spacing:"20px",children:[(0,Y.jsxs)(h.xu,{children:[(0,Y.jsx)(h.xv,{color:"gray.500",fontSize:"sm",children:r("release.created")}),(0,Y.jsx)(h.xv,{children:A()("".concat(y.created_at)).format("YYYY-MM-DD")||"\u041d/\u0410"})]}),(0,Y.jsxs)(h.xu,{children:[(0,Y.jsx)(h.xv,{color:"gray.500",fontSize:"sm",children:r("release.date")}),(0,Y.jsx)(h.xv,{children:y.date||"\u041d/\u0410"})]}),(0,Y.jsxs)(h.xu,{children:[(0,Y.jsx)(h.xv,{color:"gray.500",fontSize:"sm",children:r("edit.release.date.preorder")}),(0,Y.jsx)(h.xv,{children:y.preorder_date||"\u041d/\u0410"})]}),(0,Y.jsxs)(h.xu,{children:[(0,Y.jsx)(h.xv,{color:"gray.500",fontSize:"sm",children:r("release.genre")}),(0,Y.jsx)(h.xv,{children:y.genre||"\u041d/\u0410"})]})]}),(0,Y.jsx)(g.Z,{isAdmin:e.isAdmin,rid:y.id})]})),t))},we=function(){var t;return(0,Y.jsx)(h.xu,(t={borderRadius:"lg",mb:"10px",borderWidth:"1px",style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"}},(0,n.Z)(t,"borderRadius","lg"),(0,n.Z)(t,"bgColor","white"),(0,n.Z)(t,"children",(0,Y.jsx)(h.Kq,{direcion:"column",w:"full",h:"full",padding:6,children:(0,Y.jsxs)(h.Kq,{direction:"column",spacing:"15px",children:[(0,Y.jsxs)(h.Kq,{direction:"row",w:"full",alignItems:"center",spacing:"15px",children:[(0,Y.jsx)(h.xu,{alignSelf:"start",paddingTop:1,children:(0,Y.jsx)(h.oM,{w:12,h:12,position:"relative",children:(null===y||void 0===y?void 0:y.cover)&&(0,Y.jsx)(K.LazyLoadImage,{height:"100%",src:"https://image.loftlabel.ru/resize?image=".concat((0,z.Z)()).concat(q||"null","&w=120&h=120"),width:"100%",draggable:!1})||(0,Y.jsx)(K.LazyLoadImage,{height:"100%",src:m.Z,width:"100%",draggable:!1})})}),(0,Y.jsx)(h.Kq,{direction:"column",w:"full",alignItems:"start",children:(0,Y.jsx)(h.Kq,{direction:"row",justifyContent:"space-between",w:"full",children:(0,Y.jsx)(h.Kq,{direction:"column",children:(0,Y.jsxs)(h.xv,{fontSize:"0.875rem",lineHeight:"1.25rem",maxW:"12rem",overflow:"hidden",children:[y.title||"\u041d/\u0410",(0,Y.jsx)("br",{}),y.artists||"\u041d/\u0410"]})})})}),(0,Y.jsxs)(u.v2,{children:[(0,Y.jsx)(u.j2,{as:x.zx,variant:"unstyled",_active:{color:"main"},children:(0,Y.jsx)(h.M5,{children:(0,Y.jsx)("svg",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",viewBox:"0 0 1024 1024",width:"24px",height:"24px","aria-hidden":"true",focusable:"false",xmlns:"http://www.w3.org/2000/svg",children:(0,Y.jsx)("path",{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 0 0 9.3-35.2l-.9-2.6a443.74 443.74 0 0 0-79.7-137.9l-1.8-2.1a32.12 32.12 0 0 0-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 0 0-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 0 0-25.8 25.7l-15.8 85.4a351.86 351.86 0 0 0-99 57.4l-81.9-29.1a32 32 0 0 0-35.1 9.5l-1.8 2.1a446.02 446.02 0 0 0-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 0 0-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0 0 35.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0 0 25.8 25.7l2.7.5a449.4 449.4 0 0 0 159 0l2.7-.5a32.05 32.05 0 0 0 25.8-25.7l15.7-85a350 350 0 0 0 99.7-57.6l81.3 28.9a32 32 0 0 0 35.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 0 1-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 0 1-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 0 1 512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 0 1 400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 0 1 624 502c0 29.9-11.7 58-32.8 79.2z"})})})}),(0,Y.jsxs)(u.qy,{children:[(0,Y.jsx)(u.sN,{as:S.rU,to:"".concat(ve,"/music/").concat(y.id,"/view"),children:r("release.info")}),"ok"===y.status&&(0,Y.jsx)(u.sN,{onClick:je,children:r("release.platforms")}),!e.isAdmin&&(0,Y.jsx)(Y.Fragment,{children:"draft"===y.status&&(0,Y.jsx)(u.sN,{onClick:function(){ue(y.id,y.title,"draft")},children:r("release.delete_draft")})||"ok"===y.status&&(0,Y.jsx)(Y.Fragment,{children:!e.isSub&&(0,Y.jsx)(u.sN,{onClick:function(){ue(y.id,y.title,"release")},children:r("release.delete_release")})})}),e.isAdmin&&(0,Y.jsx)(Y.Fragment,{children:"deleting"===y.status&&(0,Y.jsx)(u.sN,{onClick:function(){ue(y.id,y.title,"release")},children:r("release.delete_release")})})]})]})]}),(0,Y.jsx)(h.xu,{w:"full"}),(0,Y.jsxs)(h.Kq,{direction:"row",justifyContent:"space-between",w:"full",children:[(0,Y.jsx)(h.xv,{fontSize:"0.75rem",lineHeight:"1rem",color:"#4B5563",children:"UPC"}),(0,Y.jsx)(h.xv,{fontSize:"0.875rem",lineHeight:"1.25rem",children:y.upc||"\u041d/\u0410"})]}),(0,Y.jsxs)(h.Kq,{direction:"row",justifyContent:"space-between",w:"full",children:[(0,Y.jsx)(h.xv,{fontSize:"0.75rem",lineHeight:"1rem",color:"#4B5563",children:r("release.copyright")}),(0,Y.jsx)(h.xv,{fontSize:"0.875rem",lineHeight:"1.25rem",children:y.copyright||"\u041d/\u0410"})]}),(0,Y.jsxs)(h.Kq,{direction:"row",justifyContent:"space-between",w:"full",children:[(0,Y.jsx)(h.xv,{fontSize:"0.75rem",lineHeight:"1rem",color:"#4B5563",children:r("release.created")}),(0,Y.jsx)(h.xv,{fontSize:"0.875rem",lineHeight:"1.25rem",children:A()("".concat(y.created_at)).format("YYYY-MM-DD")||"\u041d/\u0410"})]}),(0,Y.jsxs)(h.Kq,{direction:"row",justifyContent:"space-between",w:"full",children:[(0,Y.jsx)(h.xv,{fontSize:"0.75rem",lineHeight:"1rem",color:"#4B5563",children:r("release.date")}),(0,Y.jsx)(h.xv,{fontSize:"0.875rem",lineHeight:"1.25rem",children:y.date||"\u041d/\u0410"})]}),(0,Y.jsxs)(h.Kq,{direction:"row",justifyContent:"space-between",w:"full",children:[(0,Y.jsx)(h.xv,{fontSize:"0.75rem",lineHeight:"1rem",color:"#4B5563",children:r("edit.release.date.preorder")}),(0,Y.jsx)(h.xv,{fontSize:"0.875rem",lineHeight:"1.25rem",children:y.preorder_date||"\u041d/\u0410"})]}),(0,Y.jsxs)(h.Kq,{direction:"row",justifyContent:"space-between",w:"full",children:[(0,Y.jsx)(h.xv,{fontSize:"0.75rem",lineHeight:"1rem",color:"#4B5563",children:r("release.genre")}),(0,Y.jsx)(h.xv,{fontSize:"0.875rem",lineHeight:"1.25rem",children:y.genre||"\u041d/\u0410"})]}),(0,Y.jsx)(g.Z,{isAdmin:e.isAdmin,rid:y.id})]})})),t))};return(0,Y.jsx)(Y.Fragment,{children:!xe&&(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(h.xu,{display:{base:"none",md:"block"},children:(0,Y.jsx)(be,{})}),(0,Y.jsx)(h.xu,{display:{base:"block",md:"none"},children:(0,Y.jsx)(we,{})}),(0,Y.jsx)(p.aR,{isOpen:H,leastDestructiveRef:U,onClose:B,children:(0,Y.jsx)(p.dh,{backdropFilter:"blur(5px)",children:(0,Y.jsxs)(p._T,{children:[(0,Y.jsxs)(p.fY,{fontSize:"lg",fontWeight:"bold",children:["platforms"===V&&(0,Y.jsx)(h.xu,{children:r("release.list_platforms")})||(0,Y.jsxs)(h.xu,{children:[r("release.delete")," ","draft"===J&&r("release.draft")||r("release.release")]}),"platforms"===V&&(0,Y.jsx)(p.lq,{})]}),(0,Y.jsx)(p.iP,{children:"platforms"===V&&(0,Y.jsx)(h.xu,{mb:"20px",children:!ne&&(0,Y.jsx)(h.M5,{children:(0,Y.jsx)(j.$,{size:"xl",color:"main"})})||(0,Y.jsx)(h.xu,{children:0===ne.length&&(0,Y.jsx)(h.xv,{fontWeight:"bold",color:"gray.600",children:"\u041f\u043b\u0430\u0442\u0444\u043e\u0440\u043c \u0441\u0435\u0439\u0447\u0430\u0441 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e."})||(0,Y.jsx)(f.xJ,{w:"full",children:(0,Y.jsxs)(f.iA,{variant:"simple",children:[(0,Y.jsx)(f.hr,{w:"full",children:(0,Y.jsxs)(f.Tr,{children:[(0,Y.jsx)(f.Th,{children:r("release.platform")}),(0,Y.jsx)(f.Th,{})]})}),(0,Y.jsx)(f.p3,{children:ne.map((function(e){return(0,Y.jsxs)(f.Tr,{_hover:{bgColor:"gray.200"},cursor:"pointer",onClick:function(){!function(e){var r=document.createElement("a");r.target="_blank",r.href=e,r.click()}(e.link)},children:[(0,Y.jsx)(f.Td,{children:e.name}),(0,Y.jsx)(f.Td,{textAlign:"end",children:(0,Y.jsx)(h.Kq,{direction:"row",children:(0,Y.jsx)(h.xu,{marginLeft:"auto",children:(0,Y.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:(0,Y.jsx)("path",{fill:"currentColor",d:"M8.91 20.67c-.19 0-.38-.07-.53-.22a.754.754 0 010-1.06l6.52-6.52c.48-.48.48-1.26 0-1.74L8.38 4.61a.754.754 0 010-1.06c.29-.29.77-.29 1.06 0l6.52 6.52c.51.51.8 1.2.8 1.93s-.28 1.42-.8 1.93l-6.52 6.52c-.15.14-.34.22-.53.22z"})})})})})]})}))})]})})})})||(0,Y.jsxs)(h.xu,{children:[r("release.delete_1")," ","draft"===J&&r("release.draft")||r("release.release")," ",'"',P||"\u041d/\u0410",'" ',r("release.delete_2")]})}),"delete"===V&&(0,Y.jsxs)(p.xo,{children:[(0,Y.jsx)(x.zx,{ref:U,onClick:B,children:r("release.cancel")}),(0,Y.jsx)(x.zx,{colorScheme:"red",onClick:fe,isLoading:ce,ml:3,children:r("release.delete")})]})]})})})]})})}},7389:function(e,r,t){t.d(r,{Z:function(){return Z}});var n=t(15861),i=t(29439),s=t(87757),l=t.n(s),c=t(38569),a=t(64153),o=t(74511),d=t(24149),x=t(16106),h=t(29596),u=t(90841),p=t(67056),j=t(31554),f=t(69172),m=t(2360),g=t(31881),v=t.n(g),b=t(47313),w=t(58585),k=t.n(w),S=t(58821),y=t(5958),C=t(24511),z=t(46417);function Z(e){var r=(0,C.$)().t,t=e.track,s=e.isEdit,g=(0,a.qY)(),w=g.isOpen,Z=g.onOpen,_=g.onClose,T=(0,b.useRef)(),q=(0,b.useState)(!1),A=(0,i.Z)(q,2),K=A[0],Y=A[1],R=(0,b.useState)(!1),H=(0,i.Z)(R,2),L=H[0],B=H[1],U=(0,o.pm)(),W=(0,c.Q)({src:"".concat((0,f.Z)()).concat(t.wav),loop:!1}),M=W.isPlaying,O=W.toggle,I=function(e){return(0,z.jsx)(d.u,{borderWidth:"1px",style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},borderRadius:"lg",label:e.name,hasArrow:!0,placement:"top",children:(0,z.jsx)(x.hU,{icon:e.icon,fontSize:"20px",variant:"ghost",_active:{boxShadow:"none!important"},_focus:{boxShadow:"none!important"},onClick:e.onClick})})},F=function(){var e=(0,n.Z)(l().mark((function e(){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y(!0),e.prev=1,e.next=4,v().post("".concat((0,f.Z)(),"/user/delete_track"),{id:t.id},{headers:{authorization:"Bearer ".concat((0,m.Z)())}});case 4:(r=e.sent).data.error?U({position:"top",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!",description:"".concat(r.data.error),status:"error",duration:9e3,isClosable:!0}):B(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),U({position:"top",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!",description:"".concat(e.t0),status:"error",duration:9e3,isClosable:!0});case 11:Y(!1),_();case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();console.log(e);if(!L)return(0,z.jsxs)(h.Tr,{children:[(0,z.jsx)(h.Td,{children:(0,z.jsx)(x.hU,{icon:M?(0,z.jsx)(S.wRS,{}):(0,z.jsx)(S.cuI,{}),variant:"ghost",fontSize:"20px",_hover:{color:"main"},onClick:O})}),(0,z.jsx)(h.Td,{children:t.title}),(0,z.jsx)(h.Td,{children:t.version||"\u041d/\u0410"}),(0,z.jsx)(h.Td,{children:t.artists}),(0,z.jsx)(h.Td,{children:t.author}),(0,z.jsx)(h.Td,{children:t.composer}),(0,z.jsxs)(h.Td,{children:[0===t.explicit&&r("edit.tracklist.explicit.no")||r("edit.tracklist.explicit.yes")," "]}),(0,z.jsx)(h.Td,{children:!K&&(0,z.jsxs)(u.Ug,{spacing:"5px",children:[(0,z.jsx)(I,{icon:(0,z.jsx)(y.JfT,{}),name:r("track.download"),onClick:function(){Y(!0),v().get("https://api.codetabs.com/v1/proxy?quest=".concat((0,f.Z)()).concat(t.wav),{responseType:"blob"}).then((function(e){var r=t.version?" (".concat(t.version,")"):"",n="".concat(t.artists," - ").concat(t.title).concat(r,".wav");k()(e.data,n),Y(!1)}))}}),s&&(0,z.jsx)(I,{icon:(0,z.jsx)(S.yvY,{}),name:r("track.delete"),onClick:Z})]})||(0,z.jsx)(p.$,{color:"main"})}),(0,z.jsx)(j.aR,{isOpen:w,leastDestructiveRef:T,onClose:_,children:(0,z.jsx)(j.dh,{backdropFilter:"blur(5px)",children:(0,z.jsxs)(j._T,{children:[(0,z.jsx)(j.fY,{fontSize:"lg",fontWeight:"bold",children:r("track.delete")}),(0,z.jsxs)(j.iP,{children:[r("track.delete_1"),' "',t.title,'" ',r("release.delete_2")]}),(0,z.jsxs)(j.xo,{children:[(0,z.jsx)(x.zx,{ref:T,onClick:_,children:r("release.cancel")}),(0,z.jsx)(x.zx,{colorScheme:"red",onClick:F,isLoading:K,ml:3,children:r("release.delete")})]})]})})})]})}},95930:function(e,r,t){t.d(r,{Z:function(){return S}});var n=t(15861),i=t(29439),s=t(87757),l=t.n(s),c=t(7389),a=t(74511),o=t(90841),d=(t(67056),t(64153)),x=t(97418),h=t(4086),u=t(29596),p=t(47313),j=t(31881),f=t.n(j),m=t(69172),g=t(2360),v=t(97890),b=t(58821),w=t(24511),k=t(46417);function S(e){var r=(0,w.$)().t,t="user";e.isAdmin&&(t="admin");(0,a.pm)();var s=e.rid,j=(0,p.useState)(),S=(0,i.Z)(j,2),y=(S[0],S[1]),C=(0,p.useState)([]),z=(0,i.Z)(C,2),Z=z[0],_=z[1],T=(0,p.useState)(!1),q=(0,i.Z)(T,2),A=q[0],K=q[1],Y=(0,p.useState)(!1),R=(0,i.Z)(Y,2),H=(R[0],R[1],(0,p.useState)(!1)),L=(0,i.Z)(H,2),B=L[0],U=L[1],W=function(){var e=(0,n.Z)(l().mark((function e(){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f().get("".concat((0,m.Z)(),"/").concat(t,"/get_release_info?id=").concat(s),{headers:{authorization:"Bearer ".concat((0,g.Z)())}});case 2:(r=e.sent).data.error?U(!0):(y(r.data.release),_(r.data.tracks),K(!0));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,p.useEffect)((function(){A||W()}),[]);var M=(0,d.qY)(),O=M.isOpen,I=M.onToggle;return(0,k.jsxs)(o.xu,{children:[(0,k.jsxs)(o.Ug,{style:{textDecoration:"none"},_focus:{boxShadow:"none"},_hover:{color:"gray.600","text-decoration":"none"},color:"black",fontWeight:"bold",lineHeight:"1.5rem",mt:"15px",as:o.rU,onClick:I,children:[(0,k.jsx)(o.xv,{style:{marginTop:"0px",marginInline:"0px",marginBottom:"0px"},children:r("tracklist.title")}),(0,k.jsx)(x.JO,{ml:"0.75rem",as:O&&b.IAR||b.fmn,fontSize:"17px"})]}),B&&(0,k.jsx)(v.Fg,{to:"/404"}),A&&(0,k.jsx)(h.UO,{in:O,unmountOnExit:!0,animateOpacity:!0,children:(0,k.jsx)(o.W2,{maxW:"full",alignContent:"center",alignItems:"center",children:(0,k.jsx)(u.xJ,{children:(0,k.jsxs)(u.iA,{children:[(0,k.jsx)(u.hr,{children:(0,k.jsxs)(u.Tr,{children:[(0,k.jsx)(u.Th,{}),(0,k.jsx)(u.Th,{children:r("tracklist.name")}),(0,k.jsx)(u.Th,{children:r("tracklist.version")}),(0,k.jsx)(u.Th,{children:r("tracklist.artists")}),(0,k.jsx)(u.Th,{children:r("tracklist.author")}),(0,k.jsx)(u.Th,{children:r("tracklist.composer")}),(0,k.jsx)(u.Th,{children:"Explicit"}),(0,k.jsx)(u.Th,{})]})}),(0,k.jsx)(u.p3,{children:Z.map((function(e){return(0,k.jsx)(c.Z,{track:e})}))})]})})})})]})}}}]);