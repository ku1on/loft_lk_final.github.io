"use strict";(self.webpackChunkloft=self.webpackChunkloft||[]).push([[2714],{62714:function(e,t,r){r.r(t),r.d(t,{default:function(){return Z}});var n=r(37762),s=r(15861),a=r(29439),i=r(87757),o=r.n(i),l=r(74511),c=r(90841),u=r(67056),d=r(44415),x=r(16106),p=r(12520),h=r(31881),m=r.n(h),f=r(69172),b=r(2360),j=r(47313),v=r(75627),g=r(19469),w=r(97890),S=r(46417);function Z(){var e=(0,v.cI)(),t=(e.register,e.handleSubmit,j.useState(null)),r=(0,a.Z)(t,2),i=r[0],h=r[1],Z=j.useState(!1),y=(0,a.Z)(Z,2),C=y[0],k=y[1],I=j.useState(!1),N=(0,a.Z)(I,2),W=N[0],_=N[1],z=j.useState(null),q=(0,a.Z)(z,2),F=q[0],X=q[1],B=(0,l.pm)(),P=(0,w.s0)(),D=function(){var e=(0,s.Z)(o().mark((function e(){var t,r,s,a,i,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m().get("".concat((0,f.Z)(),"/admin/get_users"),{headers:{authorization:"Bearer ".concat((0,b.Z)())}});case 3:if((t=e.sent).data.error)B({position:"top",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!",description:t.data.error,status:"error",duration:3e3,isClosable:!0});else{r=t.data.users,s=[],a=(0,n.Z)(r);try{for(a.s();!(i=a.n()).done;)l=i.value,s.push({value:l.id,label:l.username})}catch(o){a.e(o)}finally{a.f()}h(s),k(!0)}e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),B({position:"top",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!",description:"".concat(e.t0),status:"error",duration:3e3,isClosable:!0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();j.useEffect((function(){i||D()}),[]);var E=function(){var e=document.getElementsByName("user")[0].value;e&&(k(!1),X(e),k(!0))},L=function(){var e=(0,s.Z)(o().mark((function e(){var t,r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),e.prev=1,t=document.getElementById("main"),r=new FormData(t),e.next=6,m().post("".concat((0,f.Z)(),"/admin/new_report"),r,{headers:{authorization:"Bearer ".concat((0,b.Z)())}});case 6:(n=e.sent).data.error?B({position:"top",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!",description:"".concat(n.data.error.message),status:"error",duration:3e3,isClosable:!0}):(B({position:"top",title:"\u041e\u0442\u0447\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u043d!",status:"success",duration:3e3,isClosable:!0}),P("/admin/finance")),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),B({position:"top",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!",description:"".concat(e.t0),status:"error",duration:3e3,isClosable:!0});case 13:_(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return(0,S.jsxs)(c.xu,{children:[(0,S.jsx)(c.X6,{size:"2xl",children:"\u0424\u0438\u043d\u0430\u043d\u0441\u044b"}),!C&&(0,S.jsx)(c.M5,{children:(0,S.jsx)(u.$,{color:"main",size:"xl"})})||(0,S.jsx)(c.xu,{maxW:"3xl",mt:"20px",borderWidth:"1px",style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},borderRadius:"lg",bgColor:"white",children:(0,S.jsxs)(c.xu,{m:"40px",children:[(0,S.jsx)(c.xv,{fontSize:"xl",fontWeight:"bold",mb:"20px",children:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0444\u0438\u043d\u0430\u043d\u0441\u043e\u0432\u043e\u0433\u043e \u043e\u0442\u0447\u0435\u0442\u0430"}),!F&&(0,S.jsx)(c.xu,{mt:"20px",children:(0,S.jsxs)("form",{id:"getUser",children:[(0,S.jsxs)(d.NI,{mt:"10px",children:[(0,S.jsx)(d.lX,{fontWeight:"bold",htmlFor:"user",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f, \u043a\u043e\u0442\u043e\u0440\u043e\u043c\u0443 \u0445\u043e\u0442\u0438\u0442\u0435 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0447\u0435\u0442"}),(0,S.jsx)(g.ZP,{className:"basic-single",classNamePrefix:"select",isLoading:W,isSearchable:!0,placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",name:"user",options:i,onChange:function(){E()}})]}),(0,S.jsx)(x.zx,{w:"100%",mt:"20px",colorScheme:"teal",_focus:{boxShadow:"none!important"},_active:{boxShadow:"none!important"},onClick:E,isLoading:W,children:"\u0414\u0430\u043b\u0435\u0435"})]})})||(0,S.jsx)(c.xu,{mt:"20px",children:(0,S.jsxs)("form",{id:"main",children:[(0,S.jsx)(p.Input,{id:"user_id",type:"integer",required:!0,hidden:!0,value:F,name:"user_id"}),(0,S.jsxs)(c.MI,{columns:[1,2],spacing:"15px",children:[(0,S.jsxs)(d.NI,{children:[(0,S.jsx)(d.lX,{fontWeight:"bold",htmlFor:"name",children:"* \u041a\u0432\u0430\u0440\u0442\u0430\u043b"}),(0,S.jsx)(g.ZP,{placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0432\u0430\u0440\u0442\u0430\u043b",isDisabled:W,required:!0,options:[{value:"1",label:"1 \u043a\u0432\u0430\u0440\u0442\u0430\u043b"},{value:"2",label:"2 \u043a\u0432\u0430\u0440\u0442\u0430\u043b"},{value:"3",label:"3 \u043a\u0432\u0430\u0440\u0442\u0430\u043b"},{value:"4",label:"4 \u043a\u0432\u0430\u0440\u0442\u0430\u043b"}],name:"quarter"})]}),(0,S.jsxs)(d.NI,{children:[(0,S.jsx)(d.lX,{fontWeight:"bold",htmlFor:"name",children:"* \u0413\u043e\u0434"}),(0,S.jsx)(g.ZP,{placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u0434",isDisabled:W,required:!0,options:[{value:"2024",label:"2024"},{value:"2025",label:"2025"}],name:"year"})]}),(0,S.jsxs)(d.NI,{children:[(0,S.jsx)(d.lX,{fontWeight:"bold",htmlFor:"sum",children:"* \u0421\u0443\u043c\u043c\u0430"}),(0,S.jsx)(p.Input,{id:"sum",type:"text",required:"required",name:"sum"})]}),(0,S.jsxs)(d.NI,{children:[(0,S.jsx)(d.lX,{fontWeight:"bold",htmlFor:"sum",children:"* \u041e\u0442\u0447\u0435\u0442 (.csv)"}),(0,S.jsx)("input",{type:"file",name:"file",placeholder:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u043e\u0442\u0447\u0435\u0442"})]})]}),(0,S.jsx)(x.zx,{w:"100%",mt:"20px",colorScheme:"teal",_focus:{boxShadow:"none!important"},_active:{boxShadow:"none!important"},onClick:L,isLoading:W,children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})]})})]})})]})}}}]);