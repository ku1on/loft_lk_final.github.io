"use strict";(self.webpackChunkloft=self.webpackChunkloft||[]).push([[9732],{9732:function(e,t,r){r.r(t),r.d(t,{default:function(){return j}});var n=r(1413),a=r(15861),c=r(29439),s=r(87757),u=r.n(s),o=r(90841),i=r(44415),l=r(12520),x=r(67056),p=r(47313),h=r(31881),f=r.n(h),d=r(69172),m=r(2360),v=r(23901),b=r(75627),Z=r(24511),g=r(46417);function j(){var e=(0,Z.$)().t,t=(0,p.useState)([]),r=(0,c.Z)(t,2),s=r[0],h=r[1],j=(0,p.useState)(!1),k=(0,c.Z)(j,2),w=k[0],S=k[1],y=(0,p.useState)(!1),q=(0,c.Z)(y,2),z=q[0],B=q[1],C=(0,p.useState)(0),I=(0,c.Z)(C,2),W=I[0],_=I[1],E=(0,p.useState)(!1),$=(0,c.Z)(E,2),A=($[0],$[1]),K=(0,p.useState)({isSubkabinet:!0}),M=(0,c.Z)(K,2),N=M[0],R=M[1],U=function(){var e=(0,a.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f().get("".concat((0,d.Z)(),"/user/profile_info"),{headers:{authorization:"Bearer ".concat((0,m.Z)())}});case 2:t=e.sent,R(t.data.user);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=(0,a.Z)(u().mark((function e(t){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f().get("".concat((0,d.Z)(),"/user/get_releases?type=ok&limit=").concat(t),{headers:{authorization:"Bearer ".concat((0,m.Z)())}});case 2:r=e.sent,h(r.data.releases),S(!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=(0,a.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f().get("".concat((0,d.Z)(),"/user/get_releases?type=ok"),{headers:{authorization:"Bearer ".concat((0,m.Z)())}});case 2:t=e.sent,_(t.data.total),S(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,p.useEffect)((function(){w||(U(),X(5),D())}),[]);var F=(0,b.cI)(),G=F.register,H=F.handleSubmit,J=function(){var e=(0,a.Z)(u().mark((function e(t){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S(!1),A(!0),e.prev=2,""!==t.q){e.next=9;break}X(5),D(),B(!1),e.next=15;break;case 9:return e.next=11,f().get("".concat((0,d.Z)(),"/user/search?type=ok&q=").concat(t.q),{headers:{authorization:"Bearer ".concat((0,m.Z)())}});case 11:r=e.sent,B(!0),_(r.data.total),h(r.data.releases);case 15:e.next=19;break;case 17:e.prev=17,e.t0=e.catch(2);case 19:return e.prev=19,S(!0),A(!1),e.finish(19);case 23:case"end":return e.stop()}}),e,null,[[2,17,19,23]])})));return function(t){return e.apply(this,arguments)}}();return(0,g.jsxs)(o.xu,{children:[(0,g.jsx)(o.X6,{size:"2xl",children:e("menu.releases")}),(0,g.jsx)(o.xu,{mt:"20px",children:(0,g.jsx)(o.xu,{borderWidth:"1px",style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},borderRadius:"lg",maxW:"lg",bgColor:"white",children:(0,g.jsx)(o.xu,{m:"20px",children:(0,g.jsx)("form",{onSubmit:H(J),children:(0,g.jsx)(o.Kq,{direction:["column","row"],spacing:"10px",children:(0,g.jsx)(i.NI,{onChange:function(){J({q:document.getElementById("q").value})},children:(0,g.jsx)(l.Input,(0,n.Z)({id:"q",placeholder:e("catalog.search")},G("q")))})})})})})}),!w&&(0,g.jsx)(o.M5,{children:(0,g.jsx)(x.$,{color:"main",size:"xl"})})||(0,g.jsxs)(o.xu,{mt:"20px",maxW:"full",children:[(0,g.jsxs)(o.xv,{fontSize:"xl",mb:"20px",children:[e("catalog.total"),": ",W]}),s.map((function(e){return(0,g.jsx)(v.Z,{release:e,isSub:N.isSubkabinet})})),W>5&&(0,g.jsx)(o.xu,{children:!z&&(0,g.jsx)(o.xu,{children:(0,g.jsx)(o.rU,{fontWeight:"bold",_hover:{color:"main"},onClick:function(){B(!0),X("")},children:e("catalog.showAll")})})})]})]})}}}]);