"use strict";(self.webpackChunkloft=self.webpackChunkloft||[]).push([[1285],{71285:function(e,r,s){s.r(r);var n=s(1413),t=s(15861),a=s(29439),i=s(87757),c=s.n(i),o=s(47313),u=s(74511),l=s(90841),d=s(67056),p=s(12520),h=s(44415),x=s(8710),m=s(16106),b=s(31881),g=s.n(b),f=s(69172),j=s(2360),v=s(24511),y=s(97890),I=s(75627),w=s(46417);r.default=function(){var e=(0,v.$)().t,r=(0,u.pm)(),s=(0,y.s0)(),i=(0,y.UO)().userId,b=(0,I.cI)(),Z=b.register,q=b.handleSubmit,S=b.formState.errors,k=b.setValue,W=o.useState(!1),z=(0,a.Z)(W,2),C=z[0],F=z[1],X=o.useState(!0),D=(0,a.Z)(X,2),T=D[0],E=D[1],J=o.useState(null),N=(0,a.Z)(J,2),L=N[0],R=N[1],B=o.useState(null),K=(0,a.Z)(B,2),$=(K[0],K[1]);o.useEffect((function(){var e=function(){var e=(0,t.Z)(c().mark((function e(){var r,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g().get("".concat((0,f.Z)(),"/user/profile_info"),{headers:{authorization:"Bearer ".concat((0,j.Z)())}});case 2:r=e.sent,s=r.data,E(s.user.isLabel);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r=function(){var e=(0,t.Z)(c().mark((function e(){var r,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g().get("".concat((0,f.Z)(),"/user/get_user?id=").concat(i),{headers:{authorization:"Bearer ".concat((0,j.Z)())}});case 3:r=e.sent,n=r.data,R(n.user),$(n.copyrights),k("copyrights",n.copyrights),k("name",n.user.name),k("email",n.user.email),k("username",n.user.username),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),s("/404");case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();e(),r()}),[i]);var _=function(){return(0,w.jsx)(l.W2,{mt:"20px",maxW:"lg",style:{top:"50%"},alignItems:"center",spacing:{base:4},py:{base:20,md:36},children:(0,w.jsx)(l.M5,{children:(0,w.jsx)(d.$,{color:"main",size:"xl"})})})},A=function(){var e=(0,t.Z)(c().mark((function e(n){var t,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F(!0),e.prev=1,""===n.copyrights.trim()&&(n.copyrights="EITHER.DIGITAL"),""===n.password.trim()&&(n.password=null),e.next=6,g().post("".concat((0,f.Z)(),"/user/edit_user"),n,{headers:{authorization:"Bearer ".concat((0,j.Z)())}});case 6:t=e.sent,(a=t.data).error?r({position:"top",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430",description:"".concat(a.error),status:"error",duration:3e3,isClosable:!0}):(r({position:"top",title:"\u0414\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b",status:"success",duration:3e3,isClosable:!0}),s("/sub-accounts")),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),r({position:"top",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430",description:"".concat(e.t0),status:"error",duration:3e3,isClosable:!0});case 14:return e.prev=14,F(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(r){return e.apply(this,arguments)}}();return(0,w.jsx)(l.xu,{children:!L&&(0,w.jsx)(_,{})||(0,w.jsxs)(l.Kq,{direction:"column",spacing:"20px",children:[(0,w.jsx)(l.X6,{children:e("subaccounts.edit")}),(0,w.jsxs)("form",{onSubmit:q(A),children:[(0,w.jsx)(p.Input,(0,n.Z)({value:i,hidden:!0},Z("id"))),(0,w.jsxs)(l.Kq,{direction:"column",spacing:["20px","30px"],maxW:"3xl",children:[(0,w.jsxs)(l.xu,{borderWidth:"1px",style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},borderRadius:"lg",bgColor:"white",padding:6,children:[(0,w.jsx)(l.X6,{size:"md",children:e("subaccounts.create.info")}),(0,w.jsxs)(l.MI,{paddingTop:5,columns:[1,2],spacing:"10px",children:[(0,w.jsxs)(h.NI,{isInvalid:!!S.name,children:[(0,w.jsx)(h.lX,{fontWeight:"bold",children:e("subaccounts.create.info.name")}),(0,w.jsx)(p.Input,(0,n.Z)({isDisabled:C,placeholder:e("subaccounts.create.info.name.placeholder")},Z("name",{required:!0}))),S.name&&(0,w.jsx)(h.J1,{children:"required"===S.name.type&&(0,w.jsx)(w.Fragment,{children:e("subaccounts.create.required")})||(0,w.jsx)(w.Fragment,{children:S.name.message})})]}),(0,w.jsxs)(h.NI,{isInvalid:!!S.email,children:[(0,w.jsx)(h.lX,{fontWeight:"bold",children:e("subaccounts.create.info.email")}),(0,w.jsx)(p.Input,(0,n.Z)({isDisabled:C,placeholder:e("subaccounts.create.info.email.placeholder")},Z("email",{required:!0,pattern:/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i}))),S.email&&(0,w.jsx)(h.J1,{children:"required"===S.email.type&&(0,w.jsx)(w.Fragment,{children:e("subaccounts.create.required")})||(0,w.jsx)(w.Fragment,{children:e("subaccounts.create.incorrect")})})]}),(0,w.jsxs)(h.NI,{isInvalid:!!S.username,children:[(0,w.jsx)(h.lX,{fontWeight:"bold",children:e("subaccounts.create.info.login")}),(0,w.jsx)(p.Input,(0,n.Z)({isDisabled:C,placeholder:e("subaccounts.create.info.login.placeholder")},Z("username",{required:!0}))),S.username&&(0,w.jsx)(h.J1,{children:"required"===S.username.type&&(0,w.jsx)(w.Fragment,{children:e("subaccounts.create.required")})||(0,w.jsx)(w.Fragment,{children:S.username.message})})]}),(0,w.jsxs)(h.NI,{isInvalid:!!S.username,children:[(0,w.jsx)(h.lX,{fontWeight:"bold",children:e("subaccounts.create.info.password")}),(0,w.jsx)(p.Input,(0,n.Z)({isDisabled:C,placeholder:e("subaccounts.create.info.password.placeholder")},Z("password"))),S.password&&(0,w.jsx)(h.J1,{children:"required"===S.password.type&&(0,w.jsx)(w.Fragment,{children:e("subaccounts.create.required")})||(0,w.jsx)(w.Fragment,{children:S.password.message})})]})]})]}),(0,w.jsxs)(l.xu,{borderWidth:"1px",style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},borderRadius:"lg",bgColor:"white",padding:6,children:[(0,w.jsx)(l.X6,{size:"md",children:e("subaccounts.create.copyrights")}),(0,w.jsxs)(h.NI,{paddingTop:5,isInvalid:!!S.copyrights,children:[(0,w.jsx)(h.lX,{color:"gray.700",fontSize:"0.875rem",children:e("subaccounts.create.copyrights.info")}),(0,w.jsx)(x.g,(0,n.Z)({value:T?null:"EITHER.DIGTAL",isDisabled:!T||C,placeholder:e("subaccounts.create.copyrights.placeholder")},Z("copyrights"))),S.copyrights&&(0,w.jsx)(h.J1,{children:S.name.message})]})]}),(0,w.jsxs)(l.Kq,{direction:"row",justifyContent:"space-between",children:[(0,w.jsx)(l.xu,{}),(0,w.jsx)(m.zx,{isLoading:C,colorScheme:"teal",type:"submit",children:e("subaccounts.edit.save")})]})]})]})]})})}}}]);