"use strict";(self.webpackChunkloft=self.webpackChunkloft||[]).push([[522],{80522:function(e,t,r){r.r(t),r.d(t,{default:function(){return k}});var o=r(1413),s=r(15861),a=r(29439),n=r(87757),i=r.n(n),l=r(47313),c=r(31881),u=r.n(c),d=r(69172),p=r(2360),h=r(97890),x=r(74511),f=r(90841),m=r(67056),b=r(44415),j=r(12520),g=r(16106),v=r(75627),w=r(24511),Z=r(46417);function k(){var e=(0,l.useState)(null),t=(0,a.Z)(e,2),r=t[0],n=t[1],c=(0,l.useState)(!1),k=(0,a.Z)(c,2),C=k[0],y=k[1],I=(0,l.useState)(!1),S=(0,a.Z)(I,2),z=S[0],B=S[1],X=(0,w.$)().t,F=(0,x.pm)(),N=(0,v.cI)(),W=N.register,_=N.handleSubmit,A=(0,h.s0)(),E=function(){var e=(0,s.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u().get("".concat((0,d.Z)(),"/user/profile_info"),{headers:{authorization:"Bearer ".concat((0,p.Z)())}});case 3:(t=e.sent).data.error?F({position:"top",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!",description:t.data.error,status:"error",duration:3e3,isClosable:!0}):(n(t.data.user),B(!0)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),F({position:"top",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!",description:"".concat(e.t0),status:"error",duration:3e3,isClosable:!0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){r||E()}),[]);var M=function(){var e=(0,s.Z)(i().mark((function e(t){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.prev=1,""===t.password&&delete t.password,e.next=5,u().post("".concat((0,d.Z)(),"/user/edit_profile"),t,{headers:{authorization:"Bearer ".concat((0,p.Z)())}});case 5:(r=e.sent).data.error?F({position:"top",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!",description:r.data.error,status:"error",duration:3e3,isClosable:!0}):(F({position:"top",title:"\u0414\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b",status:"success",duration:3e3,isClosable:!0}),A("/account")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),F({position:"top",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!",description:e.t0.message,status:"error",duration:3e3,isClosable:!0});case 12:E(),y(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return(0,Z.jsxs)(f.xu,{p:"8",bg:"white",color:"black",maxW:"700px",mx:"auto",borderRadius:"md",boxShadow:"xl",children:[(0,Z.jsx)(f.X6,{as:"h1",size:"lg",mb:"6",textAlign:"center",fontWeight:"semibold",children:X("account.title")}),z?r&&(0,Z.jsxs)(f.xu,{children:[(0,Z.jsx)(f.xv,{fontSize:"lg",fontWeight:"medium",mb:"4",children:X("account.info")}),(0,Z.jsxs)("form",{onSubmit:_(M),children:[(0,Z.jsxs)(b.NI,{mb:"4",children:[(0,Z.jsx)(b.lX,{htmlFor:"name",children:X("account.name")}),(0,Z.jsx)(j.Input,(0,o.Z)((0,o.Z)({id:"name",type:"text",defaultValue:r.name},W("name")),{},{borderColor:"gray.400",focusBorderColor:"black"}))]}),(0,Z.jsxs)(f.MI,{columns:2,spacing:"4",children:[(0,Z.jsxs)(b.NI,{children:[(0,Z.jsx)(b.lX,{htmlFor:"email",children:"Email"}),(0,Z.jsx)(j.Input,(0,o.Z)((0,o.Z)({id:"email",type:"email",defaultValue:r.email},W("email")),{},{borderColor:"gray.400",focusBorderColor:"black"}))]}),(0,Z.jsxs)(b.NI,{children:[(0,Z.jsx)(b.lX,{htmlFor:"password",children:X("login.password")}),(0,Z.jsx)(j.Input,(0,o.Z)((0,o.Z)({id:"password",type:"password"},W("password")),{},{borderColor:"gray.400",focusBorderColor:"black"}))]})]}),(0,Z.jsx)(g.zx,{mt:"6",w:"full",type:"submit",isLoading:C,colorScheme:"blackAlpha",variant:"outline",_hover:{bg:"black",color:"white"},children:X("button.save")})]})]}):(0,Z.jsx)(f.M5,{children:(0,Z.jsx)(m.$,{color:"gray",size:"xl"})})]})}}}]);