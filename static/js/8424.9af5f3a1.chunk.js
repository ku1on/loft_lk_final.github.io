(self.webpackChunkloft=self.webpackChunkloft||[]).push([[8424],{84602:function(e,n,t){"use strict";t.d(n,{Z:function(){return Z}});var r=t(4942),o=t(15861),a=t(29439),i=t(87757),c=t.n(i),s=t(24149),l=t(16106),x=t(90841),d=t(67056),u=t(31881),p=t.n(u),h=t(69172),f=t(2360),b=t(5958),g=t(47313),j=t(58585),m=t.n(j),w=t(24511),v=t(46417);function Z(e){var n,t=(0,w.$)().t,i=(0,g.useState)(!1),u=(0,a.Z)(i,2),j=u[0],Z=u[1],y=(0,g.useState)("unknown"),S=(0,a.Z)(y,2),q=S[0],C=S[1],k=e.report,R=e.isAdmin,L=function(){var e=(0,o.Z)(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p().get("".concat((0,h.Z)(),"/admin/convert_id_to_user?id=").concat(k.user_id),{headers:{authorization:"Bearer ".concat((0,f.Z)())}});case 2:(n=e.sent).data.error||C(n.data.user.username);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(e){return(0,v.jsx)(s.u,{borderWidth:"1px",style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},borderRadius:"lg",label:e.name,hasArrow:!0,placement:"top",children:(0,v.jsx)(l.hU,{icon:e.icon,fontSize:"20px",variant:"ghost",_active:{boxShadow:"none!important"},_focus:{boxShadow:"none!important"},onClick:e.onClick})})};(0,g.useEffect)((function(){R&&L()}),[]);return(0,v.jsx)(x.xu,(n={mb:"20px",borderWidth:"1px",style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},borderRadius:"lg"},(0,r.Z)(n,"style",{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"}),(0,r.Z)(n,"borderRadius","lg"),(0,r.Z)(n,"bgColor","white"),(0,r.Z)(n,"children",(0,v.jsx)(x.xu,{m:"20px",children:(0,v.jsxs)(x.Kq,{style:{WebkitBoxPack:"justify",justifyContent:"space-between"},direction:["column","row"],children:[(0,v.jsx)(x.M5,{children:(0,v.jsxs)(x.xv,{fontSize:"lg",fontWeight:"bold",children:[k.quarter," ",t("finance.quarter")," ",k.year," ",t("finance.year")]})}),(0,v.jsxs)(x.Kq,{direction:"row",spacing:"10px",children:[(0,v.jsx)(x.M5,{children:(0,v.jsxs)(x.Kq,{direction:"column",children:[(0,v.jsxs)(x.xv,{fontSize:"lg",fontWeight:"bold",children:[t("report.total"),": ",k.sum," \u20bd"]}),R&&(0,v.jsxs)(x.xv,{fontSize:"sm",children:["\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c: ",q]})]})}),(0,v.jsx)(x.Kq,{direction:["column","row"],spacing:"5px",children:(0,v.jsx)(x.M5,{children:!j&&(0,v.jsx)(z,{icon:(0,v.jsx)(b.JfT,{}),name:t("report.button.download"),onClick:function(){Z(!0),p().get("https://api.codetabs.com/v1/proxy?quest=".concat((0,h.Z)()).concat(k.file),{responseType:"blob"}).then((function(e){var n="".concat(k.quarter," \u043a\u0432\u0430\u0440\u0442\u0430\u043b ").concat(k.year," \u0433\u043e\u0434\u0430.csv");m()(e.data,n),Z(!1)}))}})||(0,v.jsx)(d.$,{color:"main"})})})]})]})})),n))}},58424:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return S}});var r=t(1413),o=t(15861),a=t(29439),i=t(4942),c=t(87757),s=t.n(c),l=t(90841),x=t(74511),d=(t(24149),t(16106)),u=t(44415),p=t(49056),h=t(67056),f=t(31881),b=t.n(f),g=t(69172),j=t(2360),m=t(47313),w=t(75627),v=t(84602),Z=t(24511),y=t(46417);function S(){var e,n=(0,Z.$)().t,t=function(){var e;return(0,y.jsx)(l.xu,(e={borderWidth:"1px",alignItems:"center",textAlign:"center",alignContent:"center",style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},borderRadius:"lg"},(0,i.Z)(e,"style",{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"}),(0,i.Z)(e,"borderRadius","lg"),(0,i.Z)(e,"bgColor","white"),(0,i.Z)(e,"children",(0,y.jsx)(l.xu,{m:"20px",children:(0,y.jsxs)(l.Kq,{alignItems:"center",direction:"column",justifyContent:"center",paddingTop:"1.5rem",paddingBottom:"1.5rem",color:"gray.500",children:[(0,y.jsxs)("svg",{spacing:"2",xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",children:[(0,y.jsx)("path",{d:"M12 13.3c-.13 0-.26-.03-.38-.1L2.79 8.09a.752.752 0 1 1 .76-1.3L12 11.68l8.4-4.86a.76.76 0 0 1 1.03.27c.21.36.08.82-.27 1.03l-8.77 5.08a.94.94 0 0 1-.39.1Z",fill:"currentColor"}),(0,y.jsx)("path",{d:"M12 22.36c-.41 0-.75-.34-.75-.75v-9.07c0-.41.34-.75.75-.75s.75.34.75.75v9.07c0 .41-.34.75-.75.75Z",fill:"currentColor"}),(0,y.jsx)("path",{d:"M12 22.75c-.88 0-1.75-.19-2.44-.57l-5.34-2.97c-1.45-.8-2.58-2.73-2.58-4.39V9.17c0-1.66 1.13-3.58 2.58-4.39l5.34-2.96c1.37-.76 3.51-.76 4.88 0l5.34 2.97c1.45.8 2.58 2.73 2.58 4.39v5.65c0 1.66-1.13 3.58-2.58 4.39l-5.34 2.96c-.69.38-1.56.57-2.44.57Zm0-20c-.63 0-1.25.13-1.71.38L4.95 6.1c-.96.53-1.81 1.97-1.81 3.07v5.65c0 1.1.85 2.54 1.81 3.08l5.34 2.97c.91.51 2.51.51 3.42 0l5.34-2.97c.96-.54 1.81-1.97 1.81-3.08V9.17c0-1.1-.85-2.54-1.81-3.08l-5.34-2.97c-.46-.24-1.08-.37-1.71-.37Z",fill:"currentColor"})]}),(0,y.jsx)(l.xv,{fontSize:"lg",fontWeight:"bold",children:n("notfound.data")})]})})),e))},c=m.useState(!1),f=(0,a.Z)(c,2),S=f[0],q=f[1],C=m.useState(!1),k=(0,a.Z)(C,2),R=k[0],L=k[1],z=m.useState(null),U=(0,a.Z)(z,2),W=U[0],B=U[1],_=m.useState(!1),I=(0,a.Z)(_,2),M=I[0],K=I[1],A=m.useState(!1),O=(0,a.Z)(A,2),T=O[0],$=O[1],E=(0,w.cI)(),J=E.register,P=E.handleSubmit,D=(0,x.pm)(),N=function(){var e=(0,o.Z)(s().mark((function e(t){var r,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(K(!1),$(!0),r=!1,e.prev=3,t.year||(q(n("finance.year.placeholder")),r=!0),t.quarter||(L(n("finance.quarter.placeholder")),r=!0),r){e.next=11;break}return e.next=9,b().get("".concat((0,g.Z)(),"/user/find_report?year=").concat(t.year,"&quarter=").concat(t.quarter),{headers:{authorization:"Bearer ".concat((0,j.Z)())}});case 9:(o=e.sent).data.error?D({position:"top",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!",description:"".concat(o.data.error),status:"error",duration:3e3,isClosable:!0}):B(o.data.financial);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),D({position:"top",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!",description:"".concat(e.t0),status:"error",duration:3e3,isClosable:!0});case 16:return e.prev=16,K(!0),$(!1),e.finish(16);case 20:case"end":return e.stop()}}),e,null,[[3,13,16,20]])})));return function(n){return e.apply(this,arguments)}}(),V=function(){var e=(0,o.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b().get("".concat((0,g.Z)(),"/user/get_reports"),{headers:{authorization:"Bearer ".concat((0,j.Z)())}});case 2:n=e.sent,B(n.data.financial),K(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();m.useEffect((function(){M||V()}),[]);return(0,y.jsxs)(l.xu,{children:[(0,y.jsx)(l.X6,{size:"2xl",children:n("menu.finance")}),(0,y.jsxs)(l.xu,{mt:"20px",children:[(0,y.jsx)(l.xu,(e={borderWidth:"1px",style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},borderRadius:"lg"},(0,i.Z)(e,"style",{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"}),(0,i.Z)(e,"borderRadius","lg"),(0,i.Z)(e,"maxW","lg"),(0,i.Z)(e,"bgColor","white"),(0,i.Z)(e,"children",(0,y.jsx)(l.xu,{m:"20px",children:(0,y.jsxs)("form",{onSubmit:P(N),children:[(0,y.jsxs)(l.Kq,{direction:["column","row"],spacing:"10px",children:[(0,y.jsxs)(u.NI,{isInvalid:R,onChange:function(){L(!1)},children:[(0,y.jsxs)(p.Ph,(0,r.Z)((0,r.Z)({placeholder:n("finance.quarter.placeholder"),isDisabled:T},J("quarter")),{},{children:[(0,y.jsx)("option",{value:"1",children:n("finance.quarter.1")}),(0,y.jsx)("option",{value:"2",children:n("finance.quarter.2")}),(0,y.jsx)("option",{value:"3",children:n("finance.quarter.3")}),(0,y.jsx)("option",{value:"4",children:n("finance.quarter.4")})]})),R&&(0,y.jsx)(u.J1,{children:R})]}),(0,y.jsxs)(u.NI,{isInvalid:S,onChange:function(){q(!1)},children:[(0,y.jsxs)(p.Ph,(0,r.Z)((0,r.Z)({placeholder:n("finance.year.placeholder"),isDisabled:T},J("year")),{},{children:[(0,y.jsx)("option",{value:"2024",children:"2024"}),(0,y.jsx)("option",{value:"2025",children:"2025"})]})),S&&(0,y.jsx)(u.J1,{children:S})]})]}),(0,y.jsx)(d.zx,{mt:"10px",w:"100%",type:"submit",isLoading:T,colorScheme:"teal",children:n("finance.button.search")})]})})),e)),(0,y.jsx)(l.xu,{mt:"20px",children:!M&&(0,y.jsx)(l.M5,{children:(0,y.jsx)(h.$,{color:"main",size:"xl"})})||(0,y.jsx)(l.xu,{children:0===W.length&&(0,y.jsx)(t,{})||(0,y.jsx)(l.xu,{mt:"20px",maxW:"full",children:W.map((function(e){return(0,y.jsx)(v.Z,{report:e})}))})})})]})]})}},58585:function(e){e.exports=function(e,n,t,r){var o=new Blob("undefined"!==typeof r?[r,e]:[e],{type:t||"application/octet-stream"});if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(o,n);else{var a=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(o):window.webkitURL.createObjectURL(o),i=document.createElement("a");i.style.display="none",i.href=a,i.setAttribute("download",n),"undefined"===typeof i.download&&i.setAttribute("target","_blank"),document.body.appendChild(i),i.click(),setTimeout((function(){document.body.removeChild(i),window.URL.revokeObjectURL(a)}),200)}}}}]);