(self.webpackChunkloft=self.webpackChunkloft||[]).push([[113],{81506:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},34575:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},93913:function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},43269:function(e,t,n){var r=n(60379);e.exports=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}},e.exports.__esModule=!0,e.exports.default=e.exports},99842:function(e,t,n){var r=n(29754),o=n(57067),i=n(78585);e.exports=function(e){var t=o();return function(){var n,o=r(e);if(t){var a=r(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return i(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports},29754:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},2205:function(e,t,n){var r=n(99489);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},57067:function(e){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},78585:function(e,t,n){var r=n(50008).default,o=n(81506);e.exports=function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return o(e)},e.exports.__esModule=!0,e.exports.default=e.exports},99489:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},50008:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},42653:function(e,t,n){"use strict";var r=n(43269).default,o=n(34575).default,i=n(93913).default,a=n(2205).default,s=n(99842).default,u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=n(12520),c=n(10941),y=u(n(47313)),f=function(e){a(n,e);var t=s(n);function n(e){var r;return o(this,n),(r=t.call(this,e)).inputRef=y.default.createRef(),r.reset=function(){return r.handleOnClearClick()},r.handleOnFileChange=function(e){r.setState(Object.assign(Object.assign({},r.state),{files:e.target.files})),r.clearInnerInput()},r.handleOnClearClick=function(){r.setState(Object.assign(Object.assign({},r.state),{files:null})),r.clearInnerInput()},r.handleOnInputClick=function(){var e;(null===(e=r.inputRef)||void 0===e?void 0:e.current)&&(r.inputRef.current.value="",r.inputRef.current.click())},r.render=function(){var e,t=r.props,n=t.placeholder,o=t.clearButtonLabel,i=t.hideClearButton,a=t.multipleFiles,s=t.accept,u=t.inputProps,f=t.inputGroupProps;return y.default.createElement(l.InputGroup,Object.assign({},f),y.default.createElement("input",{type:"file",ref:r.inputRef,accept:s,style:{display:"none"},multiple:a,onChange:r.handleOnFileChange,"data-testid":null!==(e=null===u||void 0===u?void 0:u.placeholder)&&void 0!==e?e:n}),y.default.createElement(l.Input,Object.assign({placeholder:n},Object.assign(Object.assign({},u),{readOnly:!0,isReadOnly:!0,value:r.state.fileName,onClick:r.handleOnInputClick}))),!i&&y.default.createElement(c.InputRightAddon,null,y.default.createElement(c.Button,{onClick:r.handleOnClearClick},null!==o&&void 0!==o?o:"Clear")))},r.state={files:null,fileName:""},r}return i(n,[{key:"componentDidUpdate",value:function(e,t){if(t.files!==this.state.files){var n=new Array;if(this.state.files){var o,i=r(this.state.files);try{for(i.s();!(o=i.n()).done;){var a=o.value;n.push(a)}}catch(s){i.e(s)}finally{i.f()}}this.setState(Object.assign(Object.assign({},this.state),{fileName:n.map((function(e){return e.name})).join(" & ")})),this.props.onFileChange(n)}}},{key:"clearInnerInput",value:function(){var e;(null===(e=this.inputRef)||void 0===e?void 0:e.current)&&(this.inputRef.current.files=null)}}]),n}(y.default.Component);f.defaultProps={clearButtonLabel:"Clear",multipleFiles:!1,accept:void 0,hideClearButton:!1,inputProps:void 0,inputGroupProps:void 0},t.default=f},33406:function(e){"use strict";var t=function(e){return function(e){return!!e&&"object"===typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===n}(e)}(e)};var n="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function r(e,t){return!1!==t.clone&&t.isMergeableObject(e)?u((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function o(e,t,n){return e.concat(t).map((function(e){return r(e,n)}))}function i(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function a(e,t){try{return t in e}catch(n){return!1}}function s(e,t,n){var o={};return n.isMergeableObject(e)&&i(e).forEach((function(t){o[t]=r(e[t],n)})),i(t).forEach((function(i){(function(e,t){return a(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,i)||(a(e,i)&&n.isMergeableObject(t[i])?o[i]=function(e,t){if(!t.customMerge)return u;var n=t.customMerge(e);return"function"===typeof n?n:u}(i,n)(e[i],t[i],n):o[i]=r(t[i],n))})),o}function u(e,n,i){(i=i||{}).arrayMerge=i.arrayMerge||o,i.isMergeableObject=i.isMergeableObject||t,i.cloneUnlessOtherwiseSpecified=r;var a=Array.isArray(n);return a===Array.isArray(e)?a?i.arrayMerge(e,n,i):s(e,n,i):r(n,i)}u.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return u(e,n,t)}),{})};var l=u;e.exports=l},48630:function(e){function t(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),e)}}function n(e,t){e.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,t(null,e))}}e.exports=function(e,r,o){var i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("script");"function"===typeof r&&(o=r,r={}),r=r||{},o=o||function(){},a.type=r.type||"text/javascript",a.charset=r.charset||"utf8",a.async=!("async"in r)||!!r.async,a.src=e,r.attrs&&function(e,t){for(var n in t)e.setAttribute(n,t[n])}(a,r.attrs),r.text&&(a.text=""+r.text),("onload"in a?t:n)(a,o),a.onload||t(a,o),i.appendChild(a)}},16912:function(e,t,n){"use strict";n.r(t);var r=Number.isNaN||function(e){return"number"===typeof e&&e!==e};function o(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(o=e[n],i=t[n],!(o===i||r(o)&&r(i)))return!1;var o,i;return!0}t.default=function(e,t){var n;void 0===t&&(t=o);var r,i=[],a=!1;return function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return a&&n===this&&t(o,i)||(r=e.apply(this,o),a=!0,n=this,i=o),r}}},81545:function(e,t,n){"use strict";n.d(t,{GlobalHotKeys:function(){return et}});var r=n(75192),o=n.n(r),i=n(47313);function a(e){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(){return y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(this,arguments)}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){c(e,t,n[t])}))}return e}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function g(e,t,n){return g=v()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&p(o,n.prototype),o},g.apply(null,arguments)}function m(e){var t="function"===typeof Map?new Map:void 0;return m=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return g(e,arguments,h(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),p(r,e)},m(e)}function _(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?b(e):t}function P(e,t,n){return P="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},P(e,t,n||e)}function C(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function E(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return e.reduce((function(e,n){return e[n]=t||{value:n},e}),{})}var w={logLevel:"warn",defaultKeyEvent:"keydown",defaultComponent:"div",defaultTabIndex:"-1",ignoreTags:["input","select","textarea"],enableHardSequences:!1,ignoreKeymapAndHandlerChangesByDefault:!0,ignoreEventsCondition:function(e){var t=e.target;if(t&&t.tagName){var n=t.tagName.toLowerCase();return O.option("_ignoreTagsDict")[n]||t.isContentEditable}return!1},ignoreRepeatedEventsWhenKeyHeldDown:!0,simulateMissingKeyPressEvents:!0,stopEventPropagationAfterHandling:!0,stopEventPropagationAfterIgnoring:!0,allowCombinationSubmatches:!1,customKeyCodes:{}},S=f({},w);S._ignoreTagsDict=E(S.ignoreTags,!0);var O=function(){function e(){s(this,e)}return l(e,null,[{key:"init",value:function(e){var t=this,n=e.ignoreTags,r=e.customKeyCodes;n&&(e._ignoreTagsDict=E(e.ignoreTags)),r&&(e._customKeyNamesDict=E(Object.values(e.customKeyCodes))),-1!==["verbose","debug","info"].indexOf(e.logLevel)&&console.warn("React HotKeys: You have requested log level '".concat(e.logLevel,"' but for performance reasons, logging below severity level 'warning' is disabled in production. Please use the development build for complete logs.")),Object.keys(e).forEach((function(n){t.set(n,e[n])}))}},{key:"set",value:function(e,t){S[e]=t}},{key:"reset",value:function(e){S[e]=w[e]}},{key:"option",value:function(e){return S[e]}}]),e}(),I=function(){function e(){var t=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"warn";s(this,e),c(this,"verbose",this.noop),c(this,"debug",this.noop),c(this,"info",this.noop),c(this,"warn",this.noop),c(this,"error",this.noop),this.logLevel=this.constructor.levels[n],this.logLevel>=this.constructor.levels.error&&(this.error=console.error,this.logLevel>=this.constructor.levels.warn&&(this.warn=console.warn,["info","debug","verbose"].some((function(e){return!(t.logLevel>=t.constructor.levels[e])||(t[e]=console.log,!1)}))))}return l(e,[{key:"noop",value:function(){}}]),e}();c(I,"logIcons",["\ud83d\udcd5","\ud83d\udcd7","\ud83d\udcd8","\ud83d\udcd9"]),c(I,"componentIcons",["\ud83d\udd3a","\u2b50\ufe0f","\ud83d\udd37","\ud83d\udd36","\u2b1b\ufe0f"]),c(I,"eventIcons",["\u2764\ufe0f","\ud83d\udc9a","\ud83d\udc99","\ud83d\udc9b","\ud83d\udc9c","\ud83e\udde1"]),c(I,"levels",{none:0,error:1,warn:2,info:3,debug:4,verbose:5});var K={keydown:0,keypress:1,keyup:2},T={Shift:["shiftKey"],Meta:["metaKey"],Control:["ctrlKey"],Alt:["altKey"]},M={"`":["~"],1:["!"],2:["@",'"'],3:["#","\xa3"],4:["$"],5:["%"],6:["^"],7:["&"],8:["*"],9:["("],0:[")"],"-":["_"],"=":["plus"],";":[":"],"'":['"',"@"],",":["<"],".":[">"],"/":["?"],"\\":["|"],"[":["{"],"]":["}"],"#":["~"]};function A(e){return M[e]||[1===e.length?e.toUpperCase():e]}function x(e,t){return e.hasOwnProperty(t)}function H(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce((function(n,r){var o=e[r];return o.forEach((function(e){x(n,e)||(n[e]=[]),n[e].push(r)})),t.includeOriginal&&(!x(n,r)&&(n[r]=[]),n[r]=[].concat(C(n[r]),C(o))),n}),{})}var L=H(M);function j(e){return L[e]||[1===e.length?e.toLowerCase():e]}var R=H({},{includeOriginal:!0});function D(e){return"string"==typeof e}function U(e){return D(e)?e.trim().replace(/\s+/g," "):e}var N={tab:"Tab",capslock:"CapsLock",shift:"Shift",meta:"Meta",alt:"Alt",ctrl:"Control",space:" ",spacebar:" ",escape:"Escape",esc:"Escape",left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown",return:"Enter",del:"Delete",command:"Meta",option:"Alt",enter:"Enter",backspace:"Backspace",ins:"Insert",pageup:"PageUp",pagedown:"PageDown",end:"End",home:"Home",contextmenu:"ContextMenu",numlock:"Clear"},F={cmd:"Meta"};function q(e){var t=e.toLowerCase();return N[t]||F[t]||(e.match(/^f\d+$/)?e.toUpperCase():e)}var B={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},z=E(Object.values(B),!0);function V(e){return!!z[e]}function W(e){return V(e)||String.fromCharCode(e.charCodeAt(0))===e||function(e){return O.option("_customKeyNamesDict")[e]}(e)}var G=function(e){function t(){var e,n;s(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return c(b(b(n=k(this,(e=h(t)).call.apply(e,[this].concat(o))))),"name","InvalidKeyNameError"),n}return d(t,e),t}(m(Error));function $(e){return e.sort().join("+")}var X=function(){function e(){s(this,e)}return l(e,null,[{key:"parse",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=U(e),r=n.split(" ");try{var o=r.slice(0,r.length-1),i=r[r.length-1],a=o.map((function(e){var n=J(e,t);return $(Object.keys(n))})).join(" "),s=J(i,t),u=$(Object.keys(s)),l={id:u,keyDictionary:s,keyEventType:t.keyEventType,size:Object.keys(s).length};return{sequence:{prefix:a,size:o.length+1},combination:l}}catch(e){return{sequence:null,combination:null}}}}]),e}();function J(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return e.replace(/^\+|(\s|[^+]\+)\+/,"$1plus").split("+").reduce((function(e,n){var r=q(n);if(t.ensureValidKeys&&!W(r))throw new G;return e[r]=!0,e}),{})}var Y={"`":["`"],1:["\xa1"],2:["\u2122"],3:["\xa3"],4:["\xa2"],5:["\u221e"],6:["\xa7"],7:["\xb6"],8:["\u2022"],9:["\xaa"],0:["\xba"],"-":["\u2013"],"=":["\u2260"],a:["\xe5"],b:["\u222b"],c:["\xe7"],d:["\u2202"],e:["\xb4"],f:["\u0192"],g:["\xa9"],h:["\u02d9"],i:["\u02c6"],j:["\u2206"],k:["\u02da"],l:["\xac"],m:["\xb5"],n:["\u02dc"],o:["\xf8"],p:["\u03c0"],q:["\u0153"],r:["\xae"],s:["\xdf"],t:["\u2020"],u:["\xa8"],v:["\u221a"],w:["\u2211"],x:["\u2248"],y:["\xa5"],z:["\u03a9"],"[":["\u201c"],"]":["\u2018"],"\\":["\xab"],"'":["\xe6"],";":["\u2026"],",":["\u2264"],".":["\u2265"],"/":["\xf7"]},Z=H(Y);function Q(e){return Z[e]||[e]}function ee(e){return Y[e]||[e]}var te={"`":["`"],1:["\u2044"],2:["\u20ac"],3:["\u2039"],4:["\u203a"],5:["\ufb01"],6:["\ufb02"],7:["\u2021"],8:["\xb0"],9:["\xb7"],0:["\u201a"],"-":["\u2014"],"=":["\xb1"],a:["\xc5"],b:["\u0131"],c:["\xc7"],d:["\xce"],e:["\xb4"],f:["\xcf"],g:["\u02dd"],h:["\xd3"],i:["\u02c6"],j:["\xd4"],k:["\uf8ff"],l:["\xd2"],m:["\xc2"],n:["\u02dc"],o:["\xd8"],p:["\u03c0"],q:["\u0152"],r:["\u2030"],s:["\xcd"],t:["\xce"],u:["\xa8"],v:["\u25ca"],w:["\u201e"],x:["\u02db"],y:["\xc1"],z:["\xb8"],"[":["\u201d"],"]":["\u2019"],"\\":["\xbb"],"'":["\xc6"],";":["\xda"],",":["\xaf"],".":["\u02d8"]},ne=H(te);function re(e){return ne[e]||j(e)}function oe(e){return te[e]||[e]}var ie=function(){function e(){s(this,e)}return l(e,null,[{key:"serialize",value:function(e){var t=e.Shift,n=e.Alt,r={};return Object.keys(e).sort().forEach((function(e){var o=[];if(t)if(n){var i=re(e),a=oe(e);o=[].concat(C(o),[e],C(i),C(a))}else{var s=j(e),u=A(e);o=[].concat(C(o),[e],C(s),C(u))}else if(n){var l=Q(e),y=ee(e);o=[].concat(C(o),[e],C(l),C(y))}else{o.push(e);var d=R[e];d&&(o=[].concat(C(o),C(d)))}var h=Object.keys(r);0<h.length?h.forEach((function(e){o.forEach((function(t){r[e+"+".concat(t)]=f({},r[e],c({},t,!0))})),delete r[e]})):o.forEach((function(e){r[e]=c({},e,!0)}))})),Object.values(r).map((function(e){return Object.keys(e).sort().join("+")}))}},{key:"isValidKeySerialization",value:function(e){return!!(0<e.length)&&!!X.parse(e,{ensureValidKeys:!0}).combination}}]),e}(),ae=0,se=1;function ue(e){return"undefined"==typeof e}var le=0,ce=1,ye=2,fe=function(){function e(){s(this,e)}return l(e,null,[{key:"newRecord",value:function(e,t){var n=[le,le,le];if(!ue(e))for(var r=0;r<=e;r++)n[r]=t;return n}},{key:"setBit",value:function(e,t,n){return e[t]=n,e}},{key:"clone",value:function(e){for(var t=this.newRecord(),n=0;n<e.length;n++)t[n]=e[n];return t}}]),e}();function de(e){return!Array.isArray(e)&&"object"===a(e)&&null!==e}function he(e){return de(e)?0===Object.keys(e).length:!e||0===e.length}function pe(e){return de(e)?Object.keys(e).length:e.length}var ve=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};s(this,e),this._keys=t,this._includesKeyUp=!1,this._update()}return l(e,[{key:"getIds",value:function(){return this._ids}},{key:"getKeyAliases",value:function(){return this._keyAliases}},{key:"getNormalizedKeyName",value:function(e){if(this._keys[e])return e;var t=this._keyAliases[e];return t||e}},{key:"getNumberOfKeys",value:function(){return pe(this._keys)}},{key:"any",value:function(){return 0<Object.keys(this._getKeyStates()).length}},{key:"isEnding",value:function(){return this._includesKeyUp}},{key:"hasEnded",value:function(){return he(this.keysStillPressedDict())}},{key:"addKey",value:function(e,t){this._setKeyState(e,[fe.newRecord(),fe.newRecord(K.keydown,t)])}},{key:"setKeyState",value:function(e,t,n){var r=this._getKeyState(e);if(this.isKeyIncluded(e)){var o=fe.clone(r[1]),i=fe.clone(o);fe.setBit(i,t,n),this._setKeyState(e,[o,i])}else this.addKey(e,n);t===K.keyup&&(this._includesKeyUp=!0)}},{key:"forEachKey",value:function(e){return Object.keys(this._keys).forEach(e)}},{key:"some",value:function(e){return Object.keys(this._keys).some(e)}},{key:"getKeyDictionary",value:function(){return E(Object.keys(this._getKeyStates()),!0)}},{key:"keysStillPressedDict",value:function(){var e=this;return Object.keys(this._keys).reduce((function(t,n){return e.isKeyStillPressed(n)&&(t[n]=e._getKeyState(n)),t}),{})}},{key:"isKeyIncluded",value:function(e){return!!this._getKeyState(e)}},{key:"isKeyStillPressed",value:function(e){return this.isEventTriggered(e,K.keypress)&&!this.isKeyReleased(e)}},{key:"isKeyReleased",value:function(e){return this.isEventTriggered(e,K.keyup)}},{key:"isEventTriggered",value:function(e,t){return this._getKeyStateType(e,se,t)}},{key:"wasEventPreviouslyTriggered",value:function(e,t){return this._getKeyStateType(e,ae,t)}},{key:"isKeyPressSimulated",value:function(e){return this._isKeyEventSimulated(e,K.keypress)}},{key:"isKeyUpSimulated",value:function(e){return this._isKeyEventSimulated(e,K.keyup)}},{key:"describe",value:function(){return this.getIds()[0]}},{key:"toJSON",value:function(){return{keys:this._getKeyStates(),ids:this.getIds(),keyAliases:this.getKeyAliases()}}},{key:"_getKeyStateType",value:function(e,t,n){var r=this._getKeyState(e);return r&&r[t][n]}},{key:"_update",value:function(){this._ids=ie.serialize(this._keys),this._keyAliases=function(e){return Object.keys(e).reduce((function(t,n){return function(e){return R[e]||[e]}(n).forEach((function(r){(function(e){if(e.Shift)return e.Alt?[oe,re]:[A,j];if(e.Alt)return[ee,Q];var t=function(e){return[e]};return[t,t]})(e).forEach((function(e){e(r).forEach((function(e){(e!==n||n!==r)&&(t[e]=n)}))}))})),t}),{})}(this._keys)}},{key:"_isKeyEventSimulated",value:function(e,t){return this.isEventTriggered(e,t)===ye}},{key:"_getKeyStates",value:function(){return this._keys}},{key:"_getKeyState",value:function(e){var t=this._keys[e];if(t)return t;var n=this._keyAliases[e];return n?this._keys[n]:void 0}},{key:"_setKeyState",value:function(e,t){var n=this.getNormalizedKeyName(e);this._keys[n]=t,this._update()}}]),e}();var ge=function(){function e(t){var n=t.maxLength,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;s(this,e),this._records=[],this._maxLength=n,r?this._push(r):this._push(new ve)}return l(e,[{key:"getMostRecentCombinations",value:function(e){return this._records.slice(-e,-1)}},{key:"any",value:function(){return this._records.some((function(e){return e.any()}))}},{key:"getLength",value:function(){return this._records.length}},{key:"getCurrentCombination",value:function(){return this._records[this.getLength()-1]}},{key:"addKeyToCurrentCombination",value:function(e,t,n){this._ensureInitialKeyCombination(),this.getCurrentCombination().setKeyState(e,t,n)}},{key:"setMaxLength",value:function(e){this._maxLength=e,this._trimHistory()}},{key:"startNewKeyCombination",value:function(e,t){this._ensureInitialKeyCombination();var n=new ve(this.getCurrentCombination().keysStillPressedDict());n.addKey(e,t),this._push(n)}},{key:"toJSON",value:function(){return this._records.map((function(e){return e.toJSON()}))}},{key:"_ensureInitialKeyCombination",value:function(){0===this.getLength()&&this._push(new ve)}},{key:"_push",value:function(e){this._trimHistory(),this._records.push(e)}},{key:"_trimHistory",value:function(){for(;this.getLength()>this._maxLength;)this._shift()}},{key:"_shift",value:function(){this._records.shift()}}]),e}();function me(e){return Array.isArray(e)?e:e?[e]:[]}var _e=function(e){function t(){return s(this,t),k(this,h(t).apply(this,arguments))}return d(t,e),l(t,[{key:"add",value:function(e,n){P(h(t.prototype),"set",this).call(this,e,{childIds:[],parentId:null,keyMap:n})}},{key:"update",value:function(e,n){var r=P(h(t.prototype),"get",this).call(this,e);P(h(t.prototype),"set",this).call(this,e,f({},r,{keyMap:n}))}},{key:"setParent",value:function(e,t){this.get(e).parentId=t,this._addChildId(t,e)}},{key:"remove",value:function(e){var n=this._getParentId(e);this._removeChildId(n,e),P(h(t.prototype),"remove",this).call(this,e)}},{key:"_getParentId",value:function(e){var t=this.get(e);return t&&t.parentId}},{key:"_addChildId",value:function(e,t){this.get(e).childIds.push(t)}},{key:"_removeChildId",value:function(e,t){var n=this.get(e);n&&(n.childIds=function(e){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=E(me(1<arguments.length&&void 0!==arguments[1]?arguments[1]:[]));return Array.isArray(e)?e.reduce((function(e,r){return n[r]&&(t.stringifyFirst||n[r].value===r)||e.push(r),e}),[]):de(e)?Object.keys(e).reduce((function(t,r){return n[r]||(t[r]=e[r]),t}),{}):e}(n.childIds,t))}}]),t}(function(){function e(){s(this,e),this._registry={}}return l(e,[{key:"get",value:function(e){return this._registry[e]}},{key:"set",value:function(e,t){this._registry[e]=t}},{key:"remove",value:function(e){delete this._registry[e]}},{key:"toJSON",value:function(){return this._registry}}]),e}());var be=function(){function e(t){s(this,e),this._list=t,this._position=-1}return l(e,[{key:"getPosition",value:function(){return this._position}},{key:"getComponent",value:function(){return this._list.getAtPosition(this.getPosition())}},{key:"next",value:function(){return this.getPosition()+1<this._list.getLength()?(this._position++,this.getComponent()):null}}]),e}(),ke=function(){function e(){s(this,e),this._list=[],this._idToIndex={},this._longestSequence=1,this._longestSequenceComponentId=null,this._keyMapEventRecord=fe.newRecord()}return l(e,[{key:"getNewIterator",value:function(){return new be(this)}},{key:"add",value:function(e,t,n,r){if(this.containsId(e))return this.update(e,t,n,r);var o=this._build(e,t,n,r);this._list.push(o);var i=this._getLastIndex();return this._idToIndex[e]=i}},{key:"containsId",value:function(e){return!!this.get(e)}},{key:"get",value:function(e){return this.getAtPosition(this.getIndexById(e))}},{key:"getIndexById",value:function(e){return this._idToIndex[e]}},{key:"update",value:function(e,t,n,r){var o=this._isUpdatingComponentWithLongestSequence(e),i=this.getLongestSequence(),a=this._build(e,t,n,r);o&&a.sequenceLength!==i&&(a.sequenceLength>i?this._longestSequence=a.sequenceLength:this._recalculateLongestSequence()),this._list[this.getIndexById(e)]=a}},{key:"remove",value:function(e){var t=this._isUpdatingComponentWithLongestSequence(e);this.removeAtPosition(this.getIndexById(e)),t&&this._recalculateLongestSequence()}},{key:"any",value:function(){return 0!==this.getLength()}},{key:"isRoot",value:function(e){return this.getIndexById(e)>=this.getLength()-1}},{key:"getLongestSequence",value:function(){return this._longestSequence}},{key:"anyActionsForEventType",value:function(e){return!!this._keyMapEventRecord[e]}},{key:"getLength",value:function(){return this._list.length}},{key:"getAtPosition",value:function(e){return this._list[e]}},{key:"removeAtPosition",value:function(e){this._list=function(e,t){return[].concat(C(e.slice(0,t)),C(e.slice(t+1)))}(this._list,e);for(var t=e;t<this.getLength();)this._idToIndex[this.getAtPosition(t).componentId]=t,t++}},{key:"toJSON",value:function(){return this._list}},{key:"_getLastIndex",value:function(){return this.getLength()-1}},{key:"_build",value:function(e,t,n,r){var o=this._applyHardSequences(t,n),i=o.keyMap,a=o.handlers;return{actions:this._buildActionDictionary(f({},t,i),r,e),handlers:a,componentId:e,options:r}}},{key:"_isUpdatingComponentWithLongestSequence",value:function(e){return e===this._getLongestSequenceComponentId()}},{key:"_getLongestSequenceComponentId",value:function(){return this._longestSequenceComponentId}},{key:"_recalculateLongestSequence",value:function(){for(var e=this.getNewIterator();e.next();){var t=e.getComponent(),n=t.longestSequence,r=t.componentId;n>this.getLongestSequence()&&(this._longestSequenceComponentId=r,this._longestSequence=n)}}},{key:"_applyHardSequences",value:function(e,t){return O.option("enableHardSequences")?Object.keys(t).reduce((function(n,r){return!!!e[r]&&ie.isValidKeySerialization(r)&&(n.keyMap[r]=r),n.handlers[r]=t[r],n}),{keyMap:{},handlers:{}}):{keyMap:e,handlers:t}}},{key:"_buildActionDictionary",value:function(e,t,n){var r=this;return Object.keys(e).reduce((function(o,i){var a=e[i];return(de(a)&&x(a,"sequences")?me(a.sequences):me(a)).forEach((function(e){var a=function(e,t){if(de(e)){var n=e.sequence,r=e.action;return{keySequence:n,keyEventType:ue(r)?K[t.defaultKeyEvent]:K[r]}}return{keySequence:e,keyEventType:K[t.defaultKeyEvent]}}(e,t),s=a.keySequence,u=a.keyEventType;r._addActionOptions(o,n,i,s,u)})),o}),{})}},{key:"_addActionOptions",value:function(e,t,n,r,o){var i=X.parse(r,{keyEventType:o}),a=i.sequence,s=i.combination;a.size>this.getLongestSequence()&&(this._longestSequence=a.size,this._longestSequenceComponentId=t),this._keyMapEventRecord[o]=ce,e[n]||(e[n]=[]),e[n].push(f({prefix:a.prefix,actionName:n,sequenceLength:a.size},s))}}]),e}();function Pe(e,t){return e[e.length-(t+1)]}for(var Ce={Enter:!0,Backspace:!0,ArrowRight:!0,ArrowLeft:!0,ArrowUp:!0,ArrowDown:!0,CapsLock:!0},Ee=1;13>Ee;Ee++)Ce["F".concat(Ee)]=!0;function we(e){return 1===e.length||x(Ce,e)}var Se=function(){function e(){s(this,e),this._actionConfigs={},this._order=null}return l(e,[{key:"addMatch",value:function(e,t){if(this._includesMatcherForCombination(e.id)){var n=e.keyEventType,r=e.actionName,o=e.id;this._addHandlerToActionConfig(o,{keyEventType:n,actionName:r,handler:t})}else this._addNewActionConfig(e,t)}},{key:"findMatch",value:function(e,t,n){this._order||this._setOrder();var r=!0,o=!1,i=void 0;try{for(var a,s=this._order[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value,l=this._actionConfigs[u];if(this._matchesActionConfig(e,t,n,l))return l}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return null}},{key:"toJSON",value:function(){return{actionConfigs:this._actionConfigs,order:this._order}}},{key:"_matchesActionConfig",value:function(e,t,n,r){if(!function(e,t){var n=pe(t.keyDictionary);return O.option("allowCombinationSubmatches")||function(e){return!!e.isKeyStillPressed("Meta")&&e.some((function(e){return we(e)}))}(e)?e.getNumberOfKeys()>=n:e.getNumberOfKeys()===n}(e,r))return!1;if(!r.events[n])return!1;var o=!1;return Object.keys(r.keyDictionary).every((function(r){return!!e.isEventTriggered(r,n)&&(t&&t===e.getNormalizedKeyName(r)&&(o=!e.wasEventPreviouslyTriggered(r,n)),!0)}))&&o}},{key:"_setOrder",value:function(){var e=Object.values(this._actionConfigs).reduce((function(e,t){var n=t.id,r=t.size;return e[r]||(e[r]=[]),e[r].push(n),e}),{});this._order=Object.keys(e).sort((function(e,t){return t-e})).reduce((function(t,n){return t.concat(e[n])}),[])}},{key:"_addNewActionConfig",value:function(e,t){var n=e.prefix,r=e.sequenceLength,o=e.id,i=e.keyDictionary,a=e.size,s=e.keyEventType,u=e.actionName;this._setCombinationMatcher(o,{prefix:n,sequenceLength:r,id:o,keyDictionary:i,size:a,events:{}}),this._addHandlerToActionConfig(o,{keyEventType:s,actionName:u,handler:t})}},{key:"_addHandlerToActionConfig",value:function(e,t){var n=t.keyEventType,r=t.actionName,o=t.handler,i=this._getCombinationMatcher(e);this._setCombinationMatcher(e,f({},i,{events:f({},i.events,c({},n,{actionName:r,handler:o}))}))}},{key:"_setCombinationMatcher",value:function(e,t){this._actionConfigs[e]=t}},{key:"_getCombinationMatcher",value:function(e){return this._actionConfigs[e]}},{key:"_includesMatcherForCombination",value:function(e){return!!this._getCombinationMatcher(e)}}]),e}();var Oe=function(){function e(){s(this,e),this._combinationMatchers={},this._eventRecord=fe.newRecord()}return l(e,[{key:"addMatch",value:function(e,t){this._getOrCreateCombinationMatcher(e.prefix).addMatch(e,t),fe.setBit(this._eventRecord,e.keyEventType,ce),(!this._longestSequence||this._longestSequence<e.sequenceLength)&&(this._longestSequence=e.sequenceLength)}},{key:"findMatch",value:function(e,t,n){var r=this._findCombinationMatcher(e);return r?r.findMatch(e.getCurrentCombination(),e.getCurrentCombination().getNormalizedKeyName(t),n):null}},{key:"hasMatchesForEventType",value:function(e){return!!this._eventRecord[e]}},{key:"getLongestSequence",value:function(){return this._longestSequence}},{key:"toJSON",value:function(){var e=this;return Object.keys(this._combinationMatchers).reduce((function(t,n){var r=e._combinationMatchers[n];return t[n]=r.toJSON(),t}),{})}},{key:"_getOrCreateCombinationMatcher",value:function(e){return this._combinationMatchers[e]||(this._combinationMatchers[e]=new Se),this._combinationMatchers[e]}},{key:"_findCombinationMatcher",value:function(e){var t=e.getMostRecentCombinations(this.getLongestSequence());if(0===t.length)return this._combinationMatchers[""];for(var n=t.map((function(e){return e.getIds()})),r=n.map((function(e){return e.length})),o=Array(n.length).fill(0),i=!1;!i;){var a=o.map((function(e,t){return n[t][e]})),s=a.join(" ");if(this._combinationMatchers[s])return this._combinationMatchers[s];for(var u=0,l=!0;l&&u<o.length;){var c=(Pe(o,u)+1)%(Pe(r,u)||1);o[o.length-(u+1)]=c,(l=0==c)&&u++}i=u===o.length}}}]),e}(),Ie=function(){function e(t){s(this,e),this._keyMapMatchers=[],this._unmatchedHandlerStatus=[],this._handlersDictionary={},this._keySequencesDictionary={};for(var n=t.getNewIterator();n.next();){var r=n.getComponent().handlers;this._unmatchedHandlerStatus.push([Object.keys(r).length,{}]),this._keyMapMatchers.push(new Oe)}this._componentList=t,this._componentListIterator=t.getNewIterator()}return l(e,[{key:"getKeyHistoryMatcher",value:function(e){if(this._componentHasUnmatchedHandlers(e))for(;this._componentListIterator.next();)this._addHandlersFromComponent(),this._addActionsFromComponent();return this._getKeyHistoryMatcher(e)}},{key:"componentHasActionsBoundToEventType",value:function(e,t){return this.getKeyHistoryMatcher(e).hasMatchesForEventType(t)}},{key:"findMatchingKeySequenceInComponent",value:function(e,t,n,r){return this.componentHasActionsBoundToEventType(e,r)?this.getKeyHistoryMatcher(e).findMatch(t,n,r):null}},{key:"_getKeyHistoryMatcher",value:function(e){return this._keyMapMatchers[e]}},{key:"_addActionsFromComponent",value:function(){var e=this,t=this._componentListIterator.getComponent().actions;Object.keys(t).forEach((function(n){var r=e._getHandlers(n);if(r){var o=r[0],i=e._componentList.getAtPosition(o).handlers[n],a=e._getKeyHistoryMatcher(o);t[n].forEach((function(t){var n=[t.prefix,t.id].join(" ");e._isClosestHandlerFound(n,t)||(a.addMatch(t,i),e._addKeySequence(n,[o,t.keyEventType]))})),r.forEach((function(t){var r=e._getUnmatchedHandlerStatus(t);r[1][n]||(r[1][n]=!0,r[0]--)}))}}))}},{key:"_getHandlers",value:function(e){return this._handlersDictionary[e]}},{key:"_addHandlersFromComponent",value:function(){var e=this,t=this._componentListIterator.getComponent().handlers;Object.keys(t).forEach((function(t){e._addHandler(t)}))}},{key:"_addHandler",value:function(e){this._handlersDictionary[e]||(this._handlersDictionary[e]=[]),this._handlersDictionary[e].push(this._componentListIterator.getPosition())}},{key:"_addKeySequence",value:function(e,t){this._keySequencesDictionary[e]||(this._keySequencesDictionary[e]=[]),this._keySequencesDictionary[e].push(t)}},{key:"_componentHasUnmatchedHandlers",value:function(e){return 0<this._getUnmatchedHandlerStatus(e)[0]}},{key:"_getUnmatchedHandlerStatus",value:function(e){return this._unmatchedHandlerStatus[e]}},{key:"_isClosestHandlerFound",value:function(e,t){return this._keySequencesDictionary[e]&&this._keySequencesDictionary[e].some((function(e){return e[1]===t.keyEventType}))}}]),e}();function Ke(e,t,n){return n.forEach((function(n){x(e,n)&&(t[n]=e[n])})),t}function Te(e){switch(parseInt(e,10)){case 0:return"keydown";case 1:return"keypress";default:return"keyup"}}function Me(e){return e.simulated?ye:ce}var Ae=["sequence","action"],xe=["name","description","group"],He=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length?arguments[1]:void 0;s(this,e),this.logger=t.logger||new I("warn"),this.componentId=-1,this.keyEventManager=n,this._componentTree=new _e,this.rootComponentId=null,this._reset(),this.resetKeyHistory()}return l(e,[{key:"_reset",value:function(){this.componentList=new ke,this._initHandlerResolutionState()}},{key:"_newKeyHistory",value:function(){return new ge({maxLength:this.componentList.getLongestSequence()})}},{key:"getKeyHistory",value:function(){return this._keyHistory||(this._keyHistory=this._newKeyHistory()),this._keyHistory}},{key:"_initHandlerResolutionState",value:function(){this._actionResolver=null}},{key:"resetKeyHistory",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.keypressEventsToSimulate=[],this.keyupEventsToSimulate=[],this._keyHistory=this.getKeyHistory().any()&&!e.force?new ge({maxLength:this.componentList.getLongestSequence()},new ve(this.getCurrentCombination().keysStillPressedDict())):this._newKeyHistory()}},{key:"getApplicationKeyMap",value:function(){return null===this.rootComponentId?{}:this._buildApplicationKeyMap([this.rootComponentId],{})}},{key:"_buildApplicationKeyMap",value:function(e,t){var n=this;return e.forEach((function(e){var r=n._componentTree.get(e),o=r.childIds,i=r.keyMap;i&&Object.keys(i).forEach((function(e){var r=i[e];t[e]={},de(r)?x(r,"sequences")?(Ke(r,t[e],xe),t[e].sequences=n._createSequenceFromConfig(r.sequences)):(Ke(r,t[e],xe),t[e].sequences=[Ke(r,{},Ae)]):t[e].sequences=n._createSequenceFromConfig(r)})),n._buildApplicationKeyMap(o,t)})),t}},{key:"_createSequenceFromConfig",value:function(e){return me(e).map((function(e){return de(e)?Ke(e,{},Ae):{sequence:e}}))}},{key:"registerKeyMap",value:function(e){return this.componentId+=1,this._componentTree.add(this.componentId,e),this.componentId}},{key:"reregisterKeyMap",value:function(e,t){this._componentTree.update(e,t)}},{key:"registerComponentMount",value:function(e,t){ue(t)?this.rootComponentId=e:this._componentTree.setParent(e,t)}},{key:"deregisterKeyMap",value:function(e){this._componentTree.remove(e),e===this.rootComponentId&&(this.rootComponentId=null)}},{key:"_addComponent",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=3<arguments.length?arguments[3]:void 0;this.componentList.add(e,t,n,r),this.getKeyHistory().setMaxLength(this.componentList.getLongestSequence())}},{key:"_allKeysAreReleased",value:function(){return this.getCurrentCombination().hasEnded()}},{key:"getCurrentCombination",value:function(){return this.getKeyHistory().getCurrentCombination()}},{key:"_shouldSimulate",value:function(e,t){var n=function(e){return!V(e)}(t),r=this.getCurrentCombination();return e===K.keypress?!n||n&&r.isKeyStillPressed("Meta"):e===K.keyup&&we(t)&&r.isKeyReleased("Meta")}},{key:"_cloneAndMergeEvent",value:function(e,t){var n=Object.keys(T).reduce((function(t,n){return t[n]=e[n],t}),{});return f({},n,t)}},{key:"_callClosestMatchingHandler",value:function(e,t,n,r,o){for(this._actionResolver||(this._actionResolver=new Ie(this.componentList));o<=r;){this._actionResolver.getKeyHistoryMatcher(o);var i=this._actionResolver.findMatchingKeySequenceInComponent(o,this.getKeyHistory(),t,n);this.getCurrentCombination();if(i){var a=i.events[n];if(O.option("allowCombinationSubmatches"))ie.serialize(i.keyDictionary);return a.handler(e),this._stopEventPropagationAfterHandlingIfEnabled(e,o),!0}this._actionResolver.componentHasActionsBoundToEventType(o,n),o++}}},{key:"_stopEventPropagationAfterHandlingIfEnabled",value:function(e,t){return!!O.option("stopEventPropagationAfterHandling")&&(this._stopEventPropagation(e,t),!0)}},{key:"_stopEventPropagation",value:function(){throw new Error("_stopEventPropagation must be overridden by a subclass")}},{key:"_checkForModifierFlagDiscrepancies",value:function(e,t,n){var r=this;Object.keys(T).forEach((function(o){if(t!==o||n!==K.keyup){var i=r.getCurrentCombination(),a=i.isKeyStillPressed(o);T[o].forEach((function(t){!1===e[t]&&a&&i.setKeyState(o,K.keyup,Me(e))}))}}))}},{key:"_logPrefix",value:function(){}}]),e}(),Le=function(){function e(){s(this,e)}return l(e,null,[{key:"getId",value:function(){return ue(this._id)&&(this._id=0),this._id}},{key:"incrementId",value:function(){this._id=this.getId()+1}}]),e}();var je={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"};function Re(e){var t=function(){var t=O.option("customKeyCodes"),n=e.keyCode||e.charCode;return x(t,n)?t[n]:e.nativeEvent?e.key:function(e){if(e.key){var t=je[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=function(e){var t,n=e.keyCode;return"charCode"in e?0===(t=e.charCode)&&13===n&&(t=13):t=n,10===t&&(t=13),32<=t||13===t?t:0}(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?B[e.keyCode]||"Unidentified":""}(e)}();return"+"===t?"plus":t}function De(e){return"Meta"===e}var Ue=0,Ne=1,Fe=2,qe=4,Be=function(){function e(t,n){var r=n.logger,o=n.logPrefix;s(this,e),this._componentList=t,this._previousPropagation=null,this.logger=r,this._logPrefix=o,this._reset()}return l(e,[{key:"_reset",value:function(){this._previousPosition=-1,this._position=-1,this._actionHandled=!1,this._ignoreEvent=!1,this._observeIgnoredEvents=!1,this._stopping=!1,this._componentId=null,this._key=null,this._type=null}},{key:"isFirstPropagationStep",value:function(){var e=this.getPreviousPosition();return-1===e||e>=this._position}},{key:"isForKey",value:function(e){return this._key===e}},{key:"isForEventType",value:function(e){return this._type===e}},{key:"startNewPropagationStep",value:function(e,t,n,r){return this._position=this._componentList.getIndexById(e),this._componentId=e,this.isFirstPropagationStep()&&(Le.incrementId(),this._key=t.key,this._type=r),!(t.repeat&&O.option("ignoreRepeatedEventsWhenKeyHeldDown"))||(this.ignoreEvent(t),!1)}},{key:"finishPropagationStep",value:function(){this.isStopped()||this._componentList.isRoot(this._componentId)?(this._previousPropagation=this._clone(),this._reset()):this._previousPosition=this._position}},{key:"getPreviousPropagation",value:function(){return this._previousPropagation||(this._previousPropagation=this._clone({copyState:!1})),this._previousPropagation}},{key:"getPreviousPosition",value:function(){return this._previousPosition}},{key:"observeIgnoredEvents",value:function(){this._observeIgnoredEvents=!0}},{key:"ignoreEvent",value:function(e){return this.setIgnoreEvent(!0),!(!this.isIgnoringEvent()||!O.option("stopEventPropagationAfterIgnoring"))&&(this.stop(e),this.finishPropagationStep(),!0)}},{key:"setIgnoreEvent",value:function(e){this._ignoreEvent=e}},{key:"isIgnoringEvent",value:function(){return!this._observeIgnoredEvents&&this._ignoreEvent}},{key:"isStopped",value:function(){return this._stopping}},{key:"stop",value:function(e){return!this.isStopped()&&(this._stopping=!0,e.simulated||e.stopPropagation(),!0)}},{key:"isPendingPropagation",value:function(){var e=this.getPreviousPosition();return-1!==e&&e+1<this._position}},{key:"isHandled",value:function(){return this._actionHandled}},{key:"setHandled",value:function(){this._actionHandled=!0}},{key:"_clone",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.copyState,r=new e(this._componentList,{logger:this.logger,logPrefix:this._logPrefix});return(void 0===n||n)&&Object.assign(r,this),r}}]),e}(),ze=function(e){function t(){var e,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length?arguments[1]:void 0;return s(this,t),(e=k(this,h(t).call(this,n,r))).focusTreeId=0,e}return d(t,e),l(t,[{key:"_reset",value:function(){P(h(t.prototype),"_reset",this).call(this),this.keypressEventsToSimulate=[],this.focusTreeId+=1,this.eventPropagator=new Be(this.componentList,{logger:this.logger,logPrefix:this._logPrefix.bind(this)})}},{key:"enableHotKeys",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=3<arguments.length?arguments[3]:void 0;if(this.resetOnNextFocus&&(this._reset(),this.resetOnNextFocus=!1),!this.componentList.containsId(e))return this._addComponent(e,t,n,r),this.focusTreeId}},{key:"updateEnabledHotKeys",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},o=4<arguments.length?arguments[4]:void 0;e===this.focusTreeId&&this.componentList.containsId(t)&&(this.componentList.update(t,n,r,o),this.getKeyHistory().setMaxLength(this.componentList.getLongestSequence()),this._initHandlerResolutionState())}},{key:"disableHotKeys",value:function(e,t){return this.resetOnNextFocus||(this.resetOnNextFocus=!0),this.eventPropagator.isPendingPropagation()}},{key:"handleKeydown",value:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},o=Re(e);if(t!==this.focusTreeId)return this.eventPropagator.ignoreEvent(e),!0;var i=this.eventPropagator.startNewPropagationStep(n,e,o,K.keydown);if(i){var a=this._howToHandleKeyEvent(e,t,n,o,r,K.keydown);if(a===qe){var s=Me(e),u=this.getCurrentCombination();u.isKeyIncluded(o)||u.isEnding()?this._startAndLogNewKeyCombination(o,t,n,s):this._addToAndLogCurrentKeyCombination(o,K.keydown,t,n,s),this._callHandlerIfActionNotHandled(e,o,K.keydown,n,t)}return this._simulateKeyPressForNonPrintableKeys(e,o,t,n,r),this.eventPropagator.finishPropagationStep(),!1}}},{key:"_howToHandleKeyEvent",value:function(e,t,n,r,o,i){if(this.eventPropagator.isFirstPropagationStep()){if(o.ignoreEventsCondition(e)&&this.eventPropagator.ignoreEvent(e))return this._eventIsToBeIgnored(e,n,r,i);this._checkForModifierFlagDiscrepancies(e,r,i)}else if(this.eventPropagator.isIgnoringEvent())return this._eventIsToBeIgnored(e,n,r,i);return qe}},{key:"_eventIsToBeIgnored",value:function(e,t,n,r){return Ne}},{key:"handleKeyPress",value:function(e,t,n,r){var o=Re(e),i=this.getCurrentCombination();if(i.isKeyPressSimulated(o))return this.eventPropagator.ignoreEvent(e),!0;if(this.eventPropagator.startNewPropagationStep(n,e,o,K.keypress)){var a=t!==this.focusTreeId,s=this._howToHandleKeyEvent(e,t,n,o,r,K.keypress);return this.eventPropagator.isFirstPropagationStep(n)&&i.isKeyIncluded(o)&&this._addToAndLogCurrentKeyCombination(o,K.keypress,t,n,Me(e)),s===qe&&this._callHandlerIfActionNotHandled(e,o,K.keypress,n,t),this.eventPropagator.finishPropagationStep(),a}}},{key:"handleKeyUp",value:function(e,t,n,r){var o=Re(e),i=this.getCurrentCombination();if(i.isKeyUpSimulated(o))return this.eventPropagator.ignoreEvent(e),!0;if(this.eventPropagator.startNewPropagationStep(n,e,o,K.keyup)){var a=t!==this.focusTreeId,s=this._howToHandleKeyEvent(e,t,n,o,r,K.keyup);return this.eventPropagator.isFirstPropagationStep(n)&&i.isKeyIncluded(o)&&this._addToAndLogCurrentKeyCombination(o,K.keyup,t,n,Me(e)),s===qe&&this._callHandlerIfActionNotHandled(e,o,K.keyup,n,t),this._simulateKeyUpEventsHiddenByCmd(e,o,t,n,r),this.eventPropagator.finishPropagationStep(),a}}},{key:"closeHangingKeyCombination",value:function(e,t){var n=this.getCurrentCombination();n.isKeyIncluded(e)&&!n.isEventTriggered(e,t)&&n.setKeyState(e,t,ye)}},{key:"_simulateKeyPressForNonPrintableKeys",value:function(e,t,n,r,o){this._handleEventSimulation("keypressEventsToSimulate","simulatePendingKeyPressEvents",this._shouldSimulate(K.keypress,t),{event:e,key:t,focusTreeId:n,componentId:r,options:o})}},{key:"_simulateKeyUpEventsHiddenByCmd",value:function(e,t,n,r,o){var i=this;De(t)&&this.getCurrentCombination().forEachKey((function(t){De(t)||i._handleEventSimulation("keyupEventsToSimulate","simulatePendingKeyUpEvents",i._shouldSimulate(K.keyup,t),{event:e,key:t,focusTreeId:n,componentId:r,options:o})}))}},{key:"_stopEventPropagation",value:function(e,t){this.eventPropagator.stop(e)}},{key:"getEventPropagator",value:function(){return this.eventPropagator}},{key:"_startAndLogNewKeyCombination",value:function(e,t,n,r){this.getKeyHistory().startNewKeyCombination(e,r)}},{key:"_addToAndLogCurrentKeyCombination",value:function(e,t,n,r,o){this.getKeyHistory().addKeyToCurrentCombination(e,t,o)}},{key:"_handleEventSimulation",value:function(e,t,n,r){var o=r.event,i=r.key,a=r.focusTreeId,s=r.componentId,u=r.options;if(n&&O.option("simulateMissingKeyPressEvents")){var l=this._cloneAndMergeEvent(o,{key:i,simulated:!0});this[e].push({event:l,focusTreeId:a,componentId:s,options:u})}(this.componentList.isRoot(s)||this.eventPropagator.isStopped())&&!this.keyEventManager.isGlobalListenersBound()&&this[t]()}},{key:"simulatePendingKeyPressEvents",value:function(){this._simulatePendingKeyEvents("keypressEventsToSimulate","handleKeyPress")}},{key:"simulatePendingKeyUpEvents",value:function(){this._simulatePendingKeyEvents("keyupEventsToSimulate","handleKeyUp")}},{key:"_simulatePendingKeyEvents",value:function(e,t){var n=this;0<this[e].length&&Le.incrementId(),this[e].forEach((function(e){var r=e.event,o=e.focusTreeId,i=e.componentId,a=e.options;n[t](r,o,i,a)})),this[e]=[]}},{key:"_callHandlerIfActionNotHandled",value:function(e,t,n,r,o){this.getCurrentCombination().describe();if(this.componentList.anyActionsForEventType(n))if(this.eventPropagator.isHandled());else{var i=this.eventPropagator.getPreviousPosition(),a=this.componentList.getIndexById(r);this._callClosestMatchingHandler(e,t,n,a,-1===i?0:i)&&this.eventPropagator.setHandled()}}},{key:"_logPrefix",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=I.logIcons,r=I.eventIcons,o=I.componentIcons,i="HotKeys (";if(!1!==t.focusTreeId){var a=ue(t.focusTreeId)?this.focusTreeId:t.focusTreeId;i+="F".concat(a).concat(n[a%n.length],"-")}if(!1!==t.eventId){var s=ue(t.eventId)?Le.getId():t.eventId;i+="E".concat(s).concat(r[s%r.length],"-")}i+="C".concat(e).concat(o[e%o.length]);var u=this.componentList.getIndexById(e);return ue(u)||(i+="-P".concat(u).concat(o[u%o.length],":")),"".concat(i,")")}}]),t}(He);function Ve(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return Array.isArray(e)||D(e)?n.stringifyFirst?!ue(e.find((function(e){return e.toString()===t.toString()}))):-1!==e.indexOf(t):de(e)?x(e,t):n.stringifyFirst?e.toString()===t.toString():e===t}function We(e){return e.replace(/\b\w/g,(function(e){return e.toUpperCase()}))}var Ge=function(e){function t(){var e,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length?arguments[1]:void 0;return s(this,t),(e=k(this,h(t).call(this,n,r))).listenersBound=!1,e.eventOptions={ignoreEventsCondition:O.option("ignoreEventsCondition")},e.listeners={},e}return d(t,e),l(t,[{key:"enableHotKeys",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=3<arguments.length?arguments[3]:void 0,o=4<arguments.length?arguments[4]:void 0;this.eventOptions=o,this._addComponent(e,t,n,r),this._updateDocumentHandlers(),this._initHandlerResolutionState()}},{key:"updateEnabledHotKeys",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=3<arguments.length?arguments[3]:void 0,o=4<arguments.length?arguments[4]:void 0;this.eventOptions=o,this.componentList.update(e,t,n,r),this.getKeyHistory().setMaxLength(this.componentList.getLongestSequence()),this._updateDocumentHandlers(),this._initHandlerResolutionState()}},{key:"disableHotKeys",value:function(e){this.componentList.remove(e),this.getKeyHistory().setMaxLength(this.componentList.getLongestSequence()),this._updateDocumentHandlers(),this._initHandlerResolutionState()}},{key:"_updateDocumentHandlers",value:function(){var e=this,t=this._listenersShouldBeBound();!this.listenersBound&&t?(Object.values(K).forEach((function(t){var n=Te(t);document["on".concat(n)]=function(t){e.keyEventManager["handleGlobal".concat(function(e){return"".concat(We(e.slice(0,3))).concat(We(e.slice(3)))}(n))](t)}})),this.listenersBound=!0):this.listenersBound&&!t&&(Object.values(K).forEach((function(e){var t=Te(e);delete document["on".concat(t)]})),this.listenersBound=!1)}},{key:"_listenersShouldBeBound",value:function(){return this.componentList.any()||this.listeners.keyCombination}},{key:"handleKeydown",value:function(e){var t=Re(e);if(e.repeat&&O.option("ignoreRepeatedEventsWhenKeyHeldDown"))return!0;this._checkForModifierFlagDiscrepancies(e,t,K.keydown);var n=this._howReactAppRespondedTo(e,t,K.keydown);if(n!==Ue||!this.eventOptions.ignoreEventsCondition(e)){if(n!==Ne){var r=Me(e),o=this.getCurrentCombination();o.isKeyIncluded(t)||o.isEnding()?this._startAndLogNewKeyCombination(t,r):this._addToAndLogCurrentKeyCombination(t,K.keydown,r)}Ve([Ne,qe],n)||this._callHandlerIfExists(e,t,K.keydown),this._simulateKeyPressForNonPrintableKeys(e,t)}}},{key:"_howReactAppRespondedTo",value:function(e,t,n){var r=this.keyEventManager.reactAppHistoryWithEvent(t,n);return r===qe||r===Ne||r===Fe||Le.incrementId(),r}},{key:"handleKeyPress",value:function(e){var t=Re(e);if(e.repeat&&O.option("ignoreRepeatedEventsWhenKeyHeldDown"))return!0;var n=this.getCurrentCombination();if(n.isKeyPressSimulated(t))return!0;var r=this._howReactAppRespondedTo(e,t,K.keypress);return n.isKeyIncluded(t)&&this._addToAndLogCurrentKeyCombination(t,K.keypress,Me(e)),r===Ue&&(this.keyEventManager.closeHangingKeyCombination(t,K.keypress),this.eventOptions.ignoreEventsCondition(e))?void 0:void(!Ve([Ne,qe],r)&&this._callHandlerIfExists(e,t,K.keypress))}},{key:"handleKeyUp",value:function(e){var t=Re(e),n=this.getCurrentCombination();if(n.isKeyUpSimulated(t))return!0;var r=this._howReactAppRespondedTo(e,t,K.keyup);n.isKeyIncluded(t)&&this._addToAndLogCurrentKeyCombination(t,K.keyup,Me(e)),r===Ue?(this.keyEventManager.closeHangingKeyCombination(t,K.keyup),this.eventOptions.ignoreEventsCondition(e)||!Ve([Ne,qe],r)&&this._callHandlerIfExists(e,t,K.keyup)):!Ve([Ne,qe],r)&&this._callHandlerIfExists(e,t,K.keyup),this._simulateKeyUpEventsHiddenByCmd(e,t),this.listeners.keyCombination&&this._allKeysAreReleased()&&this.listeners.keyCombination({keys:n.getKeyDictionary(),id:n.describe()})}},{key:"_simulateKeyPressForNonPrintableKeys",value:function(e,t){this.keyEventManager.simulatePendingKeyPressEvents(),this._handleEventSimulation("handleKeyPress",this._shouldSimulate(K.keypress,t),{event:e,key:t})}},{key:"_simulateKeyUpEventsHiddenByCmd",value:function(e,t){var n=this;De(t)&&(this.keyEventManager.simulatePendingKeyUpEvents(),this.getCurrentCombination().forEachKey((function(t){De(t)||n._handleEventSimulation("handleKeyUp",n._shouldSimulate(K.keyup,t),{event:e,key:t})})))}},{key:"_startAndLogNewKeyCombination",value:function(e,t){this.getKeyHistory().startNewKeyCombination(e,t)}},{key:"_addToAndLogCurrentKeyCombination",value:function(e,t,n){this.getKeyHistory().addKeyToCurrentCombination(e,t,n)}},{key:"_handleEventSimulation",value:function(e,t,n){var r=n.event,o=n.key;if(t&&O.option("simulateMissingKeyPressEvents")){var i=this._cloneAndMergeEvent(r,{key:o,simulated:!0});this[e](i)}}},{key:"_callHandlerIfExists",value:function(e,t,n){this.getCurrentCombination().describe();return this.componentList.anyActionsForEventType(n)?void this._callClosestMatchingHandler(e,t,n):void 0}},{key:"_callClosestMatchingHandler",value:function(e,n,r){for(var o=this.componentList.getNewIterator();o.next();)if(P(h(t.prototype),"_callClosestMatchingHandler",this).call(this,e,n,r,o.getPosition(),0))return}},{key:"_stopEventPropagation",value:function(e,t){e.simulated||e.stopPropagation()}},{key:"addKeyCombinationListener",value:function(e){var t=this,n=function(){delete t.listeners.keyCombination};return this.listeners.keyCombination=function(t){e(t),n()},this._updateDocumentHandlers(),n}},{key:"_logPrefix",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=I.eventIcons,r=I.componentIcons,o="HotKeys (GLOBAL";if(!1!==t.eventId){var i=ue(t.eventId)?Le.getId():t.eventId;o="".concat(o,"-E").concat(i).concat(n[i%n.length])}return ue(e)?"".concat(o,"):"):"".concat(o,"-C").concat(e).concat(r[e%r.length],"):")}}]),t}(He);function $e(e){return!ue(e)}var Xe=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};s(this,e),this.logger=t.logger||new I(O.option("logLevel")),this._focusOnlyEventStrategy=new ze({configuration:t,logger:this.logger},this),this._globalEventStrategy=new Ge({configuration:t,logger:this.logger},this),this.mountedComponentsCount=0}return l(e,null,[{key:"getInstance",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.instance||(this.instance=new e(t)),this.instance}},{key:"clear",value:function(){delete this.instance}}]),l(e,[{key:"getApplicationKeyMap",value:function(){return Object.assign(this._globalEventStrategy.getApplicationKeyMap(),this._focusOnlyEventStrategy.getApplicationKeyMap())}},{key:"registerKeyMap",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this._focusOnlyEventStrategy.registerKeyMap(e)}},{key:"reregisterKeyMap",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this._focusOnlyEventStrategy.reregisterKeyMap(e,t)}},{key:"deregisterKeyMap",value:function(e){this._focusOnlyEventStrategy.deregisterKeyMap(e)}},{key:"registerComponentMount",value:function(e,t){return this._incrementComponentCount(),this._focusOnlyEventStrategy.registerComponentMount(e,t)}},{key:"registerComponentUnmount",value:function(){this._decrementComponentCount()}},{key:"_incrementComponentCount",value:function(){var e=this,t=this.mountedComponentsCount;this.mountedComponentsCount+=1,0===t&&1===this.mountedComponentsCount&&(window.onblur=function(){return e._clearKeyHistory()})}},{key:"_decrementComponentCount",value:function(){var e=this.mountedComponentsCount;this.mountedComponentsCount-=1,1===e&&0===this.mountedComponentsCount&&delete window.onblur}},{key:"_clearKeyHistory",value:function(){this._focusOnlyEventStrategy.resetKeyHistory({force:!0}),this._globalEventStrategy.resetKeyHistory({force:!0})}},{key:"registerGlobalKeyMap",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this._globalEventStrategy.registerKeyMap(e)}},{key:"registerGlobalComponentUnmount",value:function(){this._decrementComponentCount()}},{key:"registerGlobalComponentMount",value:function(e,t){return this._incrementComponentCount(),this._globalEventStrategy.registerComponentMount(e,t)}},{key:"reregisterGlobalKeyMap",value:function(e,t){this._globalEventStrategy.reregisterKeyMap(e,t)}},{key:"deregisterGlobalKeyMap",value:function(e){this._globalEventStrategy.deregisterKeyMap(e)}},{key:"addKeyCombinationListener",value:function(e){return this._globalEventStrategy.addKeyCombinationListener(e)}},{key:"enableHotKeys",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=3<arguments.length?arguments[3]:void 0;return this._focusOnlyEventStrategy.enableHotKeys(e,t,n,r)}},{key:"updateEnabledHotKeys",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},o=4<arguments.length?arguments[4]:void 0;return this._focusOnlyEventStrategy.updateEnabledHotKeys(e,t,n,r,o)}},{key:"disableHotKeys",value:function(e,t){return this._focusOnlyEventStrategy.disableHotKeys(e,t)}},{key:"handleKeydown",value:function(e,t,n,r){if($e(t))return this._focusOnlyEventStrategy.handleKeydown(e,t,n,r)}},{key:"handleKeyPress",value:function(e,t,n,r){if($e(t))return this._focusOnlyEventStrategy.handleKeyPress(e,t,n,r)}},{key:"handleKeyUp",value:function(e,t,n,r){if($e(t))return this._focusOnlyEventStrategy.handleKeyUp(e,t,n,r)}},{key:"enableGlobalHotKeys",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=3<arguments.length?arguments[3]:void 0,o=4<arguments.length?arguments[4]:void 0;return this._globalEventStrategy.enableHotKeys(e,t,n,r,o)}},{key:"updateEnabledGlobalHotKeys",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=3<arguments.length?arguments[3]:void 0,o=4<arguments.length?arguments[4]:void 0;return this._globalEventStrategy.updateEnabledHotKeys(e,t,n,r,o)}},{key:"disableGlobalHotKeys",value:function(e){return this._globalEventStrategy.disableHotKeys(e)}},{key:"handleGlobalKeyDown",value:function(e){return this._globalEventStrategy.handleKeydown(e)}},{key:"handleGlobalKeyPress",value:function(e){return this._globalEventStrategy.handleKeyPress(e)}},{key:"handleGlobalKeyUp",value:function(e){return this._globalEventStrategy.handleKeyUp(e)}},{key:"ignoreEvent",value:function(e){this._focusOnlyEventStrategy.getEventPropagator().ignoreEvent(e)}},{key:"observeIgnoredEvents",value:function(e){this._focusOnlyEventStrategy.getEventPropagator().observeIgnoredEvents(e)}},{key:"closeHangingKeyCombination",value:function(e,t){this._focusOnlyEventStrategy.closeHangingKeyCombination(e,t)}},{key:"reactAppHistoryWithEvent",value:function(e,t){var n=this._focusOnlyEventStrategy.eventPropagator.getPreviousPropagation();return n.isForKey(e)&&n.isForEventType(t)?n.isHandled()?qe:n.isIgnoringEvent()?Ne:Fe:Ue}},{key:"simulatePendingKeyPressEvents",value:function(){this._focusOnlyEventStrategy.simulatePendingKeyPressEvents()}},{key:"simulatePendingKeyUpEvents",value:function(){this._focusOnlyEventStrategy.simulatePendingKeyUpEvents()}},{key:"isGlobalListenersBound",value:function(){return this._globalEventStrategy.listenersBound}}]),e}();function Je(e,t){var n=t.deprecatedAPI,r=n.contextTypes,o=n.childContextTypes,a=t.newAPI.contextType;if("undefined"==typeof i.createContext)e.contextTypes=r,e.childContextTypes=o,e.prototype.getChildContext=function(){return this._childContext};else{var s=i.createContext(a);e.contextType=s,e.prototype._originalRender=e.prototype.render,e.prototype.render=function(){var e=this._originalRender();return e?i.createElement(s.Provider,{value:this._childContext},e):null}}return e}var Ye=function(e){function t(){return s(this,t),k(this,h(t).apply(this,arguments))}return d(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.hotKeys,n=e.innerRef,r=e.component,o=_(e,["hotKeys","innerRef","component"]),a=r||O.option("defaultComponent");return i.createElement(a,f({},t,{ref:n},o))}}]),t}(i.Component),Ze=function(e){function t(e,t){return f({},a[e]||{},t[e]||{})}function n(e){return t("handlers",e)}function r(e){return t("keyMap",e)}var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},u=function(t){function o(e){var t;return s(this,o),(t=k(this,h(o).call(this,e)))._handleFocus=t._handleFocus.bind(b(b(t))),t._handleBlur=t._handleBlur.bind(b(b(t))),t._handleKeyDown=t._handleKeyDown.bind(b(b(t))),t._handleKeyPress=t._handleKeyPress.bind(b(b(t))),t._handleKeyUp=t._handleKeyUp.bind(b(b(t))),t._componentIsFocused=t._componentIsFocused.bind(b(b(t))),t._id=Xe.getInstance().registerKeyMap(e.keyMap),t._childContext={hotKeysParentId:t._id},t}return d(o,t),l(o,[{key:"render",value:function(){var t=this.props,n=(t.keyMap,t.handlers,t.allowChanges,t.root,_(t,["keyMap","handlers","allowChanges","root"])),r={onFocus:this._wrapFunction("onFocus",this._handleFocus),onBlur:this._wrapFunction("onBlur",this._handleBlur),tabIndex:O.option("defaultTabIndex")};return this._shouldBindKeyListeners()&&(r.onKeyDown=this._handleKeyDown,r.onKeyPress=this._handleKeyPress,r.onKeyUp=this._handleKeyUp),i.createElement(e,y({hotKeys:r},n))}},{key:"_shouldBindKeyListeners",value:function(){var e=r(this.props);return!he(e)||this.props.root||O.option("enableHardSequences")&&this._handlersIncludeHardSequences(e,n(this.props))}},{key:"_handlersIncludeHardSequences",value:function(e,t){return Object.keys(t).some((function(t){return!e[t]&&ie.isValidKeySerialization(t)}))}},{key:"_wrapFunction",value:function(e,t){var n=this;return"function"==typeof this.props[e]?function(r){n.props[e](r),t(r)}:t}},{key:"_focusTreeIdsPush",value:function(e){this._focusTreeIds||(this._focusTreeIds=[]),this._focusTreeIds.push(e)}},{key:"_focusTreeIdsShift",value:function(){this._focusTreeIds&&this._focusTreeIds.shift()}},{key:"_getFocusTreeId",value:function(){if(this._focusTreeIds)return this._focusTreeIds[0]}},{key:"componentDidUpdate",value:function(){var e=Xe.getInstance();if(e.reregisterKeyMap(this._id,this.props.keyMap),this._componentIsFocused()&&(this.props.allowChanges||!O.option("ignoreKeymapAndHandlerChangesByDefault"))){var t=this.props,n=t.keyMap,r=t.handlers;e.updateEnabledHotKeys(this._getFocusTreeId(),this._id,n,r,this._getComponentOptions())}}},{key:"_componentIsFocused",value:function(){return!0===this._focused}},{key:"componentDidMount",value:function(){var e=Xe.getInstance(),t=this.context.hotKeysParentId;e.registerComponentMount(this._id,t)}},{key:"_handleFocus",value:function(){var e;this.props.onFocus&&(e=this.props).onFocus.apply(e,arguments);var t=Xe.getInstance().enableHotKeys(this._id,r(this.props),n(this.props),this._getComponentOptions());ue(t)||this._focusTreeIdsPush(t),this._focused=!0}},{key:"componentWillUnmount",value:function(){var e=Xe.getInstance();e.deregisterKeyMap(this._id),e.registerComponentUnmount(),this._handleBlur()}},{key:"_handleBlur",value:function(){var e;this.props.onBlur&&(e=this.props).onBlur.apply(e,arguments);var t=Xe.getInstance().disableHotKeys(this._getFocusTreeId(),this._id);t||this._focusTreeIdsShift(),this._focused=!1}},{key:"_handleKeyDown",value:function(e){Xe.getInstance().handleKeydown(e,this._getFocusTreeId(),this._id,this._getEventOptions())&&this._focusTreeIdsShift()}},{key:"_handleKeyPress",value:function(e){Xe.getInstance().handleKeyPress(e,this._getFocusTreeId(),this._id,this._getEventOptions())&&this._focusTreeIdsShift()}},{key:"_handleKeyUp",value:function(e){Xe.getInstance().handleKeyUp(e,this._getFocusTreeId(),this._id,this._getEventOptions())&&this._focusTreeIdsShift()}},{key:"_getComponentOptions",value:function(){return{defaultKeyEvent:O.option("defaultKeyEvent")}}},{key:"_getEventOptions",value:function(){return{ignoreEventsCondition:O.option("ignoreEventsCondition")}}}]),o}(i.PureComponent);return c(u,"propTypes",{keyMap:o().object,handlers:o().object,onFocus:o().func,onBlur:o().func,allowChanges:o().bool,root:o().bool}),Je(u,{deprecatedAPI:{contextTypes:{hotKeysParentId:o().number},childContextTypes:{hotKeysParentId:o().number}},newAPI:{contextType:{hotKeysParentId:void 0}}})}(Ye);Ze.propTypes={innerRef:o().oneOfType([o().object,o().func])};var Qe=function(e){function t(e){var n;return s(this,t),(n=k(this,h(t).call(this,e)))._id=Xe.getInstance().registerGlobalKeyMap(e.keyMap),n._childContext={globalHotKeysParentId:n._id},n}return d(t,e),l(t,[{key:"render",value:function(){return this.props.children||null}},{key:"componentDidUpdate",value:function(){var e=Xe.getInstance();if(e.reregisterGlobalKeyMap(this._id,this.props.keyMap),this.props.allowChanges||!O.option("ignoreKeymapAndHandlerChangesByDefault")){var t=this.props,n=t.keyMap,r=t.handlers;e.updateEnabledGlobalHotKeys(this._id,n,r,this._getComponentOptions(),this._getEventOptions())}}},{key:"componentDidMount",value:function(){var e=this.props,t=e.keyMap,n=e.handlers,r=this.context.globalHotKeysParentId,o=Xe.getInstance();o.registerGlobalComponentMount(this._id,r),o.enableGlobalHotKeys(this._id,t,n,this._getComponentOptions(),this._getEventOptions())}},{key:"componentWillUnmount",value:function(){var e=Xe.getInstance();e.deregisterGlobalKeyMap(this._id),e.disableGlobalHotKeys(this._id),e.registerGlobalComponentUnmount()}},{key:"_getComponentOptions",value:function(){return{defaultKeyEvent:O.option("defaultKeyEvent")}}},{key:"_getEventOptions",value:function(){return{ignoreEventsCondition:O.option("ignoreEventsCondition")}}}]),t}(i.Component);c(Qe,"propTypes",{keyMap:o().object,handlers:o().object,allowChanges:o().bool});var et=Je(Qe,{deprecatedAPI:{contextTypes:{globalHotKeysParentId:o().number},childContextTypes:{globalHotKeysParentId:o().number}},newAPI:{contextType:{globalHotKeysParentId:void 0}}});function tt(e){var t,n,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{only:[],except:[]},a=2<arguments.length?arguments[2]:void 0;return n=t=function(t){function n(e){var t;return s(this,n),(t=k(this,h(n).call(this,e)))._handleKeyEvent=t._handleKeyEvent.bind(b(b(t))),t._reloadDictionaries=t._reloadDictionaries.bind(b(b(t))),t}return d(n,t),l(n,[{key:"render",value:function(){var t=this.props,n=(t.only,t.except,_(t,["only","except"])),r={onKeyDown:this._handleKeyEvent,onKeyPress:this._handleKeyEvent,onKeyUp:this._handleKeyEvent,onFocus:this._reloadDictionaries};return i.createElement(e,y({hotKeys:r},n))}},{key:"_reloadDictionaries",value:function(){var e=this.props,t=e.only,n=e.except;this._onlyDict=nt(t),this._exceptDict=nt(n)}},{key:"_shouldIgnoreEvent",value:function(e){var t=e.key;return he(this._onlyDict)?!!he(this._exceptDict)||!x(this._exceptDict,t):he(this._exceptDict)?x(this._onlyDict,t):x(this._onlyDict,t)&&!x(this._exceptDict,t)}},{key:"_handleKeyEvent",value:function(e){this._shouldIgnoreEvent(e)&&Xe.getInstance()[a](e)}}]),n}(i.PureComponent),c(t,"propTypes",{only:o().oneOfType([o().string,o().arrayOf(o().string)]),except:o().oneOfType([o().string,o().arrayOf(o().string)])}),c(t,"defaultProps",r),n}function nt(e){return me(e).reduce((function(e,t){var n=q(t);if(!W(n))throw new G(t);return[oe,re,A,j,ee,Q].forEach((function(t){e[t(n)]=!0})),e}),{})}var rt=function(e){function t(){return s(this,t),k(this,h(t).apply(this,arguments))}return d(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.hotKeys,n=_(e,["hotKeys"]),r=n.component||O.option("defaultComponent");return i.createElement(r,f({},t,n))}}]),t}(i.Component),ot=(tt(rt,{},"ignoreEvent"),function(e){function t(){return s(this,t),k(this,h(t).apply(this,arguments))}return d(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.hotKeys,n=_(e,["hotKeys"]),r=n.component||O.option("defaultComponent");return i.createElement(r,f({},t,n))}}]),t}(i.Component));tt(ot,{},"observeIgnoredEvents")},34546:function(e,t,n){"use strict";e.exports=n(81545)},72056:function(e,t,n){"use strict";function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(47313)),a=(o=n(46939))&&o.__esModule?o:{default:o},s=n(32116),u=n(38222);function l(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(s,e);var t,n,r,o=h(s);function s(){var e;y(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return m(v(e=o.call.apply(o,[this].concat(n))),"mounted",!1),m(v(e),"isReady",!1),m(v(e),"isPlaying",!1),m(v(e),"isLoading",!0),m(v(e),"loadOnReady",null),m(v(e),"startOnPlay",!0),m(v(e),"seekOnPlay",null),m(v(e),"onDurationCalled",!1),m(v(e),"handlePlayerMount",(function(t){e.player||(e.player=t,e.player.load(e.props.url),e.progress())})),m(v(e),"getInternalPlayer",(function(t){return e.player?e.player[t]:null})),m(v(e),"progress",(function(){if(e.props.url&&e.player&&e.isReady){var t=e.getCurrentTime()||0,n=e.getSecondsLoaded(),r=e.getDuration();if(r){var o={playedSeconds:t,played:t/r};null!==n&&(o.loadedSeconds=n,o.loaded=n/r),o.playedSeconds===e.prevPlayed&&o.loadedSeconds===e.prevLoaded||e.props.onProgress(o),e.prevPlayed=o.playedSeconds,e.prevLoaded=o.loadedSeconds}}e.progressTimeout=setTimeout(e.progress,e.props.progressFrequency||e.props.progressInterval)})),m(v(e),"handleReady",(function(){if(e.mounted){e.isReady=!0,e.isLoading=!1;var t=e.props,n=t.onReady,r=t.playing,o=t.volume,i=t.muted;n(),i||null===o||e.player.setVolume(o),e.loadOnReady?(e.player.load(e.loadOnReady,!0),e.loadOnReady=null):r&&e.player.play(),e.handleDurationCheck()}})),m(v(e),"handlePlay",(function(){e.isPlaying=!0,e.isLoading=!1;var t=e.props,n=t.onStart,r=t.onPlay,o=t.playbackRate;e.startOnPlay&&(e.player.setPlaybackRate&&1!==o&&e.player.setPlaybackRate(o),n(),e.startOnPlay=!1),r(),e.seekOnPlay&&(e.seekTo(e.seekOnPlay),e.seekOnPlay=null),e.handleDurationCheck()})),m(v(e),"handlePause",(function(t){e.isPlaying=!1,e.isLoading||e.props.onPause(t)})),m(v(e),"handleEnded",(function(){var t=e.props,n=t.activePlayer,r=t.loop,o=t.onEnded;n.loopOnEnded&&r&&e.seekTo(0),r||(e.isPlaying=!1,o())})),m(v(e),"handleError",(function(){var t;e.isLoading=!1,(t=e.props).onError.apply(t,arguments)})),m(v(e),"handleDurationCheck",(function(){clearTimeout(e.durationCheckTimeout);var t=e.getDuration();t?e.onDurationCalled||(e.props.onDuration(t),e.onDurationCalled=!0):e.durationCheckTimeout=setTimeout(e.handleDurationCheck,100)})),m(v(e),"handleLoaded",(function(){e.isLoading=!1})),e}return t=s,n=[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}},{key:"componentDidUpdate",value:function(e){var t=this;if(this.player){var n=this.props,r=n.url,o=n.playing,i=n.volume,s=n.muted,l=n.playbackRate,c=n.pip,y=n.loop,f=n.activePlayer,d=n.disableDeferredLoading;if(!(0,a.default)(e.url,r)){if(this.isLoading&&!f.forceLoad&&!d&&!(0,u.isMediaStream)(r))return console.warn("ReactPlayer: the attempt to load ".concat(r," is being deferred until the player has loaded")),void(this.loadOnReady=r);this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(r,this.isReady)}e.playing||!o||this.isPlaying||this.player.play(),e.playing&&!o&&this.isPlaying&&this.player.pause(),!e.pip&&c&&this.player.enablePIP&&this.player.enablePIP(),e.pip&&!c&&this.player.disablePIP&&this.player.disablePIP(),e.volume!==i&&null!==i&&this.player.setVolume(i),e.muted!==s&&(s?this.player.mute():(this.player.unmute(),null!==i&&setTimeout((function(){return t.player.setVolume(i)})))),e.playbackRate!==l&&this.player.setPlaybackRate&&this.player.setPlaybackRate(l),e.loop!==y&&this.player.setLoop&&this.player.setLoop(y)}}},{key:"getDuration",value:function(){return this.isReady?this.player.getDuration():null}},{key:"getCurrentTime",value:function(){return this.isReady?this.player.getCurrentTime():null}},{key:"getSecondsLoaded",value:function(){return this.isReady?this.player.getSecondsLoaded():null}},{key:"seekTo",value:function(e,t){var n=this;if(this.isReady){if(t?"fraction"===t:e>0&&e<1){var r=this.player.getDuration();return r?void this.player.seekTo(r*e):void console.warn("ReactPlayer: could not seek using fraction \u2013\xa0duration not yet available")}this.player.seekTo(e)}else 0!==e&&(this.seekOnPlay=e,setTimeout((function(){n.seekOnPlay=null}),5e3))}},{key:"render",value:function(){var e=this.props.activePlayer;return e?i.default.createElement(e,c({},this.props,{onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError})):null}}],n&&f(t.prototype,n),r&&f(t,r),s}(i.Component);t.default=_,m(_,"displayName","Player"),m(_,"propTypes",s.propTypes),m(_,"defaultProps",s.defaultProps)},16555:function(e,t,n){"use strict";function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.createReactPlayer=void 0;var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(47313)),i=y(n(33406)),a=y(n(16912)),s=y(n(46939)),u=n(32116),l=n(38222),c=y(n(72056));function y(e){return e&&e.__esModule?e:{default:e}}function f(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(){return p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}function v(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E(e);if(t){var o=E(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return P(this,n)}}function P(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?C(e):t}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=(0,o.lazy)((function(){return n.e(7664).then(n.bind(n,81394))})),O="undefined"!==typeof window&&window.document,I="undefined"!==typeof n.g&&n.g.window&&n.g.window.document,K=Object.keys(u.propTypes),T=O||I?o.Suspense:function(){return null},M=[];t.createReactPlayer=function(e,t){var n,r;return r=n=function(n){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(g,n);var r,y,f,d=k(g);function g(){var n;m(this,g);for(var r=arguments.length,s=new Array(r),y=0;y<r;y++)s[y]=arguments[y];return w(C(n=d.call.apply(d,[this].concat(s))),"state",{showPreview:!!n.props.light}),w(C(n),"references",{wrapper:function(e){n.wrapper=e},player:function(e){n.player=e}}),w(C(n),"handleClickPreview",(function(e){n.setState({showPreview:!1}),n.props.onClickPreview(e)})),w(C(n),"showPreview",(function(){n.setState({showPreview:!0})})),w(C(n),"getDuration",(function(){return n.player?n.player.getDuration():null})),w(C(n),"getCurrentTime",(function(){return n.player?n.player.getCurrentTime():null})),w(C(n),"getSecondsLoaded",(function(){return n.player?n.player.getSecondsLoaded():null})),w(C(n),"getInternalPlayer",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"player";return n.player?n.player.getInternalPlayer(e):null})),w(C(n),"seekTo",(function(e,t){if(!n.player)return null;n.player.seekTo(e,t)})),w(C(n),"handleReady",(function(){n.props.onReady(C(n))})),w(C(n),"getActivePlayer",(0,a.default)((function(n){for(var r=0,o=[].concat(M,v(e));r<o.length;r++){var i=o[r];if(i.canPlay(n))return i}return t||null}))),w(C(n),"getConfig",(0,a.default)((function(e,t){var r=n.props.config;return i.default.all([u.defaultProps.config,u.defaultProps.config[t]||{},r,r[t]||{}])}))),w(C(n),"getAttributes",(0,a.default)((function(e){return(0,l.omit)(n.props,K)}))),w(C(n),"renderActivePlayer",(function(e){if(!e)return null;var t=n.getActivePlayer(e);if(!t)return null;var r=n.getConfig(e,t.key);return o.default.createElement(c.default,p({},n.props,{key:t.key,ref:n.references.player,config:r,activePlayer:t.lazyPlayer||t,onReady:n.handleReady}))})),n}return r=g,y=[{key:"shouldComponentUpdate",value:function(e,t){return!(0,s.default)(this.props,e)||!(0,s.default)(this.state,t)}},{key:"componentDidUpdate",value:function(e){var t=this.props.light;!e.light&&t&&this.setState({showPreview:!0}),e.light&&!t&&this.setState({showPreview:!1})}},{key:"renderPreview",value:function(e){if(!e)return null;var t=this.props,n=t.light,r=t.playIcon,i=t.previewTabIndex,a=t.oEmbedUrl;return o.default.createElement(S,{url:e,light:n,playIcon:r,previewTabIndex:i,oEmbedUrl:a,onClick:this.handleClickPreview})}},{key:"render",value:function(){var e=this.props,t=e.url,n=e.style,r=e.width,i=e.height,a=e.fallback,s=e.wrapper,u=this.state.showPreview,l=this.getAttributes(t);return o.default.createElement(s,p({ref:this.references.wrapper,style:h(h({},n),{},{width:r,height:i})},l),o.default.createElement(T,{fallback:a},u?this.renderPreview(t):this.renderActivePlayer(t)))}}],y&&_(r.prototype,y),f&&_(r,f),g}(o.Component),w(n,"displayName","ReactPlayer"),w(n,"propTypes",u.propTypes),w(n,"defaultProps",u.defaultProps),w(n,"addCustomPlayer",(function(e){M.push(e)})),w(n,"removeCustomPlayers",(function(){M.length=0})),w(n,"canPlay",(function(t){for(var n=0,r=[].concat(M,v(e));n<r.length;n++){if(r[n].canPlay(t))return!0}return!1})),w(n,"canEnablePIP",(function(t){for(var n=0,r=[].concat(M,v(e));n<r.length;n++){var o=r[n];if(o.canEnablePIP&&o.canEnablePIP(t))return!0}return!1})),r}},40689:function(e,t,n){"use strict";t.Z=void 0;var r,o=(r=n(5487))&&r.__esModule?r:{default:r},i=n(16555);var a=o.default[o.default.length-1],s=(0,i.createReactPlayer)(o.default,a);t.Z=s},92494:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canPlay=t.FLV_EXTENSIONS=t.DASH_EXTENSIONS=t.HLS_EXTENSIONS=t.VIDEO_EXTENSIONS=t.AUDIO_EXTENSIONS=t.MATCH_URL_KALTURA=t.MATCH_URL_VIDYARD=t.MATCH_URL_MIXCLOUD=t.MATCH_URL_DAILYMOTION=t.MATCH_URL_TWITCH_CHANNEL=t.MATCH_URL_TWITCH_VIDEO=t.MATCH_URL_WISTIA=t.MATCH_URL_STREAMABLE=t.MATCH_URL_FACEBOOK_WATCH=t.MATCH_URL_FACEBOOK=t.MATCH_URL_VIMEO=t.MATCH_URL_SOUNDCLOUD=t.MATCH_URL_YOUTUBE=void 0;var r=n(38222);function o(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var a=/(?:youtu\.be\/|youtube(?:-nocookie)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//;t.MATCH_URL_YOUTUBE=a;var s=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/;t.MATCH_URL_SOUNDCLOUD=s;var u=/vimeo\.com\/(?!progressive_redirect).+/;t.MATCH_URL_VIMEO=u;var l=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/;t.MATCH_URL_FACEBOOK=l;var c=/^https?:\/\/fb\.watch\/.+$/;t.MATCH_URL_FACEBOOK_WATCH=c;var y=/streamable\.com\/([a-z0-9]+)$/;t.MATCH_URL_STREAMABLE=y;var f=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?(.*)$/;t.MATCH_URL_WISTIA=f;var d=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/;t.MATCH_URL_TWITCH_VIDEO=d;var h=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/;t.MATCH_URL_TWITCH_CHANNEL=h;var p=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?$/;t.MATCH_URL_DAILYMOTION=p;var v=/mixcloud\.com\/([^/]+\/[^/]+)/;t.MATCH_URL_MIXCLOUD=v;var g=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/;t.MATCH_URL_VIDYARD=g;var m=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/;t.MATCH_URL_KALTURA=m;var _=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i;t.AUDIO_EXTENSIONS=_;var b=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i;t.VIDEO_EXTENSIONS=b;var k=/\.(m3u8)($|\?)/i;t.HLS_EXTENSIONS=k;var P=/\.(mpd)($|\?)/i;t.DASH_EXTENSIONS=P;var C=/\.(flv)($|\?)/i;t.FLV_EXTENSIONS=C;var E={youtube:function(e){return e instanceof Array?e.every((function(e){return a.test(e)})):a.test(e)},soundcloud:function(e){return s.test(e)&&!_.test(e)},vimeo:function(e){return u.test(e)&&!b.test(e)&&!k.test(e)},facebook:function(e){return l.test(e)||c.test(e)},streamable:function(e){return y.test(e)},wistia:function(e){return f.test(e)},twitch:function(e){return d.test(e)||h.test(e)},dailymotion:function(e){return p.test(e)},mixcloud:function(e){return v.test(e)},vidyard:function(e){return g.test(e)},kaltura:function(e){return m.test(e)},file:function e(t){if(t instanceof Array){var n,i=o(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if("string"===typeof a&&e(a))return!0;if(e(a.src))return!0}}catch(s){i.e(s)}finally{i.f()}return!1}return!(!(0,r.isMediaStream)(t)&&!(0,r.isBlobUrl)(t))||(_.test(t)||b.test(t)||k.test(t)||P.test(t)||C.test(t))}};t.canPlay=E},5487:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(47313),o=n(38222),i=n(92494),a=[{key:"youtube",name:"YouTube",canPlay:i.canPlay.youtube,lazyPlayer:(0,r.lazy)((function(){return n.e(4439).then(n.bind(n,56110))}))},{key:"soundcloud",name:"SoundCloud",canPlay:i.canPlay.soundcloud,lazyPlayer:(0,r.lazy)((function(){return n.e(6125).then(n.bind(n,22808))}))},{key:"vimeo",name:"Vimeo",canPlay:i.canPlay.vimeo,lazyPlayer:(0,r.lazy)((function(){return n.e(3743).then(n.bind(n,18223))}))},{key:"facebook",name:"Facebook",canPlay:i.canPlay.facebook,lazyPlayer:(0,r.lazy)((function(){return n.e(2121).then(n.bind(n,52951))}))},{key:"streamable",name:"Streamable",canPlay:i.canPlay.streamable,lazyPlayer:(0,r.lazy)((function(){return n.e(2546).then(n.bind(n,5135))}))},{key:"wistia",name:"Wistia",canPlay:i.canPlay.wistia,lazyPlayer:(0,r.lazy)((function(){return n.e(8055).then(n.bind(n,81608))}))},{key:"twitch",name:"Twitch",canPlay:i.canPlay.twitch,lazyPlayer:(0,r.lazy)((function(){return n.e(6216).then(n.bind(n,3594))}))},{key:"dailymotion",name:"DailyMotion",canPlay:i.canPlay.dailymotion,lazyPlayer:(0,r.lazy)((function(){return n.e(7596).then(n.bind(n,53855))}))},{key:"mixcloud",name:"Mixcloud",canPlay:i.canPlay.mixcloud,lazyPlayer:(0,r.lazy)((function(){return n.e(4667).then(n.bind(n,89569))}))},{key:"vidyard",name:"Vidyard",canPlay:i.canPlay.vidyard,lazyPlayer:(0,r.lazy)((function(){return n.e(8888).then(n.bind(n,43413))}))},{key:"kaltura",name:"Kaltura",canPlay:i.canPlay.kaltura,lazyPlayer:(0,r.lazy)((function(){return n.e(261).then(n.bind(n,63483))}))},{key:"file",name:"FilePlayer",canPlay:i.canPlay.file,canEnablePIP:function(e){return i.canPlay.file(e)&&(document.pictureInPictureEnabled||(0,o.supportsWebKitPresentationMode)())&&!i.AUDIO_EXTENSIONS.test(e)},lazyPlayer:(0,r.lazy)((function(){return n.e(6011).then(n.bind(n,69937))}))}];t.default=a},32116:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultProps=t.propTypes=void 0;var r,o=(r=n(75192))&&r.__esModule?r:{default:r};var i=o.default.string,a=o.default.bool,s=o.default.number,u=o.default.array,l=o.default.oneOfType,c=o.default.shape,y=o.default.object,f=o.default.func,d=o.default.node,h={url:l([i,u,y]),playing:a,loop:a,controls:a,volume:s,muted:a,playbackRate:s,width:l([i,s]),height:l([i,s]),style:y,progressInterval:s,playsinline:a,pip:a,stopOnUnmount:a,light:l([a,i]),playIcon:d,previewTabIndex:s,fallback:d,oEmbedUrl:i,wrapper:l([i,f,c({render:f.isRequired})]),config:c({soundcloud:c({options:y}),youtube:c({playerVars:y,embedOptions:y,onUnstarted:f}),facebook:c({appId:i,version:i,playerId:i,attributes:y}),dailymotion:c({params:y}),vimeo:c({playerOptions:y,title:i}),file:c({attributes:y,tracks:u,forceVideo:a,forceAudio:a,forceHLS:a,forceDASH:a,forceFLV:a,hlsOptions:y,hlsVersion:i,dashVersion:i,flvVersion:i}),wistia:c({options:y,playerId:i,customControls:u}),mixcloud:c({options:y}),twitch:c({options:y,playerId:i}),vidyard:c({options:y})}),onReady:f,onStart:f,onPlay:f,onPause:f,onBuffer:f,onBufferEnd:f,onEnded:f,onError:f,onDuration:f,onSeek:f,onPlaybackRateChange:f,onProgress:f,onClickPreview:f,onEnablePIP:f,onDisablePIP:f};t.propTypes=h;var p=function(){},v={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,fallback:null,wrapper:"div",previewTabIndex:0,oEmbedUrl:"https://noembed.com/embed?url={url}",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:p},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},title:null},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"1.1.4",dashVersion:"3.1.3",flvVersion:"1.5.0"},wistia:{options:{},playerId:null,customControls:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:p,onStart:p,onPlay:p,onPause:p,onBuffer:p,onBufferEnd:p,onEnded:p,onError:p,onDuration:p,onSeek:p,onPlaybackRateChange:p,onProgress:p,onClickPreview:p,onEnablePIP:p,onDisablePIP:p};t.defaultProps=v},38222:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseStartTime=function(e){return f(e,u)},t.parseEndTime=function(e){return f(e,l)},t.randomString=function(){return Math.random().toString(36).substr(2,5)},t.queryString=function(e){return Object.keys(e).map((function(t){return"".concat(t,"=").concat(e[t])})).join("&")},t.getSDK=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return!0},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r.default,a=d(t);if(a&&o(a))return Promise.resolve(a);return new Promise((function(r,o){if(h[e])h[e].push({resolve:r,reject:o});else{h[e]=[{resolve:r,reject:o}];var a=function(t){h[e].forEach((function(e){return e.resolve(t)}))};if(n){var s=window[n];window[n]=function(){s&&s(),a(d(t))}}i(e,(function(r){r?(h[e].forEach((function(e){return e.reject(r)})),h[e]=null):n||a(d(t))}))}}))},t.getConfig=function(e,t){return(0,o.default)(t.config,e.config)},t.omit=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(var i=(t=[]).concat.apply(t,r),a={},s=Object.keys(e),u=0,l=s;u<l.length;u++){var c=l[u];-1===i.indexOf(c)&&(a[c]=e[c])}return a},t.callPlayer=function(e){var t;if(!this.player||!this.player[e]){var n="ReactPlayer: ".concat(this.constructor.displayName," player could not call %c").concat(e,"%c \u2013 ");return this.player?this.player[e]||(n+="The method was not available"):n+="The player was not available",console.warn(n,"font-weight: bold",""),null}for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return(t=this.player)[e].apply(t,o)},t.isMediaStream=function(e){return"undefined"!==typeof window&&"undefined"!==typeof window.MediaStream&&e instanceof window.MediaStream},t.isBlobUrl=function(e){return/^blob:/.test(e)},t.supportsWebKitPresentationMode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.createElement("video"),t=!1===/iPhone|iPod/.test(navigator.userAgent);return e.webkitSupportsPresentationMode&&"function"===typeof e.webkitSetPresentationMode&&t};var r=i(n(48630)),o=i(n(33406));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){o=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u=/[?&#](?:start|t)=([0-9hms]+)/,l=/[?&#]end=([0-9hms]+)/,c=/(\d+)(h|m|s)/g,y=/^\d+$/;function f(e,t){if(!(e instanceof Array)){var n=e.match(t);if(n){var r=n[1];if(r.match(c))return function(e){var t=0,n=c.exec(e);for(;null!==n;){var r=a(n,3),o=r[1],i=r[2];"h"===i&&(t+=60*parseInt(o,10)*60),"m"===i&&(t+=60*parseInt(o,10)),"s"===i&&(t+=parseInt(o,10)),n=c.exec(e)}return t}(r);if(y.test(r))return parseInt(r)}}}function d(e){return window[e]?window[e]:window.exports&&window.exports[e]?window.exports[e]:window.module&&window.module.exports&&window.module.exports[e]?window.module.exports[e]:null}var h={}},93318:function(e,t,n){function r(e){var t;if(e.options.indentation||e.options.lineSeparator)for(e.content+=e.options.lineSeparator,t=0;t<e.level;t++)e.content+=e.options.indentation}function o(e,t){e.content+=t}function i(e,t,n){if("string"===typeof e.content)!function(e,t,n){n||(e.content=e.content.trim());e.content.length>0&&(!n&&t.content.length>0&&r(t),o(t,e.content))}(e,t,n);else if("Element"===e.type)!function(e,t,n){!n&&t.content.length>0&&r(t);if(o(t,"<"+e.name),a(t,e.attributes),null===e.children){var s=t.options.whiteSpaceAtEndOfSelfclosingTag?" />":"/>";o(t,s)}else if(0===e.children.length)o(t,"></"+e.name+">");else{o(t,">"),t.level++;var u="preserve"===e.attributes["xml:space"];if(!u&&t.options.collapseContent){var l=!1,c=!1,y=!1;e.children.forEach((function(t,n){"Text"===t.type?(t.content.includes("\n")?(c=!0,t.content=t.content.trim()):0!==n&&n!==e.children.length-1||0===t.content.trim().length&&(t.content=""),t.content.length>0&&(l=!0)):"CDATA"===t.type?l=!0:y=!0})),!l||y&&c||(u=!0)}e.children.forEach((function(e){i(e,t,n||u,t.options)})),t.level--,n||u||r(t),o(t,"</"+e.name+">")}}(e,t,n);else{if("ProcessingInstruction"!==e.type)throw new Error("Unknown node type: "+e.type);s(e,t)}}function a(e,t){Object.keys(t).forEach((function(n){var r=t[n].replace(/"/g,"&quot;");o(e," "+n+'="'+r+'"')}))}function s(e,t){t.content.length>0&&r(t),o(t,"<?"+e.name),a(t,e.attributes),o(t,"?>")}e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.indentation="indentation"in t?t.indentation:"    ",t.collapseContent=!0===t.collapseContent,t.lineSeparator="lineSeparator"in t?t.lineSeparator:"\r\n",t.whiteSpaceAtEndOfSelfclosingTag=!!t.whiteSpaceAtEndOfSelfclosingTag;var r=n(71947),o=r(e,{filter:t.filter}),a={content:"",level:0,options:t};return o.declaration&&s(o.declaration,a),o.children.forEach((function(e){i(e,a,!1)})),a.content.replace(/\r\n/g,"\n").replace(/\n/g,t.lineSeparator)}},71947:function(e){e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};function n(){return s()||y()||c()||l()}function r(){return h(/\s*/),s(!0)||c()||u()||a(!1)}function o(){for(var e,t=i(),n=[],o=r();o;){if("Element"===o.node.type){if(e)throw new Error("Found multiple root nodes");e=o.node}o.excluded||n.push(o.node),o=r()}if(!e)throw new Error("Failed to parse XML");return{declaration:t?t.node:null,root:e,children:n}}function i(){return a(!0)}function a(e){var n=h(e?/^<\?(xml)\s*/:/^<\?([\w-:.]+)\s*/);if(n){for(var r={name:n[1],type:"ProcessingInstruction",attributes:{}};!p()&&!v("?>");){var o=f();if(!o)return r;r.attributes[o.name]=o.value}return h(/\?>/),{excluded:!e&&!1===t.filter(r),node:r}}}function s(e){var r=h(/^<([\w-:.]+)\s*/);if(r){for(var o={type:"Element",name:r[1],attributes:{},children:[]};!(p()||v(">")||v("?>")||v("/>"));){var i=f();if(!i)return o;o.attributes[i.name]=i.value}var a=!e&&!1===t.filter(o);if(h(/^\s*\/>/))return o.children=null,{excluded:a,node:o};if(h(/\??>/),!a)for(var s=n();s;)s.excluded||o.children.push(s.node),s=n();return h(/^<\/[\w-:.]+>/),{excluded:a,node:o}}}function u(){var e=h(/^<!DOCTYPE\s+[^>]*>/);if(e){var n={type:"DocumentType",content:e[0]};return{excluded:!1===t.filter(n),node:n}}}function l(){if(e.startsWith("<![CDATA[")){var n=e.indexOf("]]>");if(n>-1){var r=n+3,o={type:"CDATA",content:e.substring(0,r)};return e=e.slice(r),{excluded:!1===t.filter(o),node:o}}}}function c(){var e=h(/^<!--[\s\S]*?-->/);if(e){var n={type:"Comment",content:e[0]};return{excluded:!1===t.filter(n),node:n}}}function y(){var e=h(/^([^<]+)/);if(e){var n={type:"Text",content:e[1]};return{excluded:!1===t.filter(n),node:n}}}function f(){var e=h(/([\w-:.]+)\s*=\s*("[^"]*"|'[^']*'|\w+)\s*/);if(e)return{name:e[1],value:d(e[2])}}function d(e){return e.replace(/^['"]|['"]$/g,"")}function h(t){var n=e.match(t);if(n)return e=e.slice(n[0].length),n}function p(){return 0===e.length}function v(t){return 0===e.indexOf(t)}return t.filter=t.filter||function(){return!0},e=e.trim(),o()}}}]);