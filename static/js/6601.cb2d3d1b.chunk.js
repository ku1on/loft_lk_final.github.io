"use strict";(self.webpackChunkloft=self.webpackChunkloft||[]).push([[6601],{46601:function(e,a,t){t.r(a),t.d(a,{default:function(){return K}});var n=t(93433),r=t(37762),s=t(15861),c=t(29439),i=t(87757),l=t.n(i),o=t(90841),x=t(24149),d=t(16106),h=t(67056),u=t(65942),p=t(26535),m=t(29596),j=t(47313),y=t(31881),f=t.n(y),b=t(69172),g=t(2360),v=t(29466),w=t(71978),_=t(22819),Z=t(37169),k=t(26236),C=t(75767),S=t(45163),z=t(64794),B=t(5445),T=t(19469),U=t(33837),W=t(24511),D=t(46417);function K(){var e=(0,W.$)().t,a=function(){return(0,D.jsx)(o.xu,{borderWidth:"1px",alignItems:"center",textAlign:"center",alignContent:"center",style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},borderRadius:"lg",bgColor:"white",children:(0,D.jsx)(o.xu,{m:"20px",children:(0,D.jsxs)(o.Kq,{alignItems:"center",direction:"column",justifyContent:"center",paddingTop:"1.5rem",paddingBottom:"1.5rem",color:"gray.500",children:[(0,D.jsxs)("svg",{spacing:"2",xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",children:[(0,D.jsx)("path",{d:"M12 13.3c-.13 0-.26-.03-.38-.1L2.79 8.09a.752.752 0 1 1 .76-1.3L12 11.68l8.4-4.86a.76.76 0 0 1 1.03.27c.21.36.08.82-.27 1.03l-8.77 5.08a.94.94 0 0 1-.39.1Z",fill:"currentColor"}),(0,D.jsx)("path",{d:"M12 22.36c-.41 0-.75-.34-.75-.75v-9.07c0-.41.34-.75.75-.75s.75.34.75.75v9.07c0 .41-.34.75-.75.75Z",fill:"currentColor"}),(0,D.jsx)("path",{d:"M12 22.75c-.88 0-1.75-.19-2.44-.57l-5.34-2.97c-1.45-.8-2.58-2.73-2.58-4.39V9.17c0-1.66 1.13-3.58 2.58-4.39l5.34-2.96c1.37-.76 3.51-.76 4.88 0l5.34 2.97c1.45.8 2.58 2.73 2.58 4.39v5.65c0 1.66-1.13 3.58-2.58 4.39l-5.34 2.96c-.69.38-1.56.57-2.44.57Zm0-20c-.63 0-1.25.13-1.71.38L4.95 6.1c-.96.53-1.81 1.97-1.81 3.07v5.65c0 1.1.85 2.54 1.81 3.08l5.34 2.97c.91.51 2.51.51 3.42 0l5.34-2.97c.96-.54 1.81-1.97 1.81-3.08V9.17c0-1.1-.85-2.54-1.81-3.08l-5.34-2.97c-.46-.24-1.08-.37-1.71-.37Z",fill:"currentColor"})]}),(0,D.jsx)(o.xv,{fontSize:"lg",fontWeight:"bold",children:e("notfound.data")})]})})})},t=function(e){return(0,D.jsx)(x.u,{borderWidth:"1px",style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},borderRadius:"lg",label:e.name,hasArrow:!0,placement:"top",children:(0,D.jsxs)(o.xv,{as:o.rU,_hover:{color:"main",textDecoration:"none"},children:[e.text," ",e.icon]})})},i=(0,j.useState)([]),y=(0,c.Z)(i,2),K=y[0],q=y[1],L=(0,j.useState)(!1),R=(0,c.Z)(L,2),M=R[0],N=R[1],V=(0,j.useState)(!1),$=(0,c.Z)(V,2),A=$[0],J=$[1],P=(0,j.useState)(!1),E=(0,c.Z)(P,2),I=E[0],O=E[1],H=(0,j.useState)(null),X=(0,c.Z)(H,2),F=X[0],G=X[1],Q=(0,j.useState)([]),Y=(0,c.Z)(Q,2),ee=Y[0],ae=Y[1],te=(0,j.useState)(10),ne=(0,c.Z)(te,2),re=ne[0],se=ne[1],ce=(0,j.useState)("all"),ie=(0,c.Z)(ce,2),le=ie[0],oe=ie[1],xe=(0,j.useState)(e("analytics.table.show_date.no")),de=(0,c.Z)(xe,2),he=de[0],ue=de[1],pe=(0,j.useState)(!0),me=(0,c.Z)(pe,2),je=me[0],ye=me[1],fe=function(){var e=(0,s.Z)(l().mark((function e(){var a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f().get("".concat((0,b.Z)(),"/admin/get_analytics?limit=",10),{headers:{authorization:"Bearer ".concat((0,g.Z)())}});case 2:a=e.sent,q(a.data.analytics);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=(0,s.Z)(l().mark((function e(){var a,t,n,s,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f().get("".concat((0,b.Z)(),"/admin/get_releases?type=ok"),{headers:{authorization:"Bearer ".concat((0,g.Z)())}});case 2:a=e.sent,t=[],n=(0,r.Z)(a.data.releases);try{for(n.s();!(s=n.n()).done;)c=s.value,t.push({value:c.id,label:"".concat(c.artists," - ").concat(c.title)})}catch(i){n.e(i)}finally{n.f()}ae(t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=(0,s.Z)(l().mark((function e(){var a,t,n,s,c,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f().get("".concat((0,b.Z)(),"/admin/get_date_streams"),{headers:{authorization:"Bearer ".concat((0,g.Z)())}});case 2:a=e.sent,t=a.data.streams,n=[],s=(0,r.Z)(t);try{for(s.s();!(c=s.n()).done;)i=c.value,n.push({name:i.date,"\u0412\u0441\u0435 \u043f\u0440\u043e\u0441\u043b\u0443\u0448\u0438\u0432\u0430\u043d\u0438\u044f":i.all_streams,"\u041f\u043b\u0430\u0442\u043d\u044b\u0435 \u043f\u0440\u043e\u0441\u043b\u0443\u0448\u0438\u0432\u0430\u043d\u0438\u044f":i.pay_streams})}catch(l){s.e(l)}finally{s.f()}G(n),N(!0);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ve=function(){var e=(0,s.Z)(l().mark((function e(){var a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f().get("".concat((0,b.Z)(),"/admin/get_all_streams"),{headers:{authorization:"Bearer ".concat((0,g.Z)())}});case 2:a=e.sent,J(a.data.all_streams),O(a.data.pay_streams);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),we=function(){var a=(0,s.Z)(l().mark((function a(t){var n;return l().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(se(t),N(!1),ye(!0),a.prev=3,n=null,"all"!==le){a.next=19;break}if(he!==e("analytics.table.show_date.yes")){a.next=13;break}return a.next=9,f().get("".concat((0,b.Z)(),"/admin/get_date_streams?limit=").concat(t,"&orderBy=desc"),{headers:{authorization:"Bearer ".concat((0,g.Z)())}});case 9:n=a.sent,q(n.data.streams),a.next=17;break;case 13:return a.next=15,f().get("".concat((0,b.Z)(),"/admin/get_analytics?limit=").concat(t),{headers:{authorization:"Bearer ".concat((0,g.Z)())}});case 15:n=a.sent,q(n.data.analytics);case 17:a.next=30;break;case 19:if(he!==e("analytics.table.show_date.yes")){a.next=26;break}return a.next=22,f().get("".concat((0,b.Z)(),"/admin/get_release_date_streams?limit=").concat(t,"&id=").concat(le,"&orderBy=desc"),{headers:{authorization:"Bearer ".concat((0,g.Z)())}});case 22:n=a.sent,q(n.data.streams),a.next=30;break;case 26:return a.next=28,f().get("".concat((0,b.Z)(),"/admin/get_release_analytics?limit=").concat(t,"&id=").concat(le),{headers:{authorization:"Bearer ".concat((0,g.Z)())}});case 28:n=a.sent,q(n.data.analytics);case 30:a.next=34;break;case 32:a.prev=32,a.t0=a.catch(3);case 34:return a.prev=34,N(!0),ye(!1),a.finish(34);case 38:case"end":return a.stop()}}),a,null,[[3,32,34,38]])})));return function(e){return a.apply(this,arguments)}}(),_e=function(){var a=(0,s.Z)(l().mark((function a(){var t,n,s,c,i,o,x,d,h,u,p;return l().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=document.getElementsByName("release")[0].value,oe(t),"all"===t){a.next=41;break}return N(!1),G(!1),J(!1),ye(!0),ue(e("analytics.table.show_date.no")),se(10),a.prev=9,a.next=12,f().get("".concat((0,b.Z)(),"/admin/get_release_analytics?id=").concat(t,"&limit=").concat(re),{headers:{authorization:"Bearer ".concat((0,g.Z)())}});case 12:return n=a.sent,q(n.data.analytics),a.next=16,f().get("".concat((0,b.Z)(),"/admin/get_release_analytics?id=").concat(t),{headers:{authorization:"Bearer ".concat((0,g.Z)())}});case 16:n=a.sent,q(n.data.analytics),s=0,c=0,i=(0,r.Z)(n.data.analytics);try{for(i.s();!(o=i.n()).done;)x=o.value,s=x.all_streams+s,c=x.pay_streams+c}catch(l){i.e(l)}finally{i.f()}return J(s),O(c),a.next=26,f().get("".concat((0,b.Z)(),"/admin/get_release_date_streams?id=").concat(t),{headers:{authorization:"Bearer ".concat((0,g.Z)())}});case 26:n=a.sent,d=[],h=(0,r.Z)(n.data.streams);try{for(h.s();!(u=h.n()).done;)p=u.value,d.push({name:p.date,"\u0412\u0441\u0435 \u043f\u0440\u043e\u0441\u043b\u0443\u0448\u0438\u0432\u0430\u043d\u0438\u044f":p.all_streams,"\u041f\u043b\u0430\u0442\u043d\u044b\u0435 \u043f\u0440\u043e\u0441\u043b\u0443\u0448\u0438\u0432\u0430\u043d\u0438\u044f":p.pay_streams})}catch(l){h.e(l)}finally{h.f()}G(d),a.next=35;break;case 33:a.prev=33,a.t0=a.catch(9);case 35:return a.prev=35,N(!0),ye(!1),a.finish(35);case 39:a.next=50;break;case 41:N(!1),G(!1),J(!1),ye(!0),be(),ve(),fe(),ge(),ye(!1);case 50:case"end":return a.stop()}}),a,null,[[9,33,35,39]])})));return function(){return a.apply(this,arguments)}}(),Ze=function(){var a=(0,s.Z)(l().mark((function a(t){var n;return l().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(ue(t),N(!1),ye(!0),a.prev=3,n=null,"all"!==le){a.next=19;break}if(t!==e("analytics.table.show_date.yes")){a.next=13;break}return a.next=9,f().get("".concat((0,b.Z)(),"/admin/get_date_streams?limit=").concat(re,"&orderBy=desc"),{headers:{authorization:"Bearer ".concat((0,g.Z)())}});case 9:n=a.sent,q(n.data.streams),a.next=17;break;case 13:return a.next=15,f().get("".concat((0,b.Z)(),"/admin/get_analytics?limit=").concat(re),{headers:{authorization:"Bearer ".concat((0,g.Z)())}});case 15:n=a.sent,q(n.data.analytics);case 17:a.next=30;break;case 19:if(t!==e("analytics.table.show_date.yes")){a.next=26;break}return a.next=22,f().get("".concat((0,b.Z)(),"/admin/get_release_date_streams?limit=").concat(re,"&id=").concat(le,"&orderBy=desc"),{headers:{authorization:"Bearer ".concat((0,g.Z)())}});case 22:n=a.sent,q(n.data.streams),a.next=30;break;case 26:return a.next=28,f().get("".concat((0,b.Z)(),"/admin/get_release_analytics?limit=").concat(re,"&id=").concat(le),{headers:{authorization:"Bearer ".concat((0,g.Z)())}});case 28:n=a.sent,q(n.data.analytics);case 30:a.next=34;break;case 32:a.prev=32,a.t0=a.catch(3);case 34:return a.prev=34,N(!0),ye(!1),a.finish(34);case 38:case"end":return a.stop()}}),a,null,[[3,32,34,38]])})));return function(e){return a.apply(this,arguments)}}();return(0,j.useEffect)((function(){M||(be(),ve(),fe(),ge(),ye(!1))}),[]),(0,D.jsxs)(o.xu,{children:[(0,D.jsx)(o.X6,{children:e("menu.analytics")}),(0,D.jsxs)(o.xu,{mt:"10px",children:[(0,D.jsx)(o.xu,{borderWidth:"1px",style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},borderRadius:"lg",bgColor:"white",mb:"10px",children:(0,D.jsxs)(o.xu,{m:"20px",children:[(0,D.jsx)(o.xv,{fontSize:"xl",fontWeight:"bold",children:e("analytics.filters")}),(0,D.jsx)(o.xu,{mt:"10px",children:(0,D.jsxs)(o.Kq,{direction:["column","row"],spacing:"10px",children:[(0,D.jsx)(o.xu,{w:"100%",children:(0,D.jsx)(T.ZP,{className:"basic-single",classNamePrefix:"select",isLoading:je,isSearchable:!0,defaultValue:{value:"all",label:e("analytics.filters.all")},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u0435\u043b\u0438\u0437",name:"release",options:[{value:"all",label:e("analytics.filters.all")}].concat((0,n.Z)(ee))})}),(0,D.jsx)(d.zx,{colorScheme:"teal",_focus:{boxShadow:"none!important"},_active:{boxShadow:"none!important"},onClick:_e,isLoading:je,w:["100%","auto"],children:e("analytics.button.apply")})]})})]})}),(0,D.jsx)(o.xu,{borderWidth:"1px",style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},borderRadius:"lg",bgColor:"white",children:(0,D.jsx)(o.xu,{m:"20px",children:(0,D.jsxs)(o.xu,{children:[(0,D.jsx)(o.xv,{fontSize:"xl",fontWeight:"bold",children:e("analytics.streams")}),!1===A&&(0,D.jsx)(o.xu,{mt:"20px",justifyContent:"center",children:(0,D.jsx)(o.M5,{children:(0,D.jsx)(h.$,{size:"xl",color:"main"})})})||(0,D.jsx)(o.xu,{mt:"20px",children:(0,D.jsxs)(o.Kq,{direction:"row",spacing:"10px",children:[(0,D.jsxs)(u.kN,{children:[(0,D.jsx)(u.dw,{children:e("analytics.streams.all")}),(0,D.jsx)(u.Jf,{children:A})]}),(0,D.jsxs)(u.kN,{children:[(0,D.jsx)(u.dw,{children:e("analytics.streams.pay")}),(0,D.jsx)(u.Jf,{children:I})]})]})}),(0,D.jsx)(o.xu,{children:!F&&(0,D.jsx)(o.xu,{mt:"20px",justifyContent:"center",children:(0,D.jsx)(o.M5,{children:(0,D.jsx)(h.$,{size:"xl",color:"main"})})})||(0,D.jsx)(o.xu,{mt:"20px",children:0===F.length&&(0,D.jsx)(a,{})||(0,D.jsx)(w.h,{width:"100%",height:"100%",minHeight:"280px",children:(0,D.jsxs)(_.w,{width:1e3,height:300,data:F,margin:{top:5,right:30,left:20,bottom:5},children:[(0,D.jsx)(Z.q,{strokeDasharray:"3 3"}),(0,D.jsx)(k.K,{dataKey:"name"}),(0,D.jsx)(C.B,{}),(0,D.jsx)(S.u,{}),(0,D.jsx)(z.D,{}),(0,D.jsx)(B.x,{type:"monotone",dataKey:"\u0412\u0441\u0435 \u043f\u0440\u043e\u0441\u043b\u0443\u0448\u0438\u0432\u0430\u043d\u0438\u044f",stroke:"#000000",activeDot:{r:8}}),(0,D.jsx)(B.x,{type:"monotone",dataKey:"\u041f\u043b\u0430\u0442\u043d\u044b\u0435 \u043f\u0440\u043e\u0441\u043b\u0443\u0448\u0438\u0432\u0430\u043d\u0438\u044f",stroke:"#ffd21c"})]})})})})]})})})]}),(0,D.jsx)(o.xu,{mt:"20px",children:(0,D.jsx)(o.xu,{children:(0,D.jsxs)(o.xu,{children:[(0,D.jsxs)(o.Kq,{direction:"row",spacing:"20px",children:[(0,D.jsxs)(o.xu,{children:[(0,D.jsx)(o.xv,{color:"gray.500",fontWeight:"bold",children:e("analytics.table.show")}),(0,D.jsxs)(p.v2,{closeOnSelect:!0,children:[(0,D.jsxs)(p.j2,{as:d.zx,borderWidth:"1px",style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},justifyContent:"center",width:"auto",minWeight:"2.5rem",height:"3rem",colorScheme:"teal",variant:"outline",color:"gray.700",borderColor:"gray.200",borderRadius:"lg",bgColor:"white",isLoading:je,children:[re," ",(0,D.jsx)(U.v4,{w:6,h:6})]}),(0,D.jsx)(p.qy,{children:(0,D.jsxs)(p.__,{defaultValue:"10",value:"".concat(re),type:"radio",children:[(0,D.jsx)(p.ii,{value:"10",onClick:function(){we(10)},children:"10"}),(0,D.jsx)(p.ii,{value:"20",onClick:function(){we(20)},children:"20"}),(0,D.jsx)(p.ii,{value:"30",onClick:function(){we(30)},children:"30"}),(0,D.jsx)(p.ii,{value:"40",onClick:function(){we(40)},children:"40"}),(0,D.jsx)(p.ii,{value:"50",onClick:function(){we(50)},children:"50"}),(0,D.jsx)(p.ii,{value:"all",onClick:function(){we(e("analytics.table.show.all"))},children:e("analytics.table.show.all")})]})})]})]}),(0,D.jsxs)(o.xu,{children:[(0,D.jsx)(o.xv,{color:"gray.500",fontWeight:"bold",children:e("analytics.table.show_date")}),(0,D.jsxs)(p.v2,{closeOnSelect:!0,children:[(0,D.jsxs)(p.j2,{as:d.zx,borderWidth:"1px",style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},justifyContent:"center",width:"auto",minWeight:"2.5rem",height:"3rem",colorScheme:"teal",variant:"outline",isLoading:je,color:"gray.700",borderColor:"gray.200",borderRadius:"lg",bgColor:"white",children:[he," ",(0,D.jsx)(U.v4,{w:6,h:6})]}),(0,D.jsx)(p.qy,{children:(0,D.jsxs)(p.__,{value:he,defaultValue:e("analytics.table.show_date.no"),type:"radio",children:[(0,D.jsx)(p.ii,{value:e("analytics.table.show_date.yes"),onClick:function(){Ze(e("analytics.table.show_date.yes"))},children:e("analytics.table.show_date.yes")}),(0,D.jsx)(p.ii,{value:e("analytics.table.show_date.no"),onClick:function(){Ze(e("analytics.table.show_date.no"))},children:e("analytics.table.show_date.no")})]})})]})]})]}),(0,D.jsx)(o.xu,{children:!M&&(0,D.jsx)(o.xu,{mt:"20px",justifyContent:"center",children:(0,D.jsx)(o.M5,{children:(0,D.jsx)(h.$,{size:"xl",color:"main"})})})||(0,D.jsx)(o.xu,{mt:"20px",children:0===K.length&&(0,D.jsx)(a,{})||(0,D.jsx)(m.xJ,{borderWidth:"1px",style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},borderRadius:"lg",bgColor:"white",children:(0,D.jsxs)(m.iA,{children:[(0,D.jsx)(m.hr,{children:(0,D.jsxs)(m.Tr,{children:[(0,D.jsx)(m.Th,{children:e("analytics.table.title")}),(0,D.jsx)(m.Th,{children:e("analytics.table.artist")}),(0,D.jsx)(m.Th,{children:"UPC"}),he===e("analytics.table.show_date.yes")&&(0,D.jsx)(m.Th,{children:e("analytics.table.date")}),(0,D.jsx)(m.Th,{children:(0,D.jsx)(t,{icon:(0,D.jsx)(U.Uj,{}),text:e("analytics.streams.pay"),name:e("analytics.table.pay_streams.info")})}),(0,D.jsx)(m.Th,{children:(0,D.jsx)(t,{icon:(0,D.jsx)(U.Uj,{}),text:e("analytics.streams.all"),name:e("analytics.table.all_streams.info")})})]})}),(0,D.jsx)(m.p3,{children:K.map((function(a){return(0,D.jsxs)(m.Tr,{children:[(0,D.jsx)(m.Td,{children:(0,D.jsx)(o.rU,{_hover:{color:"main",textDecoration:"none"},as:v.rU,to:"/admin/music/".concat(a.release_id,"/view"),children:a.title})}),(0,D.jsx)(m.Td,{children:(0,D.jsx)(o.rU,{_hover:{color:"main",textDecoration:"none"},as:v.rU,to:"/admin/music/".concat(a.release_id,"/view"),children:a.artists})}),(0,D.jsx)(m.Td,{children:(0,D.jsx)(o.rU,{_hover:{color:"main",textDecoration:"none"},as:v.rU,to:"/admin/music/".concat(a.release_id,"/view"),children:a.upc})}),he===e("analytics.table.show_date.yes")&&(0,D.jsx)(m.Td,{children:a.date}),(0,D.jsx)(m.Td,{children:(0,D.jsx)(o.rU,{_hover:{color:"main",textDecoration:"none"},as:v.rU,to:"/admin/music/".concat(a.release_id,"/view"),children:a.pay_streams})}),(0,D.jsx)(m.Td,{children:(0,D.jsx)(o.rU,{_hover:{color:"main",textDecoration:"none"},as:v.rU,to:"/admin/music/".concat(a.release_id,"/view"),children:a.all_streams})})]})}))})]})})})})]})})})]})}}}]);