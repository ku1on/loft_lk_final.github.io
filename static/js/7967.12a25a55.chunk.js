"use strict";(self.webpackChunkloft=self.webpackChunkloft||[]).push([[7967],{37967:function(e,t,n){n.r(t);var s=n(1413),r=n(15861),i=n(29439),l=n(87757),a=n.n(l),o=n(74511),c=n(64153),d=n(24149),h=n(16106),x=n(90841),u=n(29596),p=n(67056),j=n(31554),m=n(44415),f=n(12520),b=n(49056),g=n(47313),Z=n(31881),v=n.n(Z),w=n(69172),T=n(2360),I=n(75627),S=n(58821),k=n(46417);t.default=function(){var e=(0,g.useState)([]),t=(0,i.Z)(e,2),n=t[0],l=t[1],Z=(0,g.useState)(0),C=(0,i.Z)(Z,2),W=C[0],y=C[1],X=(0,g.useState)(0),z=(0,i.Z)(X,2),F=z[0],N=z[1],_=(0,g.useState)(!1),A=(0,i.Z)(_,2),E=A[0],O=A[1],B=(0,g.useState)(!1),L=(0,i.Z)(B,2),P=L[0],q=L[1],D=function(){var e=(0,r.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v().get("".concat((0,w.Z)(),"/admin/get_users"),{headers:{authorization:"Bearer ".concat((0,T.Z)())}});case 2:t=e.sent,l(t.data.users),q(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,g.useEffect)((function(){P||D()}),[]);var H=(0,o.pm)(),J=(0,I.cI)(),M=J.register,R=J.handleSubmit,U=(0,c.qY)(),Y=U.isOpen,$=U.onOpen,G=U.onClose,K=function(){var e=(0,r.Z)(a().mark((function e(t){var n,s,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.prev=1,""===(n=t).password&&delete n.password,""===n.username&&delete n.username,""===n.email&&delete n.email,""===n.name&&delete n.name,""===n.status&&delete n.status,Object.assign(n,{id:W}),e.next=11,v().post("".concat((0,w.Z)(),"/admin/edit_user"),n,{headers:{authorization:"Bearer ".concat((0,T.Z)())}});case 11:s=e.sent,(r=s.data).error?H({position:"top",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!",description:r.error,status:"error",duration:3e3,isClosable:!0}):H({position:"top",title:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d!",status:"success",duration:3e3,isClosable:!0}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),H({position:"top",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!",description:e.t0,status:"error",duration:3e3,isClosable:!0});case 19:G(),D(),O(!1);case 22:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}(),Q=function(e){return(0,k.jsx)(d.u,{borderWidth:"1px",style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},borderRadius:"lg",label:e.name,hasArrow:!0,placement:"top",children:(0,k.jsx)(h.hU,{icon:e.icon,fontSize:"20px",variant:"ghost",_hover:{color:"main"},onClick:e.onClick})})};return(0,k.jsxs)(x.xu,{alignItems:"center",textAlign:"center",children:[(0,k.jsx)(x.X6,{fontWeight:"bold",size:"2xl",children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"}),(0,k.jsxs)(x.W2,{maxW:"container.xl",alignContent:"center",alignItems:"center",children:[(0,k.jsx)(u.xJ,{mt:"20px",children:(0,k.jsxs)(u.iA,{children:[(0,k.jsx)(u.hr,{children:(0,k.jsxs)(u.Tr,{children:[(0,k.jsx)(u.Th,{children:"#"}),(0,k.jsx)(u.Th,{children:"\u0418\u043c\u044f"}),(0,k.jsx)(u.Th,{children:"\u041b\u043e\u0433\u0438\u043d"}),(0,k.jsx)(u.Th,{children:"Email"}),(0,k.jsx)(u.Th,{children:"\u0421\u0443\u0431\u043a\u0430\u0431\u0438\u043d\u0435\u0442"}),(0,k.jsx)(u.Th,{children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),(0,k.jsx)(u.Th,{})]})}),(0,k.jsx)(u.p3,{children:n.map((function(e){return(0,k.jsxs)(u.Tr,{children:[(0,k.jsx)(u.Td,{children:e.id}),(0,k.jsx)(u.Td,{children:e.name}),(0,k.jsx)(u.Td,{children:e.username}),(0,k.jsx)(u.Td,{children:e.email}),(0,k.jsx)(u.Td,{children:e.isSubkabinet?"\u0414\u0430 (\u041f\u0440\u043e\u0432\u0430\u0439\u0434\u0435\u0440 ID: ".concat(e.supplierId,")"):"\u041d\u0435\u0442"}),(0,k.jsx)(u.Td,{children:e.status}),(0,k.jsx)(u.Td,{children:(0,k.jsx)(Q,{name:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",icon:(0,k.jsx)(S.HlX,{}),onClick:function(){y(e.id),N(e.name),$()}})})]})}))})]})}),!P&&(0,k.jsx)(x.M5,{mt:"20px",children:(0,k.jsx)(p.$,{color:"main",size:"xl"})})]}),(0,k.jsxs)(j.u_,{isOpen:Y,onClose:G,children:[(0,k.jsx)(j.ZA,{backdropFilter:"blur(5px)"}),(0,k.jsxs)(j.hz,{children:[(0,k.jsxs)(j.xB,{children:["\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f ",F]}),(0,k.jsx)(j.ol,{}),(0,k.jsx)(j.fe,{children:(0,k.jsxs)("form",{onSubmit:R(K),children:[(0,k.jsxs)(m.NI,{children:[(0,k.jsx)(m.lX,{fontWeight:"bold",htmlFor:"username",children:"\u041d\u043e\u0432\u044b\u0439 \u043b\u043e\u0433\u0438\u043d"}),(0,k.jsx)(f.Input,(0,s.Z)({id:"username",placeholder:"\u041b\u043e\u0433\u0438\u043d",type:"text"},M("username")))]}),(0,k.jsxs)(m.NI,{mt:"10px",children:[(0,k.jsx)(m.lX,{fontWeight:"bold",htmlFor:"email",children:"\u041d\u043e\u0432\u044b\u0439 Email"}),(0,k.jsx)(f.Input,(0,s.Z)({id:"email",placeholder:"Email",type:"email"},M("email")))]}),(0,k.jsxs)(m.NI,{mt:"10px",children:[(0,k.jsx)(m.lX,{fontWeight:"bold",htmlFor:"name",children:"\u041d\u043e\u0432\u043e\u0435 \u0438\u043c\u044f"}),(0,k.jsx)(f.Input,(0,s.Z)({id:"name",placeholder:"\u0418\u043c\u044f",type:"text"},M("name")))]}),(0,k.jsxs)(m.NI,{children:[(0,k.jsx)(m.lX,{fontWeight:"bold",htmlFor:"status",children:"\u041d\u043e\u0432\u044b\u0439 \u0441\u0442\u0430\u0442\u0443\u0441"}),(0,k.jsxs)(b.Ph,(0,s.Z)((0,s.Z)({id:"status",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0442\u0430\u0442\u0443\u0441"},M("status")),{},{children:[(0,k.jsx)("option",{value:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c"}),(0,k.jsx)("option",{value:"admin",children:"\u0410\u0434\u043c\u0438\u043d"})]}))]}),(0,k.jsxs)(m.NI,{children:[(0,k.jsx)(m.lX,{fontWeight:"bold",htmlFor:"status",children:"\u042d\u0442\u043e \u043b\u0435\u0439\u0431\u043b?"}),(0,k.jsxs)(b.Ph,(0,s.Z)((0,s.Z)({id:"status",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u0442\u0432\u0435\u0442"},M("isLabel")),{},{children:[(0,k.jsx)("option",{value:"true",children:"\u0414\u0430"}),(0,k.jsx)("option",{value:"false",children:"\u041d\u0435\u0442"})]}))]}),(0,k.jsxs)(m.NI,{mt:"10px",children:[(0,k.jsx)(m.lX,{fontWeight:"bold",htmlFor:"password",children:"\u041d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"}),(0,k.jsx)(f.Input,(0,s.Z)({id:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"text"},M("password")))]}),(0,k.jsx)(h.zx,{mt:"10px",w:"100%",variant:"outline",colorScheme:"teal",_focus:{boxShadow:"none!important"},_active:{boxShadow:"none!important"},type:"submit",isLoading:E,mb:"20px",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})})]})]})]})}}}]);