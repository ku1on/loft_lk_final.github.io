"use strict";(self.webpackChunkloft=self.webpackChunkloft||[]).push([[392],{50392:function(t,e,n){n.r(e),n.d(e,{default:function(){return M}});var i=n(29439),l=n(47313),r=n(24511),s=n(90841),o=n(93433),c=n(37762),a=n(64153),d=n(74511),x=n(31554),h=n(44415),u=n(16106),p=n(12520),m=n(8710),j=n(21905),f=n(29596),g=n(26672),v=n(40689),y=n(33837),w=n(42653),b=n.n(w),S=n(70816),C=n.n(S),Z=n(34546),k=n(93318),T=n.n(k),q=function(t){var e,n=t.title,i=t.name,l=t.items,r="<metadata><ttm:title>".concat(n,'</ttm:title></metadata><ttm:agent xml:id="voice1" type="person"><ttm:name type="full">').concat(i,"</ttm:name></ttm:agent>"),s="",o=(0,c.Z)(l);try{for(o.s();!(e=o.n()).done;){var a=e.value;s+='<p begin="'.concat(a.begin,'" end="').concat(a.end,'">').concat(a.text,"</p>")}}catch(u){o.e(u)}finally{o.f()}var d="<body><div>".concat(s,"</div></body>"),x='<?xml version="1.0" encoding="UTF-8"?><tt xmlns="http://www.w3.org/ns/ttml" xmlns:tts="http://www.w3.org/ns/ttml#styling" xmlns:itunes="http://itunes.apple.com/lyric-ttml-extensions" xmlns:ttm="http://www.w3.org/ns/ttml#metadata" xml:lang="en-US"><head>'.concat(r,"</head>").concat(d,"</tt>"),h=[T()(x)];return new Blob(h,{type:"text/plain;charset=utf-8"})},F=n(46417);var z=function(t){var e=t.t,n=(0,a.qY)(),r=n.isOpen,w=n.onOpen,S=n.onClose,k=(0,l.useState)(""),T=(0,i.Z)(k,2),z=T[0],K=T[1],M=(0,l.useState)(""),U=(0,i.Z)(M,2),W=U[0],I=U[1],L=(0,l.useState)(""),R=(0,i.Z)(L,2),D=R[0],H=R[1],N=(0,l.useState)(""),X=(0,i.Z)(N,2),A=X[0],E=X[1],_=(0,l.useState)(""),B=(0,i.Z)(_,2),O=B[0],G=B[1],P=(0,l.useState)(null),J=(0,i.Z)(P,2),V=J[0],Y=J[1],$=(0,l.useState)(1),Q=(0,i.Z)($,2),tt=Q[0],et=Q[1],nt=(0,l.useState)([]),it=(0,i.Z)(nt,2),lt=it[0],rt=it[1],st=(0,l.useState)([]),ot=(0,i.Z)(st,2),ct=ot[0],at=ot[1],dt=(0,l.useState)(0),xt=(0,i.Z)(dt,2),ht=xt[0],ut=xt[1],pt=(0,l.useState)(0),mt=(0,i.Z)(pt,2),jt=mt[0],ft=mt[1],gt=(0,l.useState)(!1),vt=(0,i.Z)(gt,2),yt=(vt[0],vt[1]),wt=l.useState(!1),bt=(0,i.Z)(wt,2),St=bt[0],Ct=bt[1],Zt=function(){Ct(!St)},kt=function(){et(1),ut(0),ft(0),Y(null),St&&Ct(!1),at([])},Tt=(0,d.pm)(),qt=function(){K(""),I(""),G(""),H(""),E(""),St&&Ct(!1),et(1),ut(0),ft(0),Y(null),at([])},Ft=function(){Tt({position:"top",title:e("lyrics.toast.error"),description:e("lyrics.toast.error.desc"),status:"error",duration:3e3,isClosable:!0})},zt=function(t){yt(!0);try{if(!/(mp3|mpeg|wav)$/.test(t[0].type))return void Tt({position:"top",title:e("lyrics.toast.file"),description:e("lyrics.toast.file.desc"),status:"error",duration:3e3,isClosable:!0});K(URL.createObjectURL(t[0])),I(t[0].name);var n=t[0].name.split(".");2===(n=n[0].split("-")).length&&(""===D.trim()&&H(n[0].trim()),""===A.trim()&&E(n[1].trim()))}catch(i){Tt({position:"top",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!",description:"".concat(i),status:"error",duration:3e3,isClosable:!0})}finally{yt(!1)}},Kt={START:function(t){null===t||void 0===t||t.preventDefault(),null===t||void 0===t||t.stopPropagation(),window.scrollTo(0,0),St||Ct(!0),Y({begin:C().utc(1e3*ht).format("HH:mm:ss.SSS"),end:null,text:lt[0].text})},END:function(t){if(null===t||void 0===t||t.preventDefault(),null===t||void 0===t||t.stopPropagation(),window.scrollTo(0,0),St&&V){var e={begin:V.begin,end:C().utc(1e3*ht).format("HH:mm:ss.SSS"),text:V.text};at([].concat((0,o.Z)(ct),[e])),Y(null);var n=lt;n.splice(0,1),rt(n),0===n.length&&et(3)}}};return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(x.u_,{isCentered:!1,isOpen:r,onClose:S,children:[(0,F.jsx)(x.ZA,{backdropFilter:"blur(5px)"}),(0,F.jsxs)(x.hz,{children:[(0,F.jsx)(x.xB,{children:e("lyrics.instruction")}),(0,F.jsx)(x.ol,{}),(0,F.jsx)(x.fe,{children:(0,F.jsx)(s.xv,{className:"lyrics_modal",dangerouslySetInnerHTML:{__html:e("lyrics.instruction.html")}})})]})]}),1===tt&&(0,F.jsxs)(s.Kq,{spacing:"15px",direction:"column",children:[(0,F.jsx)(s.X6,{size:"lg",children:e("lyrics.information")}),(0,F.jsxs)(s.xv,{children:[e("lyrics.information.text.1")," ",(0,F.jsx)(s.rU,{color:"main",_hover:{color:"teal.400",textDecoration:"none"},onClick:w,children:e("lyrics.information.text.2")})," ",e("lyrics.information.text.3")]}),""===z&&(0,F.jsxs)(h.NI,{children:[(0,F.jsx)(h.lX,{fontWeight:"bold",htmlFor:"file",children:e("lyrics.input.file")}),(0,F.jsx)(b(),{onFileChange:function(t){zt(t)},placeholder:e("lyrics.input.file.placeholder"),multipleFiles:!1,accept:"*",hideClearButton:!0})]})||(0,F.jsxs)(h.NI,{children:[(0,F.jsx)(h.lX,{fontWeight:"bold",htmlFor:"file",children:e("lyrics.input.file")}),(0,F.jsxs)(s.Kq,{direction:"row",spacing:"10px",justifyContent:"space-between",children:[(0,F.jsx)(s.M5,{children:(0,F.jsx)(s.xv,{children:W})}),(0,F.jsx)(u.hU,{"aria-label":"reset",variant:"ghost",onClick:qt,icon:(0,F.jsx)(y.ny,{})})]})]}),(0,F.jsxs)(s.Kq,{direction:["column","row"],spacing:"10px",children:[(0,F.jsxs)(h.NI,{children:[(0,F.jsx)(h.lX,{fontWeight:"bold",htmlFor:"artist",children:e("lyrics.input.artist")}),(0,F.jsx)(p.Input,{onChange:function(t){var e=t.target.value;H(e)},id:"artist",type:"text",value:D,placeholder:e("lyrics.input.artist.placeholder")})]}),(0,F.jsxs)(h.NI,{children:[(0,F.jsx)(h.lX,{fontWeight:"bold",htmlFor:"title",children:e("lyrics.input.title")}),(0,F.jsx)(p.Input,{onChange:function(t){var e=t.target.value;E(e)},id:"title",type:"text",value:A,placeholder:e("lyrics.input.title.placeholder")})]})]}),(0,F.jsxs)(h.NI,{children:[(0,F.jsx)(h.lX,{fontWeight:"bold",htmlFor:"text",children:e("lyrics.input.text")}),(0,F.jsx)(m.g,{onChange:function(t){var e=t.target.value;G(e)},id:"text",type:"text",minH:"216px",value:O,placeholder:e("lyrics.input.text.placeholder")})]}),(0,F.jsxs)(s.Kq,{direction:"row",justifyContent:"space-between",children:[(0,F.jsx)(s.xu,{}),(0,F.jsx)(u.zx,{colorScheme:"teal",onClick:function(){if(z&&D&&A&&O){var t,e=O.trim().split("\n"),n=[],i=1,l=(0,c.Z)(e);try{for(l.s();!(t=l.n()).done;){var r=t.value;n.push({id:i,begin:null,end:null,text:r}),i+=1}}catch(s){l.e(s)}finally{l.f()}rt(n),et(2)}else Ft()},children:e("lyrics.button.next")})]})]})||2===tt&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(s.Kq,{direction:"row",justifyContent:"space-between",children:[(0,F.jsx)(u.zx,{colorScheme:"teal",onClick:kt,children:e("lyrics.button.prev")}),(0,F.jsx)(u.zx,{variant:"outline",colorScheme:"teal",onClick:w,children:e("lyrics.button.how")})]}),(0,F.jsxs)(s.Kq,{paddingTop:6,spacing:"15px",direction:"column",children:[(0,F.jsxs)(s.xu,{children:[(0,F.jsx)(s.xu,{display:"none",children:(0,F.jsx)(v.Z,{url:z,playing:St,onProgress:function(t){ut(t.playedSeconds)},onEnded:Zt,onDuration:function(t){ft(t)}})}),(0,F.jsxs)(s.xv,{fontWeight:"bold",children:[C().utc(1e3*Math.round(ht)).format("mm:ss"),"/",C().utc(1e3*Math.round(jt)).format("mm:ss")]}),(0,F.jsxs)(s.Kq,{direction:"row",spacing:"10px",children:[(0,F.jsx)(u.hU,{"aria-label":"toggle",variant:"ghost",onClick:Zt,icon:St?(0,F.jsx)(g.Wh,{}):(0,F.jsx)(g.gmG,{})}),(0,F.jsx)(u.hU,{"aria-label":"reset",variant:"ghost",onClick:kt,icon:(0,F.jsx)(g.JuG,{})}),(0,F.jsx)(s.M5,{w:"100%",children:(0,F.jsxs)(j.iR,{"aria-label":"duration",colorScheme:"teal",value:ht,max:jt,min:0,isDisabled:!0,children:[(0,F.jsx)(j.Uj,{children:(0,F.jsx)(j.Ms,{})}),(0,F.jsx)(j.gs,{})]})})]})]}),(0,F.jsx)(Z.GlobalHotKeys,{keyMap:{START:{sequence:"space",action:"keydown"},END:{sequence:"space",action:"keyup"}},handlers:Kt,allowChanges:!0,children:(0,F.jsx)(f.xJ,{maxH:"sm",overflow:"auto",overflowY:"auto",children:(0,F.jsx)(f.iA,{variant:"simple",children:(0,F.jsxs)(f.hr,{children:[(0,F.jsx)(f.Tr,{children:(0,F.jsx)(f.Th,{children:e("lyrics.table.string")})}),(0,F.jsx)(f.p3,{w:"100%",children:lt.map((function(t,e){return(0,F.jsxs)(f.Tr,{w:"100%",bgColor:V&&0===e?"teal.100":void 0,children:[(0,F.jsx)(f.Td,{w:"100%",children:t.text}),(0,F.jsx)(f.Td,{w:"100%"})]})}))})]})})})})]})]})||3===tt&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(s.Kq,{direction:"column",spacing:"15px",children:[(0,F.jsx)(s.X6,{size:"lg",children:e("lyrics.information")}),(0,F.jsx)(s.xv,{children:e("lyrics.info.manager")}),(0,F.jsx)(s.rU,{download:"".concat(D," - ").concat(A,".ttml"),w:"100%",href:ct.length?URL.createObjectURL(q({title:A.trim(),name:D.trim(),items:ct})):"",_hover:{textDecoration:"none"},children:(0,F.jsx)(u.zx,{variant:"outline",w:"100%",colorScheme:"teal",children:e("lyrics.button.download")})})]}),(0,F.jsx)(s.Kq,{paddingTop:6,direction:"row",justifyContent:"space-between",children:(0,F.jsx)(u.zx,{colorScheme:"teal",onClick:qt,children:e("lyrics.button.prev")})})]})]})};var K=function(t){var e=t.t;return(0,F.jsx)(s.xu,{bgColor:"white",border:"1px transparent",borderRadius:"lg",boxShadow:"md",maxW:"3xl",padding:6,children:(0,F.jsx)(s.Kq,{direction:"column",spacing:"15px",children:(0,F.jsx)(z,{t:e})})})};var M=function(){var t=(0,l.useState)(window.innerWidth),e=(0,i.Z)(t,2),n=e[0],o=e[1];(0,l.useEffect)((function(){var t=function(){o(window.innerWidth)};return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[]);var c=n<=768,a=(0,r.$)().t,d=function(){return(0,F.jsx)(F.Fragment,{children:(0,F.jsx)(s.xu,{borderWidth:"1px",alignItems:"center",textAlign:"center",alignContent:"center",style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.01),0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},borderRadius:"lg",bgColor:"white",children:(0,F.jsx)(s.xu,{m:"20px",children:(0,F.jsxs)(s.Kq,{alignItems:"center",direction:"column",justifyContent:"center",paddingTop:"1.5rem",paddingBottom:"1.5rem",color:"gray.500",children:[(0,F.jsxs)("svg",{width:"33px",height:"32px",viewBox:"0 0 33 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",focusable:"false",class:"chakra-icon css-sqyknd",children:[(0,F.jsx)("path",{d:"M20 30.334h-8c-5.88 0-7.667-1.787-7.667-7.667V9.334c0-5.88 1.787-7.667 7.667-7.667h8c5.88 0 7.667 1.787 7.667 7.667v13.333c0 5.88-1.787 7.667-7.667 7.667ZM12 3.667c-4.773 0-5.667.907-5.667 5.667v13.333c0 4.76.894 5.667 5.667 5.667h8c4.773 0 5.667-.907 5.667-5.667V9.334c0-4.76-.894-5.667-5.667-5.667h-8Z"}),(0,F.jsx)("path",{d:"M18.667 8.333h-5.334c-.546 0-1-.453-1-1 0-.547.454-1 1-1h5.334c.546 0 1 .453 1 1 0 .547-.454 1-1 1ZM16 26.48a3.067 3.067 0 1 1 0-6.134 3.067 3.067 0 0 1 0 6.134Zm0-4.147a1.07 1.07 0 0 0-1.067 1.067c0 .587.48 1.067 1.067 1.067a1.07 1.07 0 0 0 1.066-1.067A1.07 1.07 0 0 0 16 22.333ZM2.33 29.996a.989.989 0 0 1-.707-.293 1.006 1.006 0 0 1 0-1.413L28.29 1.623a1.006 1.006 0 0 1 1.413 0 1.006 1.006 0 0 1 0 1.413L3.037 29.703c-.2.2-.454.293-.707.293Z"})]}),(0,F.jsx)(s.xv,{fontSize:"xl",fontWeight:"bold",children:a("device.mobile")})]})})})})};return(0,F.jsxs)(s.xu,{children:[(0,F.jsx)(s.X6,{size:"xl",children:a("menu.lyrics")}),(0,F.jsx)(s.xu,{mt:"20px",children:c&&(0,F.jsx)(d,{})||(0,F.jsx)(F.Fragment,{children:(0,F.jsx)(K,{t:a})})})]})}}}]);